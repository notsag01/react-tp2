(window.webpackJsonptheoWebApp=window.webpackJsonptheoWebApp||[]).push([[42],{"53P9":function(t,e,o){var n,a=e,i=o("oAGj"),r=o("gXiO");a.GraphemeUtils=(n=function(){r.CoreObject.call(this)},i.defineClass({name:"GraphemeUtils",ctor:n,superName:"CoreObject",statics:{CR:0,LF:1,Control:2,Extend:3,Regional_Indicator:4,SpacingMark:5,L_Type:6,V_Type:7,T_Type:8,LV:9,LVT:10,Other:11,Prepend:12,E_Base:13,E_Modifier:14,ZWJ:15,Glue_After_Zwj:16,E_Base_GAZ:17,NotBreak:0,BreakStart:1,Break:2,BreakLastRegional:3,BreakPenultimateRegional:4,isSurrogate:function(t,e){var o=i.utf16s(t);return 55296<=o[e]&&o[e]<=56319&&56320<=o[e+1]&&o[e+1]<=57343},codePointAt:function(t,e){var o=i.utf16s(t),n=o[e];if(55296<=n&&n<=56319&&e<t.length-1){var a=i.toInt(n);return 56320<=(r=o[e+1])&&r<=57343?i.toInt(1024*(a-55296))+(i.toInt(r)-56320)+65536:a}if(56320<=n&&n<=57343&&e>=1){a=o[e-1];var r=i.toInt(n);return 55296<=a&&a<=56319?i.toInt(1024*(a-55296))+(i.toInt(r)-56320)+65536:r}return i.toInt(n)},shouldBreak:function(t,e,o){var a,r,s,c=[t].concat(i.clone(e)).concat([o]),l=c[c.length-2],u=o,h=(a=c.lastIndexOf(n.E_Modifier))||null!=a?a:0;if(h>1){var p=c.slice(1,h),g=!0;if(p.forEach((function(t){t!=n.Extend&&(g=!1)})),g&&-1==i.indexOf([n.Extend,n.E_Base,n.E_Base_GAZ],t))return n.Break}var d=(r=c.lastIndexOf(n.Regional_Indicator))||null!=r?r:0;if(d>0){p=c.slice(1,d);var f=!0;if(p.forEach((function(t){t!=n.Regional_Indicator&&(f=!1)})),f&&-1==i.indexOf([n.Prepend,n.Regional_Indicator],l))return c.filter((function(t){return t==n.Regional_Indicator}),this).length%2==1?n.BreakLastRegional:n.BreakPenultimateRegional}if(l==n.CR&&u==n.LF)return n.NotBreak;if(l==n.Control||l==n.CR||l==n.LF){var m=!0;return e.forEach((function(t){t!=n.Extend&&(m=!1)})),u==n.E_Modifier&&m?n.Break:n.BreakStart}if(u==n.Control||u==n.CR||u==n.LF)return n.BreakStart;if(l==n.L_Type&&(u==n.L_Type||u==n.V_Type||u==n.LV||u==n.LVT))return n.NotBreak;if(!(l!=n.LV&&l!=n.V_Type||u!=n.V_Type&&u!=n.T_Type))return n.NotBreak;if((l==n.LVT||l==n.T_Type)&&u==n.T_Type)return n.NotBreak;if(u==n.Extend||u==n.ZWJ)return n.NotBreak;if(u==n.SpacingMark)return n.NotBreak;if(l==n.Prepend)return n.NotBreak;var y=(s=c.lastIndexOf(n.Extend))||null!=s?s:0,R=null!=i.indexOf(c,n.Extend)?y-1:c.length-2;return-1!=i.indexOf([n.E_Base,n.E_Base_GAZ],c[R])&&u==n.E_Modifier&&(p=c.slice(R+1,c.length-1),g=!0,p.forEach((function(t){t!=n.Extend&&(g=!1)})),g)||l==n.ZWJ&&-1!=i.indexOf([n.Glue_After_Zwj,n.E_Base_GAZ],u)?n.NotBreak:-1!=i.indexOf(e,n.Regional_Indicator)?n.Break:l==n.Regional_Indicator&&u==n.Regional_Indicator?n.NotBreak:n.BreakStart},nextBreak:function(t,e){if(e<0)return 0;var o=i.utf16s(t).length;if(e>=o-1)return o;for(var a=n.getGraphemeBreakProperty(n.codePointAt(t,e)),r=[],s=i.iter(i.range(e+1,o,!1));!s.done;s.next()){var c=s.value;if(!n.isSurrogate(t,c-1)){var l=n.getGraphemeBreakProperty(n.codePointAt(t,c));if(n.shouldBreak(a,i.clone(r),l)!=n.NotBreak)return c;r.push(l)}}return o},splitGraphemes:function(t){for(var e=i.utf16s(t),o=[],a=0,r=n.nextBreak(t,a);r<e.length;){var s=e.slice(a,r);0==a&&8235==s[0]||o.push(i.toStringFromCharCodes(i.clone(s),s.length)),r=n.nextBreak(t,a=r)}if(a<e.length){var c=e.slice(a,e.length);0==a&&8235==c[0]||o.push(i.toStringFromCharCodes(i.clone(c),c.length))}return o},countGraphemes:function(t){var e=0,o=0,a=n.nextBreak(t,o),r=i.utf16s(t).length;if(r<1)return 0;for(8235==n.codePointAt(t,0)&&(e=-1);a<r;)e+=1,a=n.nextBreak(t,o=a);return o<r&&(e+=1),e},getGraphemeBreakProperty:function(t){return 1536<=t&&t<=1541||1757==t||1807==t||2274==t||3406==t||69821==t||70082<=t&&t<=70083||72250==t||72326<=t&&t<=72329||73030==t?n.Prepend:13==t?n.CR:10==t?n.LF:0<=t&&t<=9||11<=t&&t<=12||14<=t&&t<=31||127<=t&&t<=159||173==t||1564==t||6158==t||8203==t||8206<=t&&t<=8207||8232==t||8233==t||8234<=t&&t<=8238||8288<=t&&t<=8292||8293==t||8294<=t&&t<=8303||55296<=t&&t<=57343||65279==t||65520<=t&&t<=65528||65529<=t&&t<=65531||113824<=t&&t<=113827||119155<=t&&t<=119162||917504==t||917505==t||917506<=t&&t<=917535||917632<=t&&t<=917759||918e3<=t&&t<=921599?n.Control:768<=t&&t<=879||1155<=t&&t<=1159||1160<=t&&t<=1161||1425<=t&&t<=1469||1471==t||1473<=t&&t<=1474||1476<=t&&t<=1477||1479==t||1552<=t&&t<=1562||1611<=t&&t<=1631||1648==t||1750<=t&&t<=1756||1759<=t&&t<=1764||1767<=t&&t<=1768||1770<=t&&t<=1773||1809==t||1840<=t&&t<=1866||1958<=t&&t<=1968||2027<=t&&t<=2035||2070<=t&&t<=2073||2075<=t&&t<=2083||2085<=t&&t<=2087||2089<=t&&t<=2093||2137<=t&&t<=2139||2260<=t&&t<=2273||2275<=t&&t<=2306||2362==t||2364==t||2369<=t&&t<=2376||2381==t||2385<=t&&t<=2391||2402<=t&&t<=2403||2433==t||2492==t||2494==t||2497<=t&&t<=2500||2509==t||2519==t||2530<=t&&t<=2531||2561<=t&&t<=2562||2620==t||2625<=t&&t<=2626||2631<=t&&t<=2632||2635<=t&&t<=2637||2641==t||2672<=t&&t<=2673||2677==t||2689<=t&&t<=2690||2748==t||2753<=t&&t<=2757||2759<=t&&t<=2760||2765==t||2786<=t&&t<=2787||2810<=t&&t<=2815||2817==t||2876==t||2878==t||2879==t||2881<=t&&t<=2884||2893==t||2902==t||2903==t||2914<=t&&t<=2915||2946==t||3006==t||3008==t||3021==t||3031==t||3072==t||3134<=t&&t<=3136||3142<=t&&t<=3144||3146<=t&&t<=3149||3157<=t&&t<=3158||3170<=t&&t<=3171||3201==t||3260==t||3263==t||3266==t||3270==t||3276<=t&&t<=3277||3285<=t&&t<=3286||3298<=t&&t<=3299||3328<=t&&t<=3329||3387<=t&&t<=3388||3390==t||3393<=t&&t<=3396||3405==t||3415==t||3426<=t&&t<=3427||3530==t||3535==t||3538<=t&&t<=3540||3542==t||3551==t||3633==t||3636<=t&&t<=3642||3655<=t&&t<=3662||3761==t||3764<=t&&t<=3769||3771<=t&&t<=3772||3784<=t&&t<=3789||3864<=t&&t<=3865||3893==t||3895==t||3897==t||3953<=t&&t<=3966||3968<=t&&t<=3972||3974<=t&&t<=3975||3981<=t&&t<=3991||3993<=t&&t<=4028||4038==t||4141<=t&&t<=4144||4146<=t&&t<=4151||4153<=t&&t<=4154||4157<=t&&t<=4158||4184<=t&&t<=4185||4190<=t&&t<=4192||4209<=t&&t<=4212||4226==t||4229<=t&&t<=4230||4237==t||4253==t||4957<=t&&t<=4959||5906<=t&&t<=5908||5938<=t&&t<=5940||5970<=t&&t<=5971||6002<=t&&t<=6003||6068<=t&&t<=6069||6071<=t&&t<=6077||6086==t||6089<=t&&t<=6099||6109==t||6155<=t&&t<=6157||6277<=t&&t<=6278||6313==t||6432<=t&&t<=6434||6439<=t&&t<=6440||6450==t||6457<=t&&t<=6459||6679<=t&&t<=6680||6683==t||6742==t||6744<=t&&t<=6750||6752==t||6754==t||6757<=t&&t<=6764||6771<=t&&t<=6780||6783==t||6832<=t&&t<=6845||6846==t||6912<=t&&t<=6915||6964==t||6966<=t&&t<=6970||6972==t||6978==t||7019<=t&&t<=7027||7040<=t&&t<=7041||7074<=t&&t<=7077||7080<=t&&t<=7081||7083<=t&&t<=7085||7142==t||7144<=t&&t<=7145||7149==t||7151<=t&&t<=7153||7212<=t&&t<=7219||7222<=t&&t<=7223||7376<=t&&t<=7378||7380<=t&&t<=7392||7394<=t&&t<=7400||7405==t||7412==t||7416<=t&&t<=7417||7616<=t&&t<=7673||7675<=t&&t<=7679||8204==t||8400<=t&&t<=8412||8413<=t&&t<=8416||8417==t||8418<=t&&t<=8420||8421<=t&&t<=8432||11503<=t&&t<=11505||11647==t||11744<=t&&t<=11775||12330<=t&&t<=12333||12334<=t&&t<=12335||12441<=t&&t<=12442||42607==t||42608<=t&&t<=42610||42612<=t&&t<=42621||42654<=t&&t<=42655||42736<=t&&t<=42737||43010==t||43014==t||43019==t||43045<=t&&t<=43046||43204<=t&&t<=43205||43232<=t&&t<=43249||43302<=t&&t<=43309||43335<=t&&t<=43345||43392<=t&&t<=43394||43443==t||43446<=t&&t<=43449||43452==t||43493==t||43561<=t&&t<=43566||43569<=t&&t<=43570||43573<=t&&t<=43574||43587==t||43596==t||43644==t||43696==t||43698<=t&&t<=43700||43703<=t&&t<=43704||43710<=t&&t<=43711||43713==t||43756<=t&&t<=43757||43766==t||44005==t||44008==t||44013==t||64286==t||65024<=t&&t<=65039||65056<=t&&t<=65071||65438<=t&&t<=65439||66045==t||66272==t||66422<=t&&t<=66426||68097<=t&&t<=68099||68101<=t&&t<=68102||68108<=t&&t<=68111||68152<=t&&t<=68154||68159==t||68325<=t&&t<=68326||69633==t||69688<=t&&t<=69702||69759<=t&&t<=69761||69811<=t&&t<=69814||69817<=t&&t<=69818||69888<=t&&t<=69890||69927<=t&&t<=69931||69933<=t&&t<=69940||70003==t||70016<=t&&t<=70017||70070<=t&&t<=70078||70090<=t&&t<=70092||70191<=t&&t<=70193||70196==t||70198<=t&&t<=70199||70206==t||70367==t||70371<=t&&t<=70378||70400<=t&&t<=70401||70460==t||70462==t||70464==t||70487==t||70502<=t&&t<=70508||70512<=t&&t<=70516||70712<=t&&t<=70719||70722<=t&&t<=70724||70726==t||70832==t||70835<=t&&t<=70840||70842==t||70845==t||70847<=t&&t<=70848||70850<=t&&t<=70851||71087==t||71090<=t&&t<=71093||71100<=t&&t<=71101||71103<=t&&t<=71104||71132<=t&&t<=71133||71219<=t&&t<=71226||71229==t||71231<=t&&t<=71232||71339==t||71341==t||71344<=t&&t<=71349||71351==t||71453<=t&&t<=71455||71458<=t&&t<=71461||71463<=t&&t<=71467||72193<=t&&t<=72198||72201<=t&&t<=72202||72243<=t&&t<=72248||72251<=t&&t<=72254||72263==t||72273<=t&&t<=72278||72281<=t&&t<=72283||72330<=t&&t<=72342||72344<=t&&t<=72345||72752<=t&&t<=72758||72760<=t&&t<=72765||72767==t||72850<=t&&t<=72871||72874<=t&&t<=72880||72882<=t&&t<=72883||72885<=t&&t<=72886||73009<=t&&t<=73014||73018==t||73020<=t&&t<=73021||73023<=t&&t<=73029||73031==t||92912<=t&&t<=92916||92976<=t&&t<=92982||94095<=t&&t<=94098||113821<=t&&t<=113822||119141==t||119143<=t&&t<=119145||119150<=t&&t<=119154||119163<=t&&t<=119170||119173<=t&&t<=119179||119210<=t&&t<=119213||119362<=t&&t<=119364||121344<=t&&t<=121398||121403<=t&&t<=121452||121461==t||121476==t||121499<=t&&t<=121503||121505<=t&&t<=121519||122880<=t&&t<=122886||122888<=t&&t<=122904||122907<=t&&t<=122913||122915<=t&&t<=122916||122918<=t&&t<=122922||125136<=t&&t<=125142||125252<=t&&t<=125258||917536<=t&&t<=917631||917760<=t&&t<=917999?n.Extend:127462<=t&&t<=127487?n.Regional_Indicator:2307==t||2363==t||2366<=t&&t<=2368||2377<=t&&t<=2380||2382<=t&&t<=2383||2434<=t&&t<=2435||2495<=t&&t<=2496||2503<=t&&t<=2504||2507<=t&&t<=2508||2563==t||2622<=t&&t<=2624||2691==t||2750<=t&&t<=2752||2761==t||2763<=t&&t<=2764||2818<=t&&t<=2819||2880==t||2887<=t&&t<=2888||2891<=t&&t<=2892||3007==t||3009<=t&&t<=3010||3014<=t&&t<=3016||3018<=t&&t<=3020||3073<=t&&t<=3075||3137<=t&&t<=3140||3202<=t&&t<=3203||3262==t||3264<=t&&t<=3265||3267<=t&&t<=3268||3271<=t&&t<=3272||3274<=t&&t<=3275||3330<=t&&t<=3331||3391<=t&&t<=3392||3398<=t&&t<=3400||3402<=t&&t<=3404||3458<=t&&t<=3459||3536<=t&&t<=3537||3544<=t&&t<=3550||3570<=t&&t<=3571||3635==t||3763==t||3902<=t&&t<=3903||3967==t||4145==t||4155<=t&&t<=4156||4182<=t&&t<=4183||4228==t||6070==t||6078<=t&&t<=6085||6087<=t&&t<=6088||6435<=t&&t<=6438||6441<=t&&t<=6443||6448<=t&&t<=6449||6451<=t&&t<=6456||6681<=t&&t<=6682||6741==t||6743==t||6765<=t&&t<=6770||6916==t||6965==t||6971==t||6973<=t&&t<=6977||6979<=t&&t<=6980||7042==t||7073==t||7078<=t&&t<=7079||7082==t||7143==t||7146<=t&&t<=7148||7150==t||7154<=t&&t<=7155||7204<=t&&t<=7211||7220<=t&&t<=7221||7393==t||7410<=t&&t<=7411||7415==t||43043<=t&&t<=43044||43047==t||43136<=t&&t<=43137||43188<=t&&t<=43203||43346<=t&&t<=43347||43395==t||43444<=t&&t<=43445||43450<=t&&t<=43451||43453<=t&&t<=43456||43567<=t&&t<=43568||43571<=t&&t<=43572||43597==t||43755==t||43758<=t&&t<=43759||43765==t||44003<=t&&t<=44004||44006<=t&&t<=44007||44009<=t&&t<=44010||44012==t||69632==t||69634==t||69762==t||69808<=t&&t<=69810||69815<=t&&t<=69816||69932==t||70018==t||70067<=t&&t<=70069||70079<=t&&t<=70080||70188<=t&&t<=70190||70194<=t&&t<=70195||70197==t||70368<=t&&t<=70370||70402<=t&&t<=70403||70463==t||70465<=t&&t<=70468||70471<=t&&t<=70472||70475<=t&&t<=70477||70498<=t&&t<=70499||70709<=t&&t<=70711||70720<=t&&t<=70721||70725==t||70833<=t&&t<=70834||70841==t||70843<=t&&t<=70844||70846==t||70849==t||71088<=t&&t<=71089||71096<=t&&t<=71099||71102==t||71216<=t&&t<=71218||71227<=t&&t<=71228||71230==t||71340==t||71342<=t&&t<=71343||71350==t||71456<=t&&t<=71457||71462==t||72199<=t&&t<=72200||72249==t||72279<=t&&t<=72280||72343==t||72751==t||72766==t||72873==t||72881==t||72884==t||94033<=t&&t<=94078||119142==t||119149==t?n.SpacingMark:4352<=t&&t<=4447||43360<=t&&t<=43388?n.L_Type:4448<=t&&t<=4519||55216<=t&&t<=55238?n.V_Type:4520<=t&&t<=4607||55243<=t&&t<=55291?n.T_Type:44032==t||44060==t||44088==t||44116==t||44144==t||44172==t||44200==t||44228==t||44256==t||44284==t||44312==t||44340==t||44368==t||44396==t||44424==t||44452==t||44480==t||44508==t||44536==t||44564==t||44592==t||44620==t||44648==t||44676==t||44704==t||44732==t||44760==t||44788==t||44816==t||44844==t||44872==t||44900==t||44928==t||44956==t||44984==t||45012==t||45040==t||45068==t||45096==t||45124==t||45152==t||45180==t||45208==t||45236==t||45264==t||45292==t||45320==t||45348==t||45376==t||45404==t||45432==t||45460==t||45488==t||45516==t||45544==t||45572==t||45600==t||45628==t||45656==t||45684==t||45712==t||45740==t||45768==t||45796==t||45824==t||45852==t||45880==t||45908==t||45936==t||45964==t||45992==t||46020==t||46048==t||46076==t||46104==t||46132==t||46160==t||46188==t||46216==t||46244==t||46272==t||46300==t||46328==t||46356==t||46384==t||46412==t||46440==t||46468==t||46496==t||46524==t||46552==t||46580==t||46608==t||46636==t||46664==t||46692==t||46720==t||46748==t||46776==t||46804==t||46832==t||46860==t||46888==t||46916==t||46944==t||46972==t||47e3==t||47028==t||47056==t||47084==t||47112==t||47140==t||47168==t||47196==t||47224==t||47252==t||47280==t||47308==t||47336==t||47364==t||47392==t||47420==t||47448==t||47476==t||47504==t||47532==t||47560==t||47588==t||47616==t||47644==t||47672==t||47700==t||47728==t||47756==t||47784==t||47812==t||47840==t||47868==t||47896==t||47924==t||47952==t||47980==t||48008==t||48036==t||48064==t||48092==t||48120==t||48148==t||48176==t||48204==t||48232==t||48260==t||48288==t||48316==t||48344==t||48372==t||48400==t||48428==t||48456==t||48484==t||48512==t||48540==t||48568==t||48596==t||48624==t||48652==t||48680==t||48708==t||48736==t||48764==t||48792==t||48820==t||48848==t||48876==t||48904==t||48932==t||48960==t||48988==t||49016==t||49044==t||49072==t||49100==t||49128==t||49156==t||49184==t||49212==t||49240==t||49268==t||49296==t||49324==t||49352==t||49380==t||49408==t||49436==t||49464==t||49492==t||49520==t||49548==t||49576==t||49604==t||49632==t||49660==t||49688==t||49716==t||49744==t||49772==t||49800==t||49828==t||49856==t||49884==t||49912==t||49940==t||49968==t||49996==t||50024==t||50052==t||50080==t||50108==t||50136==t||50164==t||50192==t||50220==t||50248==t||50276==t||50304==t||50332==t||50360==t||50388==t||50416==t||50444==t||50472==t||50500==t||50528==t||50556==t||50584==t||50612==t||50640==t||50668==t||50696==t||50724==t||50752==t||50780==t||50808==t||50836==t||50864==t||50892==t||50920==t||50948==t||50976==t||51004==t||51032==t||51060==t||51088==t||51116==t||51144==t||51172==t||51200==t||51228==t||51256==t||51284==t||51312==t||51340==t||51368==t||51396==t||51424==t||51452==t||51480==t||51508==t||51536==t||51564==t||51592==t||51620==t||51648==t||51676==t||51704==t||51732==t||51760==t||51788==t||51816==t||51844==t||51872==t||51900==t||51928==t||51956==t||51984==t||52012==t||52040==t||52068==t||52096==t||52124==t||52152==t||52180==t||52208==t||52236==t||52264==t||52292==t||52320==t||52348==t||52376==t||52404==t||52432==t||52460==t||52488==t||52516==t||52544==t||52572==t||52600==t||52628==t||52656==t||52684==t||52712==t||52740==t||52768==t||52796==t||52824==t||52852==t||52880==t||52908==t||52936==t||52964==t||52992==t||53020==t||53048==t||53076==t||53104==t||53132==t||53160==t||53188==t||53216==t||53244==t||53272==t||53300==t||53328==t||53356==t||53384==t||53412==t||53440==t||53468==t||53496==t||53524==t||53552==t||53580==t||53608==t||53636==t||53664==t||53692==t||53720==t||53748==t||53776==t||53804==t||53832==t||53860==t||53888==t||53916==t||53944==t||53972==t||54e3==t||54028==t||54056==t||54084==t||54112==t||54140==t||54168==t||54196==t||54224==t||54252==t||54280==t||54308==t||54336==t||54364==t||54392==t||54420==t||54448==t||54476==t||54504==t||54532==t||54560==t||54588==t||54616==t||54644==t||54672==t||54700==t||54728==t||54756==t||54784==t||54812==t||54840==t||54868==t||54896==t||54924==t||54952==t||54980==t||55008==t||55036==t||55064==t||55092==t||55120==t||55148==t||55176==t?n.LV:44033<=t&&t<=44059||44061<=t&&t<=44087||44089<=t&&t<=44115||44117<=t&&t<=44143||44145<=t&&t<=44171||44173<=t&&t<=44199||44201<=t&&t<=44227||44229<=t&&t<=44255||44257<=t&&t<=44283||44285<=t&&t<=44311||44313<=t&&t<=44339||44341<=t&&t<=44367||44369<=t&&t<=44395||44397<=t&&t<=44423||44425<=t&&t<=44451||44453<=t&&t<=44479||44481<=t&&t<=44507||44509<=t&&t<=44535||44537<=t&&t<=44563||44565<=t&&t<=44591||44593<=t&&t<=44619||44621<=t&&t<=44647||44649<=t&&t<=44675||44677<=t&&t<=44703||44705<=t&&t<=44731||44733<=t&&t<=44759||44761<=t&&t<=44787||44789<=t&&t<=44815||44817<=t&&t<=44843||44845<=t&&t<=44871||44873<=t&&t<=44899||44901<=t&&t<=44927||44929<=t&&t<=44955||44957<=t&&t<=44983||44985<=t&&t<=45011||45013<=t&&t<=45039||45041<=t&&t<=45067||45069<=t&&t<=45095||45097<=t&&t<=45123||45125<=t&&t<=45151||45153<=t&&t<=45179||45181<=t&&t<=45207||45209<=t&&t<=45235||45237<=t&&t<=45263||45265<=t&&t<=45291||45293<=t&&t<=45319||45321<=t&&t<=45347||45349<=t&&t<=45375||45377<=t&&t<=45403||45405<=t&&t<=45431||45433<=t&&t<=45459||45461<=t&&t<=45487||45489<=t&&t<=45515||45517<=t&&t<=45543||45545<=t&&t<=45571||45573<=t&&t<=45599||45601<=t&&t<=45627||45629<=t&&t<=45655||45657<=t&&t<=45683||45685<=t&&t<=45711||45713<=t&&t<=45739||45741<=t&&t<=45767||45769<=t&&t<=45795||45797<=t&&t<=45823||45825<=t&&t<=45851||45853<=t&&t<=45879||45881<=t&&t<=45907||45909<=t&&t<=45935||45937<=t&&t<=45963||45965<=t&&t<=45991||45993<=t&&t<=46019||46021<=t&&t<=46047||46049<=t&&t<=46075||46077<=t&&t<=46103||46105<=t&&t<=46131||46133<=t&&t<=46159||46161<=t&&t<=46187||46189<=t&&t<=46215||46217<=t&&t<=46243||46245<=t&&t<=46271||46273<=t&&t<=46299||46301<=t&&t<=46327||46329<=t&&t<=46355||46357<=t&&t<=46383||46385<=t&&t<=46411||46413<=t&&t<=46439||46441<=t&&t<=46467||46469<=t&&t<=46495||46497<=t&&t<=46523||46525<=t&&t<=46551||46553<=t&&t<=46579||46581<=t&&t<=46607||46609<=t&&t<=46635||46637<=t&&t<=46663||46665<=t&&t<=46691||46693<=t&&t<=46719||46721<=t&&t<=46747||46749<=t&&t<=46775||46777<=t&&t<=46803||46805<=t&&t<=46831||46833<=t&&t<=46859||46861<=t&&t<=46887||46889<=t&&t<=46915||46917<=t&&t<=46943||46945<=t&&t<=46971||46973<=t&&t<=46999||47001<=t&&t<=47027||47029<=t&&t<=47055||47057<=t&&t<=47083||47085<=t&&t<=47111||47113<=t&&t<=47139||47141<=t&&t<=47167||47169<=t&&t<=47195||47197<=t&&t<=47223||47225<=t&&t<=47251||47253<=t&&t<=47279||47281<=t&&t<=47307||47309<=t&&t<=47335||47337<=t&&t<=47363||47365<=t&&t<=47391||47393<=t&&t<=47419||47421<=t&&t<=47447||47449<=t&&t<=47475||47477<=t&&t<=47503||47505<=t&&t<=47531||47533<=t&&t<=47559||47561<=t&&t<=47587||47589<=t&&t<=47615||47617<=t&&t<=47643||47645<=t&&t<=47671||47673<=t&&t<=47699||47701<=t&&t<=47727||47729<=t&&t<=47755||47757<=t&&t<=47783||47785<=t&&t<=47811||47813<=t&&t<=47839||47841<=t&&t<=47867||47869<=t&&t<=47895||47897<=t&&t<=47923||47925<=t&&t<=47951||47953<=t&&t<=47979||47981<=t&&t<=48007||48009<=t&&t<=48035||48037<=t&&t<=48063||48065<=t&&t<=48091||48093<=t&&t<=48119||48121<=t&&t<=48147||48149<=t&&t<=48175||48177<=t&&t<=48203||48205<=t&&t<=48231||48233<=t&&t<=48259||48261<=t&&t<=48287||48289<=t&&t<=48315||48317<=t&&t<=48343||48345<=t&&t<=48371||48373<=t&&t<=48399||48401<=t&&t<=48427||48429<=t&&t<=48455||48457<=t&&t<=48483||48485<=t&&t<=48511||48513<=t&&t<=48539||48541<=t&&t<=48567||48569<=t&&t<=48595||48597<=t&&t<=48623||48625<=t&&t<=48651||48653<=t&&t<=48679||48681<=t&&t<=48707||48709<=t&&t<=48735||48737<=t&&t<=48763||48765<=t&&t<=48791||48793<=t&&t<=48819||48821<=t&&t<=48847||48849<=t&&t<=48875||48877<=t&&t<=48903||48905<=t&&t<=48931||48933<=t&&t<=48959||48961<=t&&t<=48987||48989<=t&&t<=49015||49017<=t&&t<=49043||49045<=t&&t<=49071||49073<=t&&t<=49099||49101<=t&&t<=49127||49129<=t&&t<=49155||49157<=t&&t<=49183||49185<=t&&t<=49211||49213<=t&&t<=49239||49241<=t&&t<=49267||49269<=t&&t<=49295||49297<=t&&t<=49323||49325<=t&&t<=49351||49353<=t&&t<=49379||49381<=t&&t<=49407||49409<=t&&t<=49435||49437<=t&&t<=49463||49465<=t&&t<=49491||49493<=t&&t<=49519||49521<=t&&t<=49547||49549<=t&&t<=49575||49577<=t&&t<=49603||49605<=t&&t<=49631||49633<=t&&t<=49659||49661<=t&&t<=49687||49689<=t&&t<=49715||49717<=t&&t<=49743||49745<=t&&t<=49771||49773<=t&&t<=49799||49801<=t&&t<=49827||49829<=t&&t<=49855||49857<=t&&t<=49883||49885<=t&&t<=49911||49913<=t&&t<=49939||49941<=t&&t<=49967||49969<=t&&t<=49995||49997<=t&&t<=50023||50025<=t&&t<=50051||50053<=t&&t<=50079||50081<=t&&t<=50107||50109<=t&&t<=50135||50137<=t&&t<=50163||50165<=t&&t<=50191||50193<=t&&t<=50219||50221<=t&&t<=50247||50249<=t&&t<=50275||50277<=t&&t<=50303||50305<=t&&t<=50331||50333<=t&&t<=50359||50361<=t&&t<=50387||50389<=t&&t<=50415||50417<=t&&t<=50443||50445<=t&&t<=50471||50473<=t&&t<=50499||50501<=t&&t<=50527||50529<=t&&t<=50555||50557<=t&&t<=50583||50585<=t&&t<=50611||50613<=t&&t<=50639||50641<=t&&t<=50667||50669<=t&&t<=50695||50697<=t&&t<=50723||50725<=t&&t<=50751||50753<=t&&t<=50779||50781<=t&&t<=50807||50809<=t&&t<=50835||50837<=t&&t<=50863||50865<=t&&t<=50891||50893<=t&&t<=50919||50921<=t&&t<=50947||50949<=t&&t<=50975||50977<=t&&t<=51003||51005<=t&&t<=51031||51033<=t&&t<=51059||51061<=t&&t<=51087||51089<=t&&t<=51115||51117<=t&&t<=51143||51145<=t&&t<=51171||51173<=t&&t<=51199||51201<=t&&t<=51227||51229<=t&&t<=51255||51257<=t&&t<=51283||51285<=t&&t<=51311||51313<=t&&t<=51339||51341<=t&&t<=51367||51369<=t&&t<=51395||51397<=t&&t<=51423||51425<=t&&t<=51451||51453<=t&&t<=51479||51481<=t&&t<=51507||51509<=t&&t<=51535||51537<=t&&t<=51563||51565<=t&&t<=51591||51593<=t&&t<=51619||51621<=t&&t<=51647||51649<=t&&t<=51675||51677<=t&&t<=51703||51705<=t&&t<=51731||51733<=t&&t<=51759||51761<=t&&t<=51787||51789<=t&&t<=51815||51817<=t&&t<=51843||51845<=t&&t<=51871||51873<=t&&t<=51899||51901<=t&&t<=51927||51929<=t&&t<=51955||51957<=t&&t<=51983||51985<=t&&t<=52011||52013<=t&&t<=52039||52041<=t&&t<=52067||52069<=t&&t<=52095||52097<=t&&t<=52123||52125<=t&&t<=52151||52153<=t&&t<=52179||52181<=t&&t<=52207||52209<=t&&t<=52235||52237<=t&&t<=52263||52265<=t&&t<=52291||52293<=t&&t<=52319||52321<=t&&t<=52347||52349<=t&&t<=52375||52377<=t&&t<=52403||52405<=t&&t<=52431||52433<=t&&t<=52459||52461<=t&&t<=52487||52489<=t&&t<=52515||52517<=t&&t<=52543||52545<=t&&t<=52571||52573<=t&&t<=52599||52601<=t&&t<=52627||52629<=t&&t<=52655||52657<=t&&t<=52683||52685<=t&&t<=52711||52713<=t&&t<=52739||52741<=t&&t<=52767||52769<=t&&t<=52795||52797<=t&&t<=52823||52825<=t&&t<=52851||52853<=t&&t<=52879||52881<=t&&t<=52907||52909<=t&&t<=52935||52937<=t&&t<=52963||52965<=t&&t<=52991||52993<=t&&t<=53019||53021<=t&&t<=53047||53049<=t&&t<=53075||53077<=t&&t<=53103||53105<=t&&t<=53131||53133<=t&&t<=53159||53161<=t&&t<=53187||53189<=t&&t<=53215||53217<=t&&t<=53243||53245<=t&&t<=53271||53273<=t&&t<=53299||53301<=t&&t<=53327||53329<=t&&t<=53355||53357<=t&&t<=53383||53385<=t&&t<=53411||53413<=t&&t<=53439||53441<=t&&t<=53467||53469<=t&&t<=53495||53497<=t&&t<=53523||53525<=t&&t<=53551||53553<=t&&t<=53579||53581<=t&&t<=53607||53609<=t&&t<=53635||53637<=t&&t<=53663||53665<=t&&t<=53691||53693<=t&&t<=53719||53721<=t&&t<=53747||53749<=t&&t<=53775||53777<=t&&t<=53803||53805<=t&&t<=53831||53833<=t&&t<=53859||53861<=t&&t<=53887||53889<=t&&t<=53915||53917<=t&&t<=53943||53945<=t&&t<=53971||53973<=t&&t<=53999||54001<=t&&t<=54027||54029<=t&&t<=54055||54057<=t&&t<=54083||54085<=t&&t<=54111||54113<=t&&t<=54139||54141<=t&&t<=54167||54169<=t&&t<=54195||54197<=t&&t<=54223||54225<=t&&t<=54251||54253<=t&&t<=54279||54281<=t&&t<=54307||54309<=t&&t<=54335||54337<=t&&t<=54363||54365<=t&&t<=54391||54393<=t&&t<=54419||54421<=t&&t<=54447||54449<=t&&t<=54475||54477<=t&&t<=54503||54505<=t&&t<=54531||54533<=t&&t<=54559||54561<=t&&t<=54587||54589<=t&&t<=54615||54617<=t&&t<=54643||54645<=t&&t<=54671||54673<=t&&t<=54699||54701<=t&&t<=54727||54729<=t&&t<=54755||54757<=t&&t<=54783||54785<=t&&t<=54811||54813<=t&&t<=54839||54841<=t&&t<=54867||54869<=t&&t<=54895||54897<=t&&t<=54923||54925<=t&&t<=54951||54953<=t&&t<=54979||54981<=t&&t<=55007||55009<=t&&t<=55035||55037<=t&&t<=55063||55065<=t&&t<=55091||55093<=t&&t<=55119||55121<=t&&t<=55147||55149<=t&&t<=55175||55177<=t&&t<=55203?n.LVT:9757==t||9977==t||9994<=t&&t<=9997||127877==t||127938<=t&&t<=127940||127943==t||127946<=t&&t<=127948||128066<=t&&t<=128067||128070<=t&&t<=128080||128110==t||128112<=t&&t<=128120||128124==t||128129<=t&&t<=128131||128133<=t&&t<=128135||128170==t||128372<=t&&t<=128373||128378==t||128400==t||128405<=t&&t<=128406||128581<=t&&t<=128583||128587<=t&&t<=128591||128675==t||128692<=t&&t<=128694||128704==t||128716==t||129304<=t&&t<=129308||129310<=t&&t<=129311||129318==t||129328<=t&&t<=129337||129341<=t&&t<=129342||129489<=t&&t<=129501?n.E_Base:127995<=t&&t<=127999?n.E_Modifier:8205==t?n.ZWJ:9792==t||9794==t||9877<=t&&t<=9878||9992==t||10084==t||127752==t||127806==t||127859==t||127891==t||127908==t||127912==t||127979==t||127981==t||128139==t||128187<=t&&t<=128188||128295==t||128300==t||128488==t||128640==t||128658==t?n.Glue_After_Zwj:128102<=t&&t<=128105?n.E_Base_GAZ:n.Other}}}),n)},"8/a0":function(t,e,o){var n,a=e,i=o("oAGj"),r=o("fNpk"),s=o("JgVS"),c=o("cEEQ"),l=o("c+uM"),u=o("tGKA"),h=o("hgLm"),p=o("oKlP"),g=o("sIWg"),d=o("1NAc");a.BannerDecorationStrategy=(n=function(){this.spacingScalar=.75,s.BaseDecorationStrategy.call(this)},i.defineClass({name:"BannerDecorationStrategy",ctor:n,superName:"BaseDecorationStrategy",statics:{_implements:function(t){return"LockupDecorationStrategy"==t}},props:{easeOutQuad:function(t,e,o,n){var a=t/n;return-o*a*(a-2)+e},easeOut:function(t,e,o){return this.easeOutQuad(o,t,e-t,1)},supportsConfiguration:function(t){return t.style.backing==l.LockupBacking.Banner},decorate:function(t,e){function o(t,e){return new p.TheoPoint(t,e)}var n=t.style,a=n.padding;e.numberOfLines>1&&(a+=n.spacing*this.spacingScalar);var f=e.avgTextPointSize*a,m=[],y=g.TheoRect.fromSize(e.size).transform(e.placement),R=!1;t.style.backing==l.LockupBacking.BannerHorizontal?R=!1:t.style.backing==l.LockupBacking.BannerVertical?R=!0:r.LegacyCoreAssert.fail("Invalid backing shape.",void 0,"BannerDecorationStrategy.decorate","BannerDecorationStrategy.swift",99);var S=s.BaseDecorationStrategy.getHorizontalOffsetForItalicAngle(e.avgLinePointSize*e.typographicBoundingRatios.heightFromBaselineRatio,t.style.font.fontData.italicAngle),v=e.typographicBoundingRatios.backingVerticalOffsetRatio*e.avgLinePointSize,w=this.easeOut(0,v,Math.min(1,a)),L=R?y.minX-f:-4093,k=R?-4093:y.minY-f+w,A=h.TheoPathBuilder.init_d41d(),C=S+(R?y.size.width+2*f:8186),x=R?8186:y.size.height+2*f,T=new d.TheoSize(C,x),I=u.Matrix2D.translationXY(L,k),B=function(t,e,n){var a=h.TheoPathBuilder.init_d41d(),r=e.transformPoint(t.eval(o(0,0)));a.moveTo(r.x,r.y);var s=new g.TheoRect(r.x,r.y,r.x,r.y);if(n)for(var c=i.iter([o(0,1),o(1,1),o(1,0)]);!c.done;c.next()){var l=c.value;r=e.transformPoint(t.eval(l)),a.lineTo(r.x,r.y),s=s.expandToFit(r)}else for(var u=i.iter([o(1,0),o(1,1),o(0,1)]);!u.done;u.next())l=u.value,r=e.transformPoint(t.eval(l)),a.lineTo(r.x,r.y),s=s.expandToFit(r);return a.closePath(),{path:a.path,bounds:s}}(g.TheoRect.fromSize(T),u.Matrix2D.Identity,!0).path;A.addPath(B,e.placement);var D=A.path,z=new d.TheoSize(i.opt(D.bounds,(function(t){return t.width})),i.opt(D.bounds,(function(t){return t.height})));return m.push(c.LockupItem.init_708e(!1,z,I,D)),new s.DecorationResults(i.clone(m))}}}),n)},JEnV:function(t,e,o){var n,a,i,r=e,s=o("oAGj"),c=o("fNpk"),l=o("cEEQ"),u=o("9kak"),h=o("c+uM"),p=o("GFAD"),g=o("tGKA"),d=o("8t9B"),f=o("3UhB"),m=o("uUew"),y=o("1NAc");r.paddingScalar=.6,r.spacingScalar=.75,r.EvenRowHeightsLayoutStrategy=(n=function(t,e){void 0===e&&(e=!1),t==h.LockupAlignment.Left||t==h.LockupAlignment.Right||t==h.LockupAlignment.Center?this.alignment=t:(c.LegacyCoreAssert.fail("Unexpected alignment",{alignment:t},"EvenRowHeightsLayoutStrategy.init","EvenRowHeightsLayoutStrategy.swift",30),this.alignment=h.LockupAlignment.Left),this.capToTargetAspectRatio=e},s.defineClass({name:"EvenRowHeightsLayoutStrategy",ctor:n,superName:"BaseLockupLayoutStrategy",statics:{calcNonCombiningItemCount:function(t,e,o){return e>20||t>300&&o>5?0:6},canCombineItemPair:function(t,e,o,n,a,i,r){var c,l,u;if((c=t.font)&&null!=(l=t.pointSize)&&null!=(u=e.spaceWidth)){var h=c.spaceWidthRatio*l,p=Math.abs(h-u)<.001||0==u,g=s.toInt(r/2);return p&&o&&!n&&t.characterStyle==e.characterStyle&&t.placement.ty==e.placement.ty&&a>g&&a<i-g}return!1},isFirstWordHighlighted:function(t){var e=t.highlightMethod;return e==d.HighlightMethod.EvenRows||e==d.HighlightMethod.Bracket||e==d.HighlightMethod.Manual&&s.opt(s.first(t.characterStyleRanges),(function(t){return 0==t.start}))},isAutoHighlightMethod:function(t){return t==d.HighlightMethod.EvenRows||t==d.HighlightMethod.OddRows||t==d.HighlightMethod.Bracket||t==d.HighlightMethod.InsideBracket},useCharStyleForAutoMethod:function(t,e,o){var n=t%2==(o==d.HighlightMethod.EvenRows?0:1);return o!=d.HighlightMethod.Bracket&&o!=d.HighlightMethod.InsideBracket||(n=0==t||e?o==d.HighlightMethod.Bracket:o==d.HighlightMethod.InsideBracket),n},usesVariableCharacterSizes:function(t){var e,o=t.style;return!(0!=!t.characterStyleRanges.length||!(e=o.characterStyles[d.TypeLockupController.HIGHLIGHT_STYLE])||-1==e.spacing||0==e.spacing)},_implements:function(t){return"LockupLayoutStrategy"==t}},props:{supportsConfiguration:function(t){return t.style.layout==h.LockupLayout.Standard&&t.style.alignment==this.alignment},layout:function(t){var e=t.text,o=t.style,a=o.font.fontData,i=o.spacing*r.spacingScalar,c=l.getTypographicBoundingRatiosOfString(e,a,!1),h=d.TypeLockupController.HIGHLIGHT_STYLE,p=s.opt(s.opt(o.characterStyles[h],(function(t){return t.font})),(function(t){return t.fontData})),m=f.TypeLockupUtils.getCharFontAdjust(o,c.hasUppercase),R=!1,S=n.usesVariableCharacterSizes(t);S&&o.characterStyles[h].spacing>1&&((o=t.style.clone()).characterStyles[h].spacing=m,R=!0,null!=p&&(p=a,a=o.characterStyles[h].font.fontData,o.characterStyles[h].font=o.font));var v,w,L,k=t;if(null!=(v=t.preferredFontSize)&&n.isFirstWordHighlighted(t)&&1!=m&&((k=t.clone()).preferredFontSize=v/m),(w=(L=k.expansionSize)?this.getLayoutForFlexibleWidth(k,L,i,c):this.getLayoutForFixedWidth(k,i,c))===u.LockupRowsInfo.EMPTY)return new l.LayoutResults([],new y.TheoSize(0,0),g.Matrix2D.Identity,c,0);for(var A=s.clone(w.rows),C=w.widestRow,x=w.averageRowHeight,T=w.primaryFontSize,I=w.height,B=w.width,D=B/(C.aspectRatio/i),z=T*m,M=T*a.capRatio,F=T*c.textVerticalOffsetRatio-M,b=f.TypeLockupUtils.getCharFontYAdjust(o,T,z),W=F,H=0,E=[],O=0,_=s.iter(s.range(0,A.length,!1));!_.done;_.next()){var G=_.value,P=A[G],U=n.calcNonCombiningItemCount(e.length,P.words.length,A.length);if(O=T,S){for(var N=!0,V=s.iter(P.words);!V.done;V.next()){var j=V.value;if(s.isEmpty(j.characterStyle)||T==z){N=!1;break}}O=N?z:T}G>0&&(W+=D);var Y=P.aspectRatio*x;switch(this.alignment){case 0:H=0;break;case 1:H=B-Y+0;break;case 2:H=0+(B-Y)/2}for(var X=0,Z=0,J=s.iter(P.words);!J.done;J.next()){j=J.value;var q=s.isEmpty(j.characterStyle)||O==z?0:b,K=s.isEmpty(j.characterStyle)?T:z,Q=j.aspectRatio*x,$=H,tt=W+0+q,et=s.isEmpty(j.characterStyle)?null:j.characterStyle;R&&(et=s.isEmpty(j.characterStyle)?h:null),X=j.spaceAspectRatio*x;var ot,nt=null;null!=(ot=j.complementaryStyleAspectRatio)&&(nt=ot*x);var at,it=null;null!=(at=j.complementaryStyleSpaceAspectRatio)&&(it=at*x);var rt,st=l.LockupItem.init_38d4(!0,et,new y.TheoSize(Q,M),g.Matrix2D.translationXY($,tt),j.text,s.isEmpty(j.characterStyle)?a:p||a,K,T,c,G,j.rangeInLockup,void 0,X,nt,it);(rt=s.last(E))&&(rt.canAppendNext=n.canCombineItemPair(rt,st,k.useOptimization,k.forceLetterForma,Z,P.words.length,U)),E.push(st),Z+=1,H+=Q+X}W+=O*c.heightRatio}return new l.LayoutResults(s.clone(E),new y.TheoSize(B,I),g.Matrix2D.translationXY(0,0),c,C.aspectRatio)},getLayoutForFixedWidth:function(t,e,o){var n=t.containerSize.height,a=t.containerSize.width,i=a/n,r=s.clone(this.getCompactedRows(t,i,t.highlightMethod,this.capToTargetAspectRatio||null!=t.preferredFontSize,o));if(0==r.length)return u.LockupRowsInfo.EMPTY;var c,l,h,p=this.getAspectRatioOfAllRows(s.clone(r),e),g=this.getWidestRowAspectRatio(s.clone(r));return 0==g.aspectRatio?u.LockupRowsInfo.EMPTY:(null!=(h=t.preferredFontSize)?n=(a=(l=(c=h)*o.heightRatio)*g.aspectRatio)/p:(p<i?a=n*p:n=a/p,c=(l=a/g.aspectRatio)/o.heightRatio),new u.LockupRowsInfo(s.clone(r),g,c,l,a,n))},getLayoutForFlexibleWidth:function(t,e,o,n){var a=t.containerSize,i=a.width,r=a.height,s=Math.max(e.height,r),c=Math.max(e.width,i),l=i,h=l,p=t.clone();p.containerSize=new y.TheoSize(h,r);for(var g=u.LockupRowsInfo.EMPTY,d=0;d<12;){var f=this.getLayoutForFixedWidth(p,o,n);if(f===u.LockupRowsInfo.EMPTY)break;if(h==l){if(f.height<=s||c-l<5){g=f;break}h=c}else if(h==c){if(f.height>s){g=f;break}h=(c+l)/2}else{if(f.height>s?l=h:(g=f,c=h),c-l<5)break;h=(c+l)/2}p.containerSize=new y.TheoSize(h,r),d+=1}return g},calculateTracking:function(t,e){var o=t.text,n=t.style.font.fontData,a=t.containerSize.width,i=t.style.spacing*r.spacingScalar,c=l.getTypographicBoundingRatiosOfString(o,n,!1),u=0,h=e.width,p=e.height,g=h/p,d=s.clone(this.getCompactedRows(t,g,t.highlightMethod,!1,c,!0));if(0==d.length)return t.style.tracking;if(t.style.tracking>0)for(var f=s.iter(s.range(0,d.length,!1));!f.done;f.next()){var m=f.value;d[m].aspectRatio=0;for(var y=s.iter(s.range(0,d[m].words.length,!1));!y.done;y.next()){var R=y.value;d[m].aspectRatio+=d[m].words[R].aspectRatio,d[m].words[R].canBreak&&R!=d[m].words.length-1?(d[m].words[R].spaceAspectRatio=n.spaceWidthRatio/c.heightRatio,d[m].aspectRatio+=d[m].words[R].spaceAspectRatio):d[m].words[R].spaceAspectRatio=0}}var S=this.getAspectRatioOfAllRows(s.clone(d),i),v=this.getWidestRowAspectRatio(s.clone(d)),w=v.aspectRatio;if(0==w)return t.style.tracking;var L=(h=p*S)/w,k=w*L;if(k<a){u=this.getSpacing(s.clone(d),v,L,a,!1).letterSpacing;for(var A=s.iter(d);!A.done;A.next()){var C=A.value;if(C.words.length>1){var x=this.getSpacing(s.clone(d),C,L,a,!1);x.letterSpacing<u&&(u=x.letterSpacing)}}(u/=L/c.heightRatio)<.01&&(u=0)}else u=-k;return u},calculateLeading:function(t,e){var o=t.containerSize,n=o.width,a=o.height,i=0,c=e.width,u=e.height,h=c/u,p=l.getTypographicBoundingRatiosOfString(t.text,t.style.font.fontData,!1),g=s.clone(this.getCompactedRows(t,h,t.highlightMethod,!1,p));if(g.length<=1)return t.style.spacing;var d=this.getAspectRatioOfAllRows(s.clone(g),i),f=this.getWidestRowAspectRatio(s.clone(g));u=c/d;var m=c/f.aspectRatio,y=f.aspectRatio*m;if(u<a){var R=n/((a-u)/(s.toDouble(g.length)-1));i=f.aspectRatio/R/r.spacingScalar}else s.info("fits in width. old tracking is :",t.style.tracking,y,"CW:",n,a,c,u),i=-u;return i},getSpacing:function(t,e,o,n,a){var i=0,r=0,c=0,l=0;if(e.words.length<=1)return{letterSpacing:c,wordSpacing:l};for(var u=s.iter(e.words);!u.done;u.next()){var h=u.value;i+=h.aspectRatio*o+h.spaceAspectRatio*o,0!=h.spaceAspectRatio&&h.canBreak&&(r+=1)}return i-=s.last(e.words).spaceAspectRatio*o,a?l=(n-i)/(s.toDouble(r)-1):(c=(n-i)/(s.toDouble(e.words.length)-1),r>1&&c>0&&(c=(n-i-(l=c)*(s.toDouble(r)-1))/(s.toDouble(e.words.length)-1))),{letterSpacing:c,wordSpacing:l}},getWidestRowAspectRatio:function(t){for(var e=t[0],o=s.iter(t);!o.done;o.next()){var n=o.value;n.aspectRatio>e.aspectRatio&&(e=n)}return e},getAspectRatioOfAllRows:function(t,e){var o=t.length-1,n=this.getWidestRowAspectRatio(s.clone(t));if(0==n.aspectRatio)return 0;for(var a=n.aspectRatio/e,i=0,r=s.iter(t);!r.done;r.next()){var c=r.value;i+=1/n.aspectRatio*c.rowHeightAdjustRatio}return 1/(i+1/a*s.toDouble(o))},rowsForTargetRowAspectRatio:function(t,e,o,n){var a=[];a.push(new u.LockupRowInfo);for(var i=0,r=0,s=!0,c=t.length,l=0;l<c;){var h=a[i],g=t[l];if(g.isNewLine)h.appendable=!1,a[i]=h,l+=1;else{for(var d=h.aspectRatio,f=g.aspectRatio+g.spaceAspectRatio,m=l;m+1<c&&!t[m].canBreak;)f+=t[m+=1].aspectRatio+t[m].spaceAspectRatio;var y=l>0&&t[l-1].canBreak,R=h.appendable&&(s||!y);if(R&&r>0){var S=d+f;if(n&&S>e)R=!1;else{var v=p.LockupUtils.percentageDiff(e,d);R=p.LockupUtils.percentageDiff(e,S)<v}}if(R){if(!o)for(;!g.canBreak&&l<c;)h.addWord(g),(l+=1)<c&&(g=t[l]);h.addWord(g),r+=1,a[i]=h}else{i+=1,r=1;var w=new u.LockupRowInfo;if(o)s=!(l>0&&!t[l-1].canBreak);else for(;!g.canBreak&&l<c;)w.addWord(g),(l+=1)<c&&(g=t[l]);w.addWord(g),a.push(w)}l+=1}}return a},getCompactedRows:function(t,e,o,a,i,c){void 0===c&&(c=!1);var l=t.text,h=t.style,p=h.font.fontData,g=h.spacing*r.spacingScalar,y=h.tracking,R=c||t.forceLetterForma,S=s.clone(t.characterStyleRanges),v=d.TypeLockupController.HIGHLIGHT_STYLE,w=s.opt(s.opt(h.characterStyles[v],(function(t){return t.font})),(function(t){return t.fontData})),L=f.TypeLockupUtils.getCharFontAdjust(h,i.hasUppercase);t.characterStyleRanges.length>0&&null!=h.characterStyles[v]&&-1!=h.characterStyles[v].spacing&&0!=h.characterStyles[v].spacing&&h.characterStyles[v].spacing>1&&((h=t.style.clone()).characterStyles[v].spacing=L,S=s.clone(f.TypeLockupUtils.invertRanges(s.clone(t.characterStyleRanges),l.length)),null!=w&&(w=p,p=h.characterStyles[v].font.fontData,h.characterStyles[v].font=h.font));var k=s.clone(f.TypeLockupUtils.computeLockupMeasurements(l,p,i.heightRatio,!1,R,y,s.clone(S),s.clone(h.characterStyles),L,t.forceLetterForma)),A=k.length;if(0==A)return[];var C,x=new u.LockupRowInfo(s.clone(k)).aspectRatio,T=.5,I=.6+1.6*x;if(null!=(C=t.preferredFontSize)){var B=C*i.heightRatio,D=t.containerSize.width/B;T=D,I=D}for(var z=s.clone(this.getOptimalCompactedRows(s.clone(k),x,e,g,T,I,!1,a)),M=0,F=s.iter(k);!F.done;F.next())M+=F.value.isNewLine?0:1;if(null!=t.rowWordLengths&&t.rowWordLengths.reduce((function(t,e){return t+e}),0)==M&&(!t.allowFewerLineBreaks||z.length>=t.rowWordLengths.length)&&(z=s.clone(this.getPrecomputedRows(s.clone(k),s.clone(t.rowWordLengths)))),null!=h.characterStyles[v]&&null!=h.characterStyles[v].font&&(A>1&&!R||R&&z.length>1)&&n.isAutoHighlightMethod(o)){var b=s.clone(f.TypeLockupUtils.computeLockupMeasurements(l,p,i.heightRatio,!1,R,y,s.clone([]),s.clone({}),void 0,t.forceLetterForma)),W=[new m.TextRange(0,s.chars(l).length)],H=s.clone(f.TypeLockupUtils.computeLockupMeasurements(l,w,i.heightRatio,!1,R,y,s.clone(W),s.clone(h.characterStyles),L,t.forceLetterForma));z=s.clone(this.getOptimalCompactedAutoRows(s.clone(b),s.clone(H),x,e,g,T,I,!1,this.capToTargetAspectRatio||null!=t.preferredFontSize,o))}return z},getOptimalCompactedRows:function(t,e,o,n,a,i,r,c){var l=i-a,u=.25*l,h=a+.5*l,g=a+u,d=i-u,f=s.clone(this.rowsForTargetRowAspectRatio(s.clone(t),g,r,c));if(a==i)return f;var m=s.clone(this.rowsForTargetRowAspectRatio(s.clone(t),d,r,c)),y=this.getAspectRatioOfAllRows(s.clone(f),n),R=this.getAspectRatioOfAllRows(s.clone(m),n),S=p.LockupUtils.percentageDiff(o,y),v=p.LockupUtils.percentageDiff(o,R);return l<.2?S<v?f:m:S<=v?this.getOptimalCompactedRows(s.clone(t),e,o,n,a,h,r,c):this.getOptimalCompactedRows(s.clone(t),e,o,n,h,i,r,c)},getWordForAutoMethod:function(t,e,o,a,i){var r=n.useCharStyleForAutoMethod(o,a,i),s=r?e:t,c=r?t:e;return s.complementaryStyleAspectRatio=c.aspectRatio,s.complementaryStyleSpaceAspectRatio=c.spaceAspectRatio,s},rowsForTargetRowAspectRatioAutoRows:function(t,e,o,n,a,i,r){var c=[];c.push(new u.LockupRowInfo);for(var l=0,h=0,g=!0,f=t.length,m=0,y=0;m<f;){var R=c[l],S=this.getWordForAutoMethod(t[m],e[m],l,m==f-1,r);if(S.isNewLine)R.appendable=!1,c[l]=R,m+=1;else{for(var v=R.aspectRatio,w=S.aspectRatio+S.spaceAspectRatio,L=m;L+1<f&&!t[L].canBreak;)w+=t[L+=1].aspectRatio+t[L].spaceAspectRatio;var k=m>0&&t[m-1].canBreak,A=R.appendable&&(g||!k);if(A&&h>0){var C=v+w;if(i&&C>n)A=!1;else{var x=p.LockupUtils.percentageDiff(n,v);A=p.LockupUtils.percentageDiff(n,C)<x}}if(A){if(!a)for(;!S.canBreak&&m<f;)R.addWord(S),(m+=1)<f&&(S=this.getWordForAutoMethod(t[m],e[m],l,m==f-1,r));R.addWord(S),h+=1,c[l]=R}else{l+=1,y=m,S=this.getWordForAutoMethod(t[m],e[m],l,m==f-1,r),h=1;var T=new u.LockupRowInfo;if(a)g=!(m>0&&!t[m-1].canBreak);else for(;!S.canBreak&&m<f;)T.addWord(S),(m+=1)<f&&(S=this.getWordForAutoMethod(t[m],e[m],l,m==f-1,r));T.addWord(S),c.push(T)}m+=1}}if(r==d.HighlightMethod.Bracket||r==d.HighlightMethod.InsideBracket){for(var I,B,D=new u.LockupRowInfo,z=s.iter(s.range(y,f,!1));!z.done;z.next()){m=z.value;var M=this.getWordForAutoMethod(t[m],e[m],l,!0,r);D.addWord(M)}i&&D.aspectRatio>n?(I=s.last(c))&&(B=I.removeLastWord())&&((D=new u.LockupRowInfo).addWord(B),c.push(D)):c[c.length-1]=D}return c},getOptimalCompactedAutoRows:function(t,e,o,n,a,i,r,l,u,h){c.LegacyCoreAssert.isTrue(t.length==e.length,"application of char style to entire range should not change word count",void 0,"EvenRowHeightsLayoutStrategy.getOptimalCompactedAutoRows","EvenRowHeightsLayoutStrategy.swift",1051);var g=r-i,d=.25*g,f=i+.5*g,m=i+d,y=r-d,R=s.clone(this.rowsForTargetRowAspectRatioAutoRows(s.clone(t),s.clone(e),a,m,l,u,h));if(i==r)return R;var S=s.clone(this.rowsForTargetRowAspectRatioAutoRows(s.clone(t),s.clone(e),a,y,l,u,h)),v=this.getAspectRatioOfAllRows(s.clone(R),a),w=this.getAspectRatioOfAllRows(s.clone(S),a),L=p.LockupUtils.percentageDiff(n,v),k=p.LockupUtils.percentageDiff(n,w);return g<.2?L<k?R:S:L<=k?this.getOptimalCompactedAutoRows(s.clone(t),s.clone(e),o,n,a,i,f,l,u,h):this.getOptimalCompactedAutoRows(s.clone(t),s.clone(e),o,n,a,f,r,l,u,h)},reflow:function(t,e,o,a){if(s.opt(e,(function(t){return.5!=t.y})))return null;if(n.usesVariableCharacterSizes(o))return null;var i,c,l,u=o.style,h=s.clone(a.itemsForReflow);if((i=s.opt(u.font,(function(t){return t.fontData})))&&(c=s.first(h))&&null!=(l=c.rowPointSize)){var p=o.text;return f.TypeLockupUtils.isTextRightToLeft(p)&&(h=s.reverse(h)),new r.ReflowHelper(this.alignment,p,o.highlightMethod,u,i,a.typographicBoundingRatios,t.width,s.clone(h),l,o.useOptimization,o.forceLetterForma).perform()}return a}}}),n),r.ReflowHelper=(a=function(t,e,o,n,a,i,c,l,u,h,p){this.alignment=t,this.text=e,this.highlightMethod=o,this.style=n,this.font=a,this.typographicBoundingRatios=i,this.items=s.clone(l),this.canonicalFontSize=u,this.useOptimization=h,this.forceLetterForma=p,this.maxWidth=c;for(var g=s.iter(l);!g.done;g.next()){var d=g.value;null!=this.primaryStyleItem||d.hasCharacterStyle||(this.primaryStyleItem=d),null==this.charStyleItem&&d.hasCharacterStyle&&(this.charStyleItem=d),this.maxWidth=Math.max(this.maxWidth,d.size.width)}this.rowHeight=u*i.heightRatio,this.leadingHeight=n.spacing*r.spacingScalar*this.rowHeight,this.accumulatedHeight=0,this.slugs=[],this.yValues=[]},s.defineClass({name:"ReflowHelper",ctor:a,props:{perform:function(){for(var t=this.createSlug(),e=s.iter(s.toSequence(this.items));!e.done;e.next()){var o,n=e.value,a=n.offset,i=n.element;if(null!=(o=s.opt(i.rangeInLockup,(function(t){return t.start})))){var r=a==this.items.length-1,l=this.shouldForceCharStyle(r),u=o>0&&"\n"==this.text.substr(o-1,1);!u&&t.appendItem(i,l)||(u&&0==this.slugs.length||c.LegacyCoreAssert.isFalse(t.isEmpty,"Could not fit even one word?",void 0,"ReflowHelper.perform","EvenRowHeightsLayoutStrategy.swift",1318),this.appendSlug(t),t=this.createSlug(),l=this.shouldForceCharStyle(r),t.appendItem(i,l)||c.LegacyCoreAssert.fail("Could not fit a word in an empty slug?",void 0,"ReflowHelper.perform","EvenRowHeightsLayoutStrategy.swift",1327))}}return this.highlightMethod!=d.HighlightMethod.Bracket&&this.highlightMethod!=d.HighlightMethod.InsideBracket||(t=t.harmonizeStyleForBracketing()),this.appendSlug(t,!0),this.slugsToResults()},slugsToResults:function(){var t,e,o=this.slugs.map((function(t){return t.width}),this),n=(t=s.max(o))||null!=t?t:0,a=this.accumulatedHeight,i=this.canonicalFontSize*(this.typographicBoundingRatios.textVerticalOffsetRatio-this.font.capRatio),c=0;null!=(e=s.opt(this.charStyleItem,(function(t){return t.pointSize})))&&(c=f.TypeLockupUtils.getCharFontYAdjust(this.style,this.canonicalFontSize,e));for(var u=[],h=s.iter(s.toSequence(this.slugs));!h.done;h.next()){var p=h.value,d=p.offset,m=p.element,R=r.EvenRowHeightsLayoutStrategy.calcNonCombiningItemCount(this.text.length,m.numItems,this.slugs.length);m.output(u,d,i+this.yValues[d],c,n,this.alignment,R,this.useOptimization,this.forceLetterForma)}return new l.LayoutResults(s.clone(u),new y.TheoSize(n,a),g.Matrix2D.Identity,this.typographicBoundingRatios,n/this.rowHeight)},createSlug:function(){return new r.Slug(this.maxWidth,this.canonicalFontSize,this.typographicBoundingRatios,this.primaryStyleItem,this.charStyleItem)},appendSlug:function(t,e){void 0===e&&(e=!1),this.slugs.push(t),this.yValues.push(this.accumulatedHeight),this.accumulatedHeight+=t.height,e||(this.accumulatedHeight+=this.leadingHeight)},shouldForceCharStyle:function(t){return r.EvenRowHeightsLayoutStrategy.isAutoHighlightMethod(this.highlightMethod)?r.EvenRowHeightsLayoutStrategy.useCharStyleForAutoMethod(this.slugs.length,t,this.highlightMethod):null}}}),a),r.Slug=(i=function(t,e,o,n,a){this.items=[],this.lastItemSpaceWidth=0,this.xValues=[],this.width=0,void 0===n&&(n=null),void 0===a&&(a=null),this.maxWidth=t,this.canonicalFontSize=e,this.typographicBoundingRatios=o,this.primaryStyleItem=n,this.charStyleItem=a},s.defineClass({name:"Slug",ctor:i,props:{appendItem:function(t,e){var o;void 0===e&&(e=null);var n,a,i=t;if(null!=e&&t.hasCharacterStyle!=e&&(i=this.flipItemStyle(t)||t),null!=(n=i.pointSize)&&(a=i.font)){var r=i.size.width,s=(o=i.spaceWidth)||null!=o?o:n*a.spaceWidthRatio,c=this.width+this.lastItemSpaceWidth+r;return!!(this.isEmpty||c<=this.maxWidth)&&(this.items.push(i),this.width+=this.lastItemSpaceWidth,this.xValues.push(this.width),this.width+=r,this.lastItemSpaceWidth=s,!0)}return!0},output:function(t,e,o,n,a,i,c,u,p){for(var d=s.iter(s.toSequence(this.items));!d.done;d.next()){var f,m,y,R,S=d.value,v=S.offset,w=S.element;if(null!=(f=w.pointSize)&&null!=(m=w.text)&&(y=w.font)&&(R=w.rangeInLockup)){var L=this.xValues[v];i!=h.LockupAlignment.Center&&i!=h.LockupAlignment.Right||(L+=(a-this.width)/(i==h.LockupAlignment.Center?2:1));var k,A=o+(w.hasCharacterStyle&&this.canonicalFontSize!=f?n:0),C=l.LockupItem.init_38d4(w.hasPrimaryColor,w.characterStyle,w.size,g.Matrix2D.translationXY(L,A),m,y,f,this.canonicalFontSize,this.typographicBoundingRatios,e,R,void 0,w.spaceWidth,w.complementaryStyleWordWidth,w.complementaryStyleSpaceWidth);(k=s.last(t))&&(k.canAppendNext=r.EvenRowHeightsLayoutStrategy.canCombineItemPair(k,C,u,p,v,this.numItems,c)),t.push(C)}}},harmonizeStyleForBracketing:function(){if(this.items.length<2)return this;var t,e=new i(1e5,this.canonicalFontSize,this.typographicBoundingRatios,this.primaryStyleItem,this.charStyleItem);if(null!=(t=s.opt(s.last(this.items),(function(t){return t.hasCharacterStyle}))))for(var o=s.iter(this.items);!o.done;o.next()){var n=o.value,a=e.appendItem(n,t);c.LegacyCoreAssert.isTrue(a,"Could not fit a word in a super wide slug?",void 0,"Slug.harmonizeStyleForBracketing","EvenRowHeightsLayoutStrategy.swift",1573)}return e},flipItemStyle:function(t){var e,o,n,a,i,r,s,c;if(null!=(n=t.text)&&(a=t.rangeInLockup)&&null!=(i=t.rowIndex)&&(r=t.hasCharacterStyle?this.primaryStyleItem:this.charStyleItem)&&(s=r.font)&&null!=(c=r.pointSize)){var u=t.hasCharacterStyle?"":d.TypeLockupController.HIGHLIGHT_STYLE,h=t.size.width,p=new y.TheoSize((e=t.complementaryStyleWordWidth)||null!=e?e:h,t.size.height),g=h,f=t.spaceWidth,m=(o=t.complementaryStyleSpaceWidth)||null!=o?o:f,R=f;return l.LockupItem.init_38d4(t.hasPrimaryColor,u,p,t.placement,n,s,c,this.canonicalFontSize,this.typographicBoundingRatios,i,a,void 0,m,g,R)}return null},height:{get:function(){return this.canonicalFontSize*this.typographicBoundingRatios.heightRatio}},isEmpty:{get:function(){return 0==this.items.length}},numItems:{get:function(){return this.items.length}}}}),i)},JgVS:function(t,e,o){var n,a,i=e,r=o("oAGj"),s=o("fNpk");i.DecorationResults=(n=function(t){this.items=r.clone(t)},r.defineClass({name:"DecorationResults",ctor:n}),n),i.LockupDecorationStrategy=r.defineProtocol("LockupDecorationStrategy",{supportsConfiguration:"(LockupConfiguration) -> Boolean",decorate:"(LockupConfiguration, LayoutResults) -> DecorationResults"}),i.BaseDecorationStrategy=(a=function(){},r.defineClass({name:"BaseDecorationStrategy",ctor:a,statics:{getHorizontalOffsetForItalicAngle:function(t,e){var o=Math.abs(e),n=(180-o-90)*Math.PI/180,a=o*Math.PI/180,i=t/Math.sin(n)*Math.sin(a);return(i>t||i<0)&&(i=t/2),i},_implements:function(t){return"LockupDecorationStrategy"==t}},props:{supportsConfiguration:function(t){return s.LegacyCoreAssert.fail("Implement in subclass",void 0,"BaseDecorationStrategy.supportsConfiguration","LockupDecorationStrategy.swift",31),!1},decorate:function(t,e){return s.LegacyCoreAssert.fail("Implement in subclass",void 0,"BaseDecorationStrategy.decorate","LockupDecorationStrategy.swift",36),new i.DecorationResults([])}}}),a)},PXlJ:function(t,e,o){var n,a=e,i=o("oAGj"),r=o("JgVS"),s=o("cEEQ"),c=o("c+uM"),l=o("tGKA"),u=o("JKVa"),h=o("8t9B"),p=o("sIWg");a.LetterDecorationStrategy=(n=function(){r.BaseDecorationStrategy.call(this)},i.defineClass({name:"LetterDecorationStrategy",ctor:n,superName:"BaseDecorationStrategy",statics:{_implements:function(t){return"LockupDecorationStrategy"==t}},props:{supportsConfiguration:function(t){return c.LockupStyle.isLetterGrid(t.style.layout)},decorate:function(t,e){var o,n,a=[];if(0==e.items.length)return new r.DecorationResults(i.clone(a));var u,g,d,f,m=t.style,y=i.opt(m.font,(function(t){return t.fontData}));m.backing==c.LockupBacking.SVGBackground&&(u=m.backingArtworkID);var R,S,v,w=null;if(0==!t.characterStyleRanges.length&&(R=m.characterStyles[h.TypeLockupController.HIGHLIGHT_STYLE])&&(g=i.opt(R.font,(function(t){return t.fontData})),(d=R.backing)!=c.LockupBacking.UNSET&&(w=R.padding),d==c.LockupBacking.SVGBackground&&(f=R.backingArtworkID)),null==u&&null==f)return new r.DecorationResults(i.clone(a));for(var L=i.iter(i.toSequence(e.items));!L.done;L.next()){var k=L.value,A=k.offset,C=k.element,x=y,T=null,I=!1;if(C.characterStyle==h.TypeLockupController.HIGHLIGHT_STYLE?(I=!0,x=g||x,T=d==c.LockupBacking.UNSET?u:f):T=u,null!=T){var B,D,z,M,F=p.TheoRect.fromXYWH(C.placement.tx,C.placement.ty,C.size.width,C.size.height).outsetXY((o=i.opt(C.margins,(function(t){return t.width})))||null!=o?o:0,(n=i.opt(C.margins,(function(t){return t.height})))||null!=n?n:0),b=I?v:S;if(null==b&&(b=this.getSVGConfig(t.style,I?w:null,e,T,C,F),I?v=b:S=b),null!=(B=i.opt(x,(function(t){return t.capRatio})))&&null!=(D=C.pointSize)&&null!=(z=b)&&null!=(M=T)){var W=(e.typographicBoundingRatios.textVerticalOffsetRatio-B)*D,H=l.Matrix2D.translation(z.frame.origin).translate(F.origin).translateXY(0,-W);a.push(s.LockupItem.init_9cc6(!1,z.frame.size,H,M,z.preScale,A+e.numberOfLines,C.characterStyle))}}}return new r.DecorationResults(i.clone(a))},getSVGConfig:function(t,e,o,n,a,r){var l,h,p=new s.LayoutResults([a],r.size,o.placement,o.typographicBoundingRatios,o.avgRowAspect),g=t;return null!=(l=e)&&(h=i.as(g.clone(),c.LockupStyle))&&(h.padding=l,g=h),new u.SVGBackgroundDecorationStrategy(n).calcSVGConfiguration(g,p)}}}),n)},UB0O:function(t,e,o){var n,a=e,i=o("oAGj"),r=o("iCxV"),s=o("fNpk"),c=o("cEEQ"),l=o("9kak"),u=o("c+uM"),h=o("GFAD"),p=o("tGKA"),g=o("8t9B"),d=o("3UhB"),f=o("uUew"),m=o("1NAc");a.EvenRowWidthsLayoutStrategy=(n=function(){this.paddingScalar=.6,this.spacingScalar=.75,c.BaseLockupLayoutStrategy.call(this)},i.defineClass({name:"EvenRowWidthsLayoutStrategy",ctor:n,superName:"BaseLockupLayoutStrategy",statics:{getCombinedAspectOfAllRows:function(t,e){for(var o=0,n=i.iter(t);!n.done;n.next())o+=1/n.value.aspectRatio;return e>0?1/(i.toDouble(t.length-1)*(1/e)+o):1/o},getCombinedAspectOfAllRowsFinal:function(t,e){for(var o=0,n=i.iter(t);!n.done;n.next()){var a=n.value,r=a.rowHeightAdjustRatio<1?a.rowHeightAdjustRatio:1;o+=1/a.aspectRatio*(r*r)}return 0!=e?1/(i.toDouble(t.length-1)*(1/e)+o):1/o},getAverageRowAspect:function(t){for(var e=0,o=i.iter(i.range(0,t.length,!1).reversed());!o.done;o.next())e+=t[o.value].aspectRatio;return e/i.toDouble(t.length)},getTallestRowPairIndex:function(t){for(var e=5e3,o=t.length,n=null,a=i.iter(i.range(0,o-1,!1));!a.done;a.next()){var r=a.value,s=t[r];if(s.appendable){var c=t[r+1],l=s.aspectRatio+c.aspectRatio;l<e&&(e=l,n=r)}}return n},aspectDifference:function(t,e){return 1/(1/t-1/e)},aspectStacked:function(t,e){return 1/(1/t+1/e)},mergeRows:function(t,e,o){var n=i.clone(t);s.LegacyCoreAssert.isTrue(e<o,"merging out of order rows",void 0,"EvenRowWidthsLayoutStrategy.mergeRows","EvenRowWidthsLayoutStrategy.swift",592);var a=n[e].words.concat(n[o].words),r=new l.LockupRowInfo(i.clone(a),n[o].appendable);return n.splice(o,1),n.splice(e,1),n.splice(e,0,r),n},mergeAutoRows:function(t,e,o,a,r,s){for(var c=i.clone(n.mergeRows(i.clone(t),e,o)),l=s==g.HighlightMethod.EvenRows?0:1,u=0,h=i.iter(i.range(0,c.length,!1));!h.done;h.next()){for(var p=h.value,d=0,f=i.iter(i.range(0,c[p].words.length,!1));!f.done;f.next()){for(var m=f.value;a[u].isNewLine;)u+=1;var y=p%2==l?r[u]:a[u];c[p].words[m]=y,d+=y.aspectRatio,m-1>=0&&(d+=c[p].words[m-1].spaceAspectRatio),u+=1}c[p].aspectRatio=d}return c},compactRowsIntoAspect:function(t,e,o){var a=t.length;if(a<=1)return t;var r=n.getCombinedAspectOfAllRows(i.clone(t),0),s=n.getTallestRowPairIndex(i.clone(t));if(null==s)return t;for(var c=s+1,l=t[s],u=t[c],p=l.aspectRatio,g=u.aspectRatio,d=p+g,f=0,m=0,y=i.iter(i.toSequence(t));!y.done;y.next()){var R=y.value,S=R.offset,v=R.element;f+=v.aspectRatio,S==s?m+=d:S!=c&&(m+=v.aspectRatio)}var w=f/i.toDouble(a),L=m/i.toDouble(a)/o,k=w/o/i.toDouble(a-1),A=L/i.toDouble(a-2),C=n.aspectStacked(n.aspectDifference(r,n.aspectStacked(g,p)),d),x=n.aspectStacked(A,C),T=n.aspectStacked(k,r);if(h.LockupUtils.percentageDiff(e,T)<=h.LockupUtils.percentageDiff(e,x))return t;var I=i.clone(n.mergeRows(i.clone(t),s,c));return n.compactRowsIntoAspect(i.clone(I),e,o)},compactAutoRowsIntoAspect:function(t,e,o,a,r,s){var c=t.length;if(c<=1)return t;var l=n.getCombinedAspectOfAllRows(i.clone(t),0),u=n.getTallestRowPairIndex(i.clone(t));if(null==u)return t;for(var p=u+1,g=t[u],d=t[p],f=g.aspectRatio,m=d.aspectRatio,y=f+m,R=0,S=0,v=i.iter(i.toSequence(t));!v.done;v.next()){var w=v.value,L=w.offset,k=w.element;R+=k.aspectRatio,L==u?S+=y:L!=p&&(S+=k.aspectRatio)}var A=R/i.toDouble(c),C=S/i.toDouble(c)/o,x=A/o/i.toDouble(c-1),T=C/i.toDouble(c-2),I=n.aspectStacked(n.aspectDifference(l,n.aspectStacked(m,f)),y),B=n.aspectStacked(T,I),D=n.aspectStacked(x,l);if(h.LockupUtils.percentageDiff(e,D)<=h.LockupUtils.percentageDiff(e,B))return t;var z=i.clone(n.mergeAutoRows(i.clone(t),u,p,i.clone(a),i.clone(r),s));return n.compactAutoRowsIntoAspect(i.clone(z),e,o,i.clone(a),i.clone(r),s)},getOptimalCompactedAutoRows:function(t,e,o,a,r,s){var c=t.length;if(c<=1)return t;var l=n.getCombinedAspectOfAllRows(i.clone(t),0),u=n.getTallestRowPairIndex(i.clone(t));if(null==u)return t;for(var p=u+1,g=t[u],d=t[p],f=g.aspectRatio,m=d.aspectRatio,y=f+m,R=0,S=0,v=i.iter(i.toSequence(t));!v.done;v.next()){var w=v.value,L=w.offset,k=w.element;R+=k.aspectRatio,L==u?S+=y:L!=p&&(S+=k.aspectRatio)}var A=R/i.toDouble(c),C=S/i.toDouble(c)/r,x=A/r/i.toDouble(c-1),T=C/i.toDouble(c-2),I=n.aspectStacked(n.aspectDifference(l,n.aspectStacked(m,f)),y),B=n.aspectStacked(T,I),D=n.aspectStacked(x,l);if(h.LockupUtils.percentageDiff(a,D)<=h.LockupUtils.percentageDiff(a,B))return t;var z=i.clone(n.mergeAutoRows(i.clone(t),u,p,i.clone(e),i.clone(o),s));return n.compactAutoRowsIntoAspect(i.clone(z),a,r,i.clone(e),i.clone(o),s)},_implements:function(t){return"LockupLayoutStrategy"==t}},props:{supportsConfiguration:function(t){return t.style.layout==u.LockupLayout.FitJustified},layout:function(t){var e=t.text,o=t.style.font.fontData,a=t.containerSize,s=a.width,l=a.height,h=t.style,y=h.spacing*this.spacingScalar,R=s,S=l,v=R/S,w=i.clone(t.characterStyleRanges);h.alignment!=u.LockupAlignment.UNSET&&i.opt(r.Host.logging,(function(t){return t.warning("Unexpected alignment "+h.alignment+" for fit-justified text")}));var L=o.allCapsAllowed?e.toUpperCase():e,k=c.getTypographicBoundingRatiosOfString(L,o),A=g.TypeLockupController.HIGHLIGHT_STYLE,C=i.opt(i.opt(h.characterStyles[A],(function(t){return t.font})),(function(t){return t.fontData})),x=d.TypeLockupUtils.getCharFontAdjust(h,k.hasUppercase),T=!1;t.characterStyleRanges.length>0&&null!=h.characterStyles[A]&&-1!=h.characterStyles[A].spacing&&0!=h.characterStyles[A].spacing&&h.characterStyles[A].spacing>1&&((h=t.style.clone()).characterStyles[A].spacing=x,w=i.clone(d.TypeLockupUtils.invertRanges(i.clone(t.characterStyleRanges),e.length)),T=!0,null!=C&&(C=o,o=h.characterStyles[A].font.fontData,h.characterStyles[A].font=h.font));for(var I=i.clone(d.TypeLockupUtils.computeLockupMeasurements(L,o,k.heightRatio,o.allCapsAllowed,t.forceLetterForma,h.tracking,i.clone(w),i.clone(h.characterStyles),x,t.forceLetterForma)),B=i.clone(this.getUncompactedRows(i.clone(I),!1)),D=i.clone(n.compactRowsIntoAspect(i.clone(B),v,y)),z=0,M=i.iter(I);!M.done;M.next())z+=(lt=M.value).isNewLine?0:1;if(null!=t.rowWordLengths&&t.rowWordLengths.reduce((function(t,e){return t+e}),0)==z&&(!t.allowFewerLineBreaks||D.length>=t.rowWordLengths.length)&&(D=i.clone(this.getPrecomputedRows(i.clone(I),i.clone(t.rowWordLengths)))),I.length>1&&(t.highlightMethod==g.HighlightMethod.EvenRows||t.highlightMethod==g.HighlightMethod.OddRows)&&""!=A&&null!=h.characterStyles[A]&&null!=C){var F=i.clone(d.TypeLockupUtils.computeLockupMeasurements(L,o,k.heightRatio,o.allCapsAllowed,!1,h.tracking,i.clone([]),i.clone({}))),b=[new f.TextRange(0,i.chars(e).length)],W=i.clone(d.TypeLockupUtils.computeLockupMeasurements(L,C,k.heightRatio,o.allCapsAllowed,!1,h.tracking,i.clone(b),i.clone(h.characterStyles),x)),H=i.clone(this.getUncompactedAutoRows(i.clone(F),i.clone(W),!1,t.highlightMethod));D=i.clone(n.getOptimalCompactedAutoRows(i.clone(H),i.clone(F),i.clone(W),v,y,t.highlightMethod))}if(0==D.length)return new c.LayoutResults([],new m.TheoSize(0,0),p.Matrix2D.Identity,k,0);var E=n.getAverageRowAspect(i.clone(D)),O=E/y,_=n.getCombinedAspectOfAllRowsFinal(i.clone(D),O);_<v?R=S*_:S=R/_;for(var G=R/O,P=S,U=R,N=0,V=0,j=[],Y=i.iter(i.range(0,D.length,!1));!Y.done;Y.next()){var X=Y.value,Z=D[X],J=Z.rowHeightAdjustRatio<1?Z.rowHeightAdjustRatio:1,q=R/(isFinite(Z.aspectRatio)?Z.aspectRatio:1)*J,K=c.getTypographicBoundingRatiosOfString(Z.text,o);V=0,J<1&&(V+=(R-Z.aspectRatio*q)/2);for(var Q=q/k.heightRatio,$=Q*x,tt=Q*o.capRatio,et=k.textVerticalOffsetRatio,ot=k.heightRatio,nt=K.textVerticalOffsetRatio,at=et-(ot/2-K.heightRatio/2)-nt,it=d.TypeLockupUtils.getCharFontYAdjust(h,Q,$),rt=(k.textVerticalOffsetRatio-o.capRatio-at)*Q,st=N+0,ct=i.iter(i.range(0,Z.words.length,!1));!ct.done;ct.next()){var lt,ut=ct.value,ht=(lt=Z.words[ut]).aspectRatio*q,pt=lt.spaceAspectRatio*q,gt=V,dt=o.allCapsAllowed?lt.text.toUpperCase():lt.text,ft=i.isEmpty(lt.characterStyle)?Q:$,mt=i.isEmpty(lt.characterStyle)||1!=J?0:it,yt=i.isEmpty(lt.characterStyle)?null:lt.characterStyle;T&&(yt=i.isEmpty(lt.characterStyle)?A:null);var Rt=c.LockupItem.init_38d4(!0,yt,new m.TheoSize(ht,tt),p.Matrix2D.translationXY(gt,st+rt+mt),dt,i.isEmpty(lt.characterStyle)?o:C||o,ft,Q,K,X,lt.rangeInLockup);j.push(Rt),V+=ht+pt}N+=J<1?$*k.heightRatio+G:q+G}return new c.LayoutResults(i.clone(j),new m.TheoSize(U,P),p.Matrix2D.translationXY(0,0),k,E)},calculateTracking:function(t,e){var o=t.text,a=t.style.font.fontData,r=t.containerSize,s=r.width,l=r.height,u=t.style,h=u.spacing*this.spacingScalar,p=l,m=a.allCapsAllowed?o.toUpperCase():o,y=c.getTypographicBoundingRatiosOfString(m,a),R=0,S=g.TypeLockupController.HIGHLIGHT_STYLE,v=i.opt(i.opt(u.characterStyles[S],(function(t){return t.font})),(function(t){return t.fontData})),w=1;null!=v&&(w=y.hasUppercase?a.capRatio/v.capRatio:a.meanRatio/v.meanRatio);var L=i.clone(d.TypeLockupUtils.computeLockupMeasurements(m,a,y.heightRatio,!1,!0,u.tracking,i.clone(t.characterStyleRanges),i.clone(u.characterStyles),w,t.forceLetterForma));if(0==L.length)return t.style.tracking;var k=i.clone(this.getUncompactedRows(i.clone(L),!1)),A=e.width/e.height,C=i.clone(n.compactRowsIntoAspect(i.clone(k),A,h));if(L.length>1&&(t.highlightMethod==g.HighlightMethod.EvenRows||t.highlightMethod==g.HighlightMethod.OddRows)&&""!=S&&null!=u.characterStyles[S]&&null!=v){var x=i.clone(d.TypeLockupUtils.computeLockupMeasurements(m,a,y.heightRatio,a.allCapsAllowed,!0,u.tracking,i.clone([]),i.clone({}),void 0,t.forceLetterForma)),T=[new f.TextRange(0,i.chars(o).length)],I=i.clone(d.TypeLockupUtils.computeLockupMeasurements(m,v,y.heightRatio,a.allCapsAllowed,!0,u.tracking,i.clone(T),i.clone(u.characterStyles),w,t.forceLetterForma)),B=i.clone(this.getUncompactedAutoRows(i.clone(x),i.clone(I),!1,t.highlightMethod));C=i.clone(n.getOptimalCompactedAutoRows(i.clone(B),i.clone(x),i.clone(I),A,h,t.highlightMethod))}if(0==C.length)return t.style.tracking;if(u.tracking>0)for(var D=i.iter(i.range(0,C.length,!1));!D.done;D.next()){var z=D.value;C[z].aspectRatio=0;for(var M=i.iter(i.range(0,C[z].words.length,!1));!M.done;M.next()){var F=M.value;C[z].aspectRatio+=C[z].words[F].aspectRatio,C[z].words[F].canBreak&&F!=C[z].words.length-1?(C[z].words[F].spaceAspectRatio=a.spaceWidthRatio/y.heightRatio,C[z].aspectRatio+=C[z].words[F].spaceAspectRatio):C[z].words[F].spaceAspectRatio=0}}var b=n.getAverageRowAspect(i.clone(C))/h,W=p*n.getCombinedAspectOfAllRows(i.clone(C),b)/(isFinite(C[0].aspectRatio)?C[0].aspectRatio:1),H=C[0].aspectRatio*W;if(H<s)if(C[0].words.length<=1)R=0;else{var E=(s-H)/i.toDouble(C[0].words.length-1);R=E<1?0:E/(W/y.heightRatio)}else R=-H;return R},calculateLeading:function(t,e){var o=t.text,a=t.style.font.fontData,r=t.containerSize,s=r.width,l=r.height,u=t.style,h=0,p=a.allCapsAllowed?o.toUpperCase():o,m=c.getTypographicBoundingRatiosOfString(p,a),y=u.tracking,R=g.TypeLockupController.HIGHLIGHT_STYLE,S=i.opt(i.opt(u.characterStyles[R],(function(t){return t.font})),(function(t){return t.fontData})),v=1;null!=S&&(v=m.hasUppercase?a.capRatio/S.capRatio:a.meanRatio/S.meanRatio);var w=i.clone(d.TypeLockupUtils.computeLockupMeasurements(p,a,m.heightRatio,!1,!0,y,i.clone(t.characterStyleRanges),i.clone(u.characterStyles),v,t.forceLetterForma));if(0==w.length)return t.style.spacing;var L=i.clone(this.getUncompactedRows(i.clone(w),!1)),k=e.width,A=e.height,C=k/A,x=i.clone(n.compactRowsIntoAspect(i.clone(L),C,t.style.spacing));if(w.length>1&&(t.highlightMethod==g.HighlightMethod.EvenRows||t.highlightMethod==g.HighlightMethod.OddRows)&&""!=R&&null!=u.characterStyles[R]&&null!=S){var T=i.clone(d.TypeLockupUtils.computeLockupMeasurements(p,a,m.heightRatio,a.allCapsAllowed,!0,u.tracking,i.clone([]),i.clone({}),void 0,t.forceLetterForma)),I=[new f.TextRange(0,i.chars(o).length)],B=i.clone(d.TypeLockupUtils.computeLockupMeasurements(p,S,m.heightRatio,a.allCapsAllowed,!0,u.tracking,i.clone(I),i.clone(u.characterStyles),v,t.forceLetterForma)),D=i.clone(this.getUncompactedAutoRows(i.clone(T),i.clone(B),!1,t.highlightMethod));x=i.clone(n.getOptimalCompactedAutoRows(i.clone(D),i.clone(T),i.clone(B),C,h,t.highlightMethod))}if(x.length<=1)return u.spacing;var z=n.getAverageRowAspect(i.clone(x))/h;if((A=k/n.getCombinedAspectOfAllRows(i.clone(x),z))<l){var M=s/((l-A)/(i.toDouble(x.length)-1));h=x[0].aspectRatio/M/this.spacingScalar}else h=-A;return h},getUncompactedRows:function(t,e){for(var o=[],n=0;n<t.length;){var a=t[n],i=new l.LockupRowInfo;if(a.isNewLine)o.length>0&&(o[o.length-1].appendable=!1);else{if(!e)for(;!a.canBreak&&n<t.length;)i.addWord(a),(n+=1)<t.length&&(a=t[n]);i.addWord(a),o.push(i)}n+=1}return o},getUncompactedAutoRows:function(t,e,o,n){s.LegacyCoreAssert.isTrue(t.length==e.length,"application of char style to entire range should not change word count",void 0,"EvenRowWidthsLayoutStrategy.getUncompactedAutoRows","EvenRowWidthsLayoutStrategy.swift",812);for(var a=[],i=0,r=n==g.HighlightMethod.EvenRows?0:1,c=0;c<t.length;){var u=i%2==r?e[c]:t[c],h=new l.LockupRowInfo;if(u.isNewLine)a.length>0&&(a[a.length-1].appendable=!1);else{if(!o)for(;!u.canBreak&&c<t.length;)h.addWord(u),(c+=1)<t.length&&(u=t[c]);h.addWord(u),a.push(h),i+=1}c+=1}return a}}}),n)},VDg0:function(t,e,o){var n,a=e,i=o("oAGj"),r=o("8t9B");a.kOpacityRuleFaintAlpha=.5,a.kOpacityRuleMediumAlpha=.7,a.LockupConfiguration=(n=function(t,e,o,n,a,s,c,l,u,h,p,g,d){void 0===n&&(n=null),void 0===a&&(a=null),void 0===s&&(s=!1),void 0===c&&(c=!1),void 0===l&&(l=null),void 0===u&&(u=null),void 0===h&&(h=r.HighlightMethod.Manual),void 0===p&&(p=[]),void 0===g&&(g=null),void 0===d&&(d=!1),this.text=t,this.style=e,this.containerSize=o,this.placement=n,this.parentBounds=a,this.useOptimization=s,this.forceLetterForma=c,this.preferredFontSize=l,this.expansionSize=u,this.highlightMethod=h,this.characterStyleRanges=i.clone(p),this.rowWordLengths=i.clone(g),this.allowFewerLineBreaks=d},i.defineClass({name:"LockupConfiguration",ctor:n,statics:{fitToContainerArea:!1},props:{clone:function(){return new n(this.text,this.style,this.containerSize,this.placement,this.parentBounds,this.useOptimization,this.forceLetterForma,this.preferredFontSize,this.expansionSize,this.highlightMethod,i.clone(this.characterStyleRanges),i.clone(this.rowWordLengths),this.allowFewerLineBreaks)}}}),n)},Zc5V:function(t,e,o){var n,a=e,i=o("oAGj");a.GridArrangementUtils=(n=function(){},i.defineClass({name:"GridArrangementUtils",ctor:n,statics:{MAX_COLS:100,ASPECT_RATIO_EPSILON:.005,getArrangement:function(t,e,o,a){var r=i.max(a),s=t*i.toDouble(o)/i.toDouble(r),c=n.getBestFittingArrangement(s,e,r),l=c.numCols,u=n.evaluateAllSegments(t,e,o,i.clone(a),l),h=u.penalty,p=u.aspectRatioDelta;if(0!=h)for(var g=n.getColumnCountSearchRange(o,l),d=i.iter(i.range(g.start,g.end,!0));!d.done;d.next()){var f=d.value;if(f!=c.numCols){var m=(u=n.evaluateAllSegments(t,e,o,i.clone(a),f)).penalty,y=u.aspectRatioDelta;(m<h||m==h&&y<p)&&(l=f,h=m,p=y)}}return{numRows:n.getNumRows(o,l),numCols:l}},getNumRows:function(t,e){return i.toInt(t/e)+(t%e==0?0:1)},getGridAspectRatio:function(t,e,o){var a=n.getNumRows(e,o);return i.toDouble(o)/i.toDouble(a)*t},getBestFittingArrangement:function(t,e,o,a,r){var s,c;void 0===a&&(a=1),void 0===r&&(r=n.MAX_COLS);var l=Math.min(o,r);if(a<l){s=i.toInt((a+l)/2),c=n.getGridAspectRatio(e,o,s);var u=Math.abs(t-c);if(u>n.ASPECT_RATIO_EPSILON){var h,p=(h=c<t?n.getBestFittingArrangement(t,e,o,s+1,l):n.getBestFittingArrangement(t,e,o,a,s-1)).numCols,g=h.aspectRatio;Math.abs(t-g)<u&&(s=p,c=g)}}else c=n.getGridAspectRatio(e,o,s=a);return{numCols:s,aspectRatio:c}},evaluateAllSegments:function(t,e,o,a,r){for(var s=0,c=0,l=i.iter(a);!l.done;l.next()){var u=l.value;n.evaluateOneSegment(u,r)||(s+=1),c+=1/n.getGridAspectRatio(e,u,r)}return c=1/c,{penalty:s,aspectRatioDelta:Math.abs(t-c)}},evaluateOneSegment:function(t,e){if(t<=e)return!0;var o=t%e;0==o&&(o=e);var a=i.toDouble(o)/i.toDouble(e),r=.5;return e>4&&n.getNumRows(t,e)>2&&(r=.25),a>=r},getColumnCountSearchRange:function(t,e){var o=Math.min(2,i.toInt(t/6));return{start:Math.max(1,e-o),end:Math.min(e+o,t)}}}}),n)},cEEQ:function(t,e,o){var n,a,i,r,s=e,c=o("oAGj"),l=o("53P9"),u=o("fNpk"),h=o("9kak"),p=o("tGKA"),g=o("1NAc");s.LockupItemType=c.defineEnum("LockupItemType",{Text:0,Path:1,Artwork:2}),s.LockupItem=(n=function(){this.spaceWidth=null,this.complementaryStyleWordWidth=null,this.complementaryStyleSpaceWidth=null,this.canAppendNext=!1,this.isFullCanvas=!1},c.defineClass({name:"LockupItem",ctor:n,props:{init_447b:function(t){this.type=t.type,this.hasPrimaryColor=t.hasPrimaryColor,this.size=t.size,this.placement=t.placement,this.text=t.text,this.font=t.font,this.pointSize=t.pointSize,this.rowPointSize=t.rowPointSize,this.rowIndex=t.rowIndex,this.margins=t.margins,this.typographicBoundingRatios=t.typographicBoundingRatios,this.characterStyle=t.characterStyle,this.rangeInLockup=t.rangeInLockup,this.spaceWidth=t.spaceWidth,this.complementaryStyleWordWidth=t.complementaryStyleWordWidth,this.complementaryStyleSpaceWidth=t.complementaryStyleSpaceWidth,this.canAppendNext=t.canAppendNext,this.path=t.path,this.artworkID=t.artworkID,this.preScale=t.preScale,this.isFullCanvas=t.isFullCanvas},init_38d4:function(t,e,o,n,a,i,r,c,l,u,h,p,g,d,f,m){void 0===p&&(p=null),void 0===g&&(g=null),void 0===d&&(d=null),void 0===f&&(f=null),void 0===m&&(m=!1),this.type=s.LockupItemType.Text,this.hasPrimaryColor=t,this.characterStyle=e,this.size=o,this.placement=n,this.text=a,this.font=i,this.pointSize=r,this.rowPointSize=c,this.typographicBoundingRatios=l,this.rowIndex=u,this.rangeInLockup=h,this.margins=p,this.spaceWidth=g,this.complementaryStyleWordWidth=d,this.complementaryStyleSpaceWidth=f,this.canAppendNext=m},init_708e:function(t,e,o,n,a,i,r){void 0===a&&(a=null),void 0===i&&(i=!1),void 0===r&&(r=null),this.type=s.LockupItemType.Path,this.hasPrimaryColor=t,this.size=e,this.placement=o,this.path=n,this.rowIndex=a,this.isFullCanvas=i,this.characterStyle=r},init_9cc6:function(t,e,o,n,a,i,r){void 0===i&&(i=null),void 0===r&&(r=null),this.type=s.LockupItemType.Artwork,this.hasPrimaryColor=t,this.size=e,this.placement=o,this.artworkID=n,this.preScale=a,this.rowIndex=i,this.characterStyle=r},clone:function(){return n.init_447b(this)},hasCharacterStyle:{get:function(){var t;return!(!(t=c.isEmpty(this.characterStyle))&&null==t||t)}},append:function(t){var e,o,n,a,i,r,c,l;if(u.LegacyCoreAssert.isTrue(this.type==s.LockupItemType.Text&&t.type==s.LockupItemType.Text,"Only text lockup items support appending",void 0,"LockupItem.append","LockupLayoutStrategy.swift",165),u.LegacyCoreAssert.isTrue(this.canAppendNext,"Asked to append to an item that does not support it",void 0,"LockupItem.append","LockupLayoutStrategy.swift",166),null!=(e=this.text)&&(o=this.rangeInLockup)&&null!=(n=this.spaceWidth)&&null!=(a=this.pointSize)&&(i=this.font)&&null!=(r=t.text)&&(c=t.rangeInLockup)&&null!=(l=t.spaceWidth)){var h=a*i.spaceWidthRatio,p=Math.abs(n-h)<.001?" ":"";this.text=e+p+r,this.rangeInLockup=o.unionWith(c),this.size=new g.TheoSize(this.size.width+n+t.size.width,Math.max(this.size.height,t.size.height)),this.spaceWidth=l,this.canAppendNext=t.canAppendNext}}}}),n),s.descenderCharacters="gjqpyQ",s.shortCharacters=" qweryuopasg;zxcvnm,.*-~",s.tallSpecialsThatAreNotCaps="!^'",s.TypographicBoundingRatios=(a=function(t,e,o,n,a,i){this.sideInsetRatio=t,this.textVerticalOffsetRatio=e,this.backingVerticalOffsetRatio=o,this.heightRatio=n,this.heightFromBaselineRatio=a,this.hasUppercase=i},c.defineClass({name:"TypographicBoundingRatios",ctor:a}),a),s.getTypographicBoundingRatiosOfString=function(t,e,o){void 0===o&&(o=!0);for(var n=t.split("\n").join(),a=!1,i=!1,r=!1,l=!1,u=!1,h=!1,p=!1,g=!1,d=!1,f=e.meanRatio,m=0,y=0,R=0,S=0,v=0,w=0,L=c.iter(c.chars(n));!L.done;L.next()){var k=L.value,A=!1,C=!1;" "!=k&&(y+=1,A||null==e.upperCaseCharsDict[k]?C||null==e.lowerCaseCharsDict[k]||(C=!0):A=!0,!a&&A?a=!0:!i&&C&&(i=!0),null!=e.meanCharsDict[k]?R+=e.meanRatio:null!=e.capCharsDict[k]?(u=!0,R+=e.capRatio):null!=e.ascentCharsDict[k]?(l=!0,R+=e.ascentRatio):null!=e.meanAccentCharsDict[k]?(h=!0,R+=e.meanAccentRatio):null!=e.capAccentCharsDict[k]?(r=!0,R+=e.capAccentRatio):(u=!0,R+=e.capRatio),A&&(y+=1,R+=e.capRatio),A||C||""==k||""==k||""==k||(d=!0),null!=e.tailCharsDict[k]?(p=!0,S+=e.tailRatio):null!=e.descentCharsDict[k]&&(g=!0,S+=e.descentRatio))}if(d&&(f=1),r&&(f=Math.max(f,e.capAccentRatio)),l&&(f=Math.max(f,e.ascentRatio)),u&&(f=Math.max(f,e.capRatio)),h&&(f=Math.max(f,e.meanAccentRatio)),p&&(m=Math.max(m,e.tailRatio)),g&&(m=Math.max(m,e.descentRatio)),y>0&&(v=R/y,w=S/y),o){var x=f-(a?e.capRatio:e.meanRatio);v=f+=Math.max(0,m-x),w=m}var T=m/2,I=e.baselineOffsetRatio+f,B=.8*(f-v-m+w),D=f+m;return new s.TypographicBoundingRatios(T,I,B,D,f,a)},s.LayoutResults=(i=function t(e,o,n,a,i,r){void 0===r&&(r=null),this.itemsForReflow_=c.clone(e),this.items_=c.clone(t.optimize(c.clone(e)));for(var l=0,u=0,h=0,p=1e5,g=0,d=0,f=0,m={},y=c.iter(this.items_);!y.done;y.next()){var R=y.value;R.type==s.LockupItemType.Text&&(l+=R.size.height,u+=R.pointSize,h+=1,R.rowIndex<p&&(p=R.rowIndex),R.rowIndex>g&&(g=R.rowIndex),null==m[R.rowIndex]&&(d+=R.pointSize,m[R.rowIndex]=!0),R.pointSize>f&&(f=R.pointSize))}this.size=o,this.placement=n,this.numberOfLines=g<p?0:g-p+1,this.avgLinePointSize=d/c.toDouble(this.numberOfLines),this.avgTextItemHeight=l/h,this.avgTextPointSize=u/h,this.largestPointSize=f,this.typographicBoundingRatios=a,this.avgRowAspect=i,this.annotations=c.clone(r)},c.defineClass({name:"LayoutResults",ctor:i,statics:{optimize:function(t){for(var e=[],o=null,n=c.iter(t);!n.done;n.next()){var a,i=n.value.clone();i.canAppendNext&&null==o?o=i:(a=o)?(a.append(i),i.canAppendNext||(e.push(a),o=null)):e.push(i)}return(a=o)&&(u.LegacyCoreAssert.fail("Why does the last lockup item claim to be appendable?",void 0,"LayoutResults.optimize","LockupLayoutStrategy.swift",497),e.push(a)),e},mirrorItems:function(t,e){for(var o=[],n=c.iter(t);!n.done;n.next()){var a=n.value;a.placement=p.Matrix2D.scalingXY(-1,1).translateXY(a.size.width,0).concat(a.placement.scaleXY(-1,1)).translateXY(e,0),o.splice(0,0,a)}return o}},props:{items:{get:function(){return this.items_}},itemsForReflow:{get:function(){return this.itemsForReflow_}},flipForRightToLeft:function(){var t=this.size.width;this.items_=c.clone(i.mirrorItems(c.clone(this.items_),t)),this.itemsForReflow_=c.clone(i.mirrorItems(c.clone(this.itemsForReflow_),t))}}}),i),s.LockupLayoutStrategy=c.defineProtocol("LockupLayoutStrategy",{supportsConfiguration:"(LockupConfiguration) -> Boolean",layout:"(LockupConfiguration) -> LayoutResults",reflow:"(TheoSize, TheoPoint, LockupConfiguration, LayoutResults) -> LayoutResults",calculateTracking:"(LockupConfiguration, TheoSize) -> Double",calculateLeading:"(LockupConfiguration, TheoSize) -> Double",adjustSizeForLeading:"(TheoRect, LayoutResults, Double, Double) -> TheoSize",adjustSizeForTracking:"(String, LayoutResults, Double, Double) -> TheoSize",annotate:"(String, TheoSize, LockupStyle, Integer) -> Array<Annotation>"}),s.LockupLayoutStrategyFactory=c.defineProtocol("LockupLayoutStrategyFactory",{supportsConfiguration:"(LockupConfiguration) -> Boolean",createForConfiguration:"(LockupConfiguration) -> LockupLayoutStrategy"}),s.BaseLockupLayoutStrategy=(r=function(){this.maxLetterLayoutGraphemeCount=100,this.maxLetterLayoutRecommendedGraphemeCount=50},c.defineClass({name:"BaseLockupLayoutStrategy",ctor:r,statics:{_implements:function(t){return"LockupLayoutStrategy"==t}},props:{supportsConfiguration:function(t){return u.LegacyCoreAssert.fail("Implement in subclass",void 0,"BaseLockupLayoutStrategy.supportsConfiguration","LockupLayoutStrategy.swift",624),!1},layout:function(t){return u.LegacyCoreAssert.fail("implement in subclass",void 0,"BaseLockupLayoutStrategy.layout","LockupLayoutStrategy.swift",629),new s.LayoutResults([],new g.TheoSize(0,0),p.Matrix2D.Identity,new s.TypographicBoundingRatios(0,1,0,1,1,!1),0)},reflow:function(t,e,o,n){return null},calculateTracking:function(t,e){return u.LegacyCoreAssert.fail("implement in subclass",void 0,"BaseLockupLayoutStrategy.calculateTracking","LockupLayoutStrategy.swift",658),0},calculateLeading:function(t,e){return u.LegacyCoreAssert.fail("implement in subclass",void 0,"BaseLockupLayoutStrategy.calculateLeading","LockupLayoutStrategy.swift",665),0},adjustSizeForLeading:function(t,e,o,n){var a=n-o;return new g.TheoSize(0,c.toDouble(e.numberOfLines-1)*(t.width/e.avgRowAspect)*(.75*a))},adjustSizeForTracking:function(t,e,o,n){var a,i=0,r=n-o;if(0!=r){for(var s=-1,u=0,h=0,p=0,d=0,f=t,m=c.iter(e.items);!m.done;m.next()){var y=m.value;y.rowIndex!=s?(p>d&&(d=p,i=u),h=y.placement.tx,u=0):u+=r*y.pointSize;var R=l.GraphemeUtils.countGraphemes((a=y.text)||null!=a?a:""),S=R>0?R-1:0;u+=r*y.pointSize*c.toDouble(S),p=y.placement.tx+y.size.width-h,y.rangeInLockup.start>0&&" "==f.substr(y.rangeInLockup.start-1,1)&&h!=y.placement.tx&&(n<0?u-=r*y.pointSize:u+=r*y.pointSize),s=y.rowIndex}p>d&&(d=p,i=u)}return new g.TheoSize(i,0)},getPrecomputedRows:function(t,e){var o=[];if(0==t.length||0==e.length)return o;for(var n=new h.LockupRowInfo,a=0,i=0,r=c.iter(t);!r.done;r.next()){var s=r.value;s.isNewLine||(i>=e[a]&&(o.push(n),n=new h.LockupRowInfo,a+=1,i=0),n.addWord(s),i+=1)}return o.push(n),o},annotate:function(t,e,o,n){return null}}}),r)},d3iY:function(t,e,o){var n,a,i=e,r=o("oAGj"),s=o("EGPT"),c=o("Zc5V"),l=o("53P9"),u=o("iCxV"),h=o("cEEQ"),p=o("9kak"),g=o("c+uM"),d=o("KdeS"),f=o("tGKA"),m=o("8t9B"),y=o("3UhB"),R=o("uUew"),S=o("1NAc");i.LetterGridLayoutStrategy=(n=function(){this.trackingScalar=3,this.spacingScalar=3,h.BaseLockupLayoutStrategy.call(this)},r.defineClass({name:"LetterGridLayoutStrategy",ctor:n,superName:"BaseLockupLayoutStrategy",statics:{_implements:function(t){return"LockupLayoutStrategy"==t}},props:{supportsConfiguration:function(t){return g.LockupStyle.isLetterGrid(t.style.layout)},layout:function(t){var e=[],o=0,n=0,a=0,i=this.getWireframeLayout(t),s=i.typographicBoundingRatios,c=r.clone(i.rows);if(0==!c.length){var l,u,p,g,d=i.horizontalPaddingRatio,R=i.verticalPaddingRatio,v=this.getCombinedAspectRatio(r.clone(c),d,R),w=t.style,L=i.font;null!=(g=t.preferredFontSize)?(u=(l=g)*s.heightRatio,p=(n=(o=i.constraintWidth)/v)/r.toDouble(c.length)):(v<i.constraintAspectRatio?(n=i.constraintHeight,o=i.constraintHeight*v):(o=i.constraintWidth,n=i.constraintWidth/v),l=(u=(p=n/r.toDouble(c.length))/(1+R))/s.heightRatio);var k=R*u,A=d*u;i.charFontAdjustRatio>1&&(l/=i.charFontAdjustRatio);for(var C=l*L.capRatio,x=l*s.textVerticalOffsetRatio-C,T=r.opt(r.opt(w.characterStyles[m.TypeLockupController.HIGHLIGHT_STYLE],(function(t){return t.font})),(function(t){return t.fontData}))||L,I=l*i.charFontAdjustRatio,B=y.TypeLockupUtils.getCharFontYAdjust(w,l,I),D=k/2+x,z=r.iter(r.toSequence(c));!z.done;z.next()){var M=z.value,F=M.offset,b=M.element;if(0==!b.words.length)for(var W=r.first(b.words).aspectRatio*u,H=W+A,E=A/2+b.colOffsetLeft*H,O=r.iter(b.words);!O.done;O.next()){var _=O.value,G=_.characterStyle,P=G==m.TypeLockupController.HIGHLIGHT_STYLE,U=P?T:L,N=P?I:l,V=_.relativeMargins.multiply(u),j=V.width,Y=E+j,X=D+(P?B:0),Z=h.LockupItem.init_38d4(!0,G,new S.TheoSize(W-2*j,C),f.Matrix2D.translationXY(Y,X),_.text,U,N,l,s,F,_.rangeInLockup,V);e.push(Z),E+=H}D+=p}a=this.getWidestRowAndAspectRatio(r.clone(c),d,R).aspectRatio}return new h.LayoutResults(r.clone(e),new S.TheoSize(o,n),f.Matrix2D.Identity,s,a,r.clone(this.getAnnotations(i.renderableItemCount,e.length)))},getCharacterStyle:function(t,e,o){for(var n=r.iter(t);!n.done;n.next()){var a=n.value;if(e>=a.start&&e<a.end)return m.TypeLockupController.HIGHLIGHT_STYLE}return""},getWireframeLayout:function(t,e){var o;void 0===e&&(e=null);for(var n=t.text.toUpperCase(),a=t.style,s=a.alignment,g=t.containerSize,f=(e||g).width,v=(e||g).height,w=f/v,L=a.spacing*this.spacingScalar,k=a.tracking*this.trackingScalar,A=a.font.fontData,C=h.getTypographicBoundingRatiosOfString(n,A,!1),x=0,T=0,I=0,B=0,D=[],z=(o=t.preferredFontSize)||null!=o?o:32,M=r.opt(r.opt(a.characterStyles[m.TypeLockupController.HIGHLIGHT_STYLE],(function(t){return t.font})),(function(t){return t.fontData}))||A,F=y.TypeLockupUtils.getCharFontAdjust(a,C.hasUppercase,!1),b=z*F,W=[],H=r.clone(l.GraphemeUtils.splitGraphemes(n)),E=r.iter(r.toSequence(H));!E.done;E.next()){var O=E.value,_=O.offset,G=O.element,P=y.TypeLockupUtils.isWhiteSpace(G);if(P||(I+=1),T<this.maxLetterLayoutGraphemeCount){if(P){if("\n"==G){var U=B;B=_-x,D.push(B-U)}x+=1}else T+=1;var N=this.getCharacterStyle(r.clone(t.characterStyleRanges),_,_+1)==m.TypeLockupController.HIGHLIGHT_STYLE,V=N?M:A,j=N?b:z,Y=u.Host.textModelUtils.measureBoundsForLayout(G,V,j,0);W.push(Y.width)}}D.push(T-B);var X,Z=Math.max(z,b)*C.heightRatio,J=r.max(W)/Z,q=(J+k)/(1+L);X=null!=t.preferredFontSize?r.toInt(Math.floor(f/(r.max(W)+k*Z))):c.GridArrangementUtils.getArrangement(w,q,T,r.clone(D)).numCols;for(var K=new p.LockupRowInfo,Q=[],$=r.iter(r.toSequence(H));!$.done;$.next()){var tt=$.value;if(_=tt.offset,G=tt.element,y.TypeLockupUtils.isWhiteSpace(G))"\n"==G&&(this.commitRow(Q,K,X,s),K=new p.LockupRowInfo);else{var et=(J-W[_]/Z)/2,ot=new d.LockupWordInfo(G,J,0,this.getCharacterStyle(r.clone(t.characterStyleRanges),_,_+1),1,!1,!0,new R.TextRange(_,_+1),new S.TheoSize(et,0));if(K.words.length==X&&(this.commitRow(Q,K,X,s),K=new p.LockupRowInfo),K.addWord(ot),0==(T-=1))break}}return this.commitRow(Q,K,X,s),i.WireframeLayout.init_d3ad(A,C,F,f,v,w,k,L,r.clone(Q),X,I)},commitRow:function(t,e,o,n){var a=r.toDouble(o-e.words.length);n==g.LockupAlignment.Right?e.colOffsetLeft=a:n==g.LockupAlignment.Center&&(e.colOffsetLeft=a/2,e.colOffsetRight=a/2),t.push(e)},calculateTracking:function(t,e){var o=this.getWireframeLayout(t,e),n=r.clone(o.rows);if(0==n.length)return t.style.tracking;var a=this.getCombinedAspectRatio(r.clone(n),0,o.verticalPaddingRatio),i=o.constraintHeight*a,s=t.containerSize.width;if(i<s){var c=r.toDouble(n.length);return(s-i)/r.toDouble(o.numCols)/(o.constraintHeight/c/(1+o.verticalPaddingRatio))/this.trackingScalar}return-i},calculateLeading:function(t,e){var o=this.getWireframeLayout(t,e),n=r.clone(o.rows);if(0==n.length)return t.style.spacing;var a=this.getCombinedAspectRatio(r.clone(n),o.horizontalPaddingRatio,0),i=o.constraintWidth/a,s=t.containerSize.height;if(i<s){var c=r.toDouble(n.length),l=i/c;return(s/c-l)/l/this.spacingScalar}return-i},adjustSizeForLeading:function(t,e,o,n){if(0==!e.items.length){var a=n-o,i=r.first(e.items);return new S.TheoSize(0,r.toDouble(e.numberOfLines)*i.rowPointSize*i.typographicBoundingRatios.heightRatio*a*this.spacingScalar)}return S.TheoSize.Zero},adjustSizeForTracking:function(t,e,o,n){var a=this.getNumColsInLayout(e);if(a>0){var i=n-o,s=r.first(e.items);return new S.TheoSize(s.rowPointSize*s.typographicBoundingRatios.heightRatio*i*this.trackingScalar*r.toDouble(a),0)}return S.TheoSize.Zero},getNumColsInLayout:function(t){for(var e=0,o=0,n=-1,a=r.iter(t.items);!a.done;a.next()){var i=a.value;n!=i.rowIndex?(n=i.rowIndex,o=1):o+=1,e=Math.max(e,o)}return e},calculateRowAspectRatio:function(t,e,o,n){var a=r.toDouble(t.words.length),i=a+r.toDouble(n),s=t.aspectRatio*i/a;return(s+=i*e)/(1+o)},getWidestRowAndAspectRatio:function(t,e,o){for(var n,a=0,i=r.iter(t);!i.done;i.next()){var s=i.value,c=this.calculateRowAspectRatio(s,e,o,r.toInt(s.colOffsetLeft+s.colOffsetRight));c>a&&(n=s,a=c)}return{row:n,aspectRatio:a}},getCombinedAspectRatio:function(t,e,o){return this.getWidestRowAndAspectRatio(r.clone(t),e,o).aspectRatio/r.toDouble(t.length)},annotate:function(t,e,o,n){var a=l.GraphemeUtils.splitGraphemes(t).filter((function(t){return!y.TypeLockupUtils.isWhiteSpace(t)}),this);return this.getAnnotations(a.length,n)},getAnnotations:function(t,e){return e<t?[new s.Annotation(s.AnnotationID.TextTruncated,s.AnnotationPriority.High)]:e>this.maxLetterLayoutRecommendedGraphemeCount?[new s.Annotation(s.AnnotationID.TooMuchGridText)]:null}}}),n),i.WireframeLayout=(a=function(){},r.defineClass({name:"WireframeLayout",ctor:a,props:{init_d3ad:function(t,e,o,n,a,i,s,c,l,u,h){this.font=t,this.typographicBoundingRatios=e,this.charFontAdjustRatio=o,this.constraintWidth=n,this.constraintHeight=a,this.constraintAspectRatio=i,this.horizontalPaddingRatio=s,this.verticalPaddingRatio=c,this.rows=r.clone(l),this.numCols=u,this.renderableItemCount=h},init_implicit:function(t,e,o,n,a,i,s,c,l,u,h){this.font=t,this.typographicBoundingRatios=e,this.charFontAdjustRatio=o,this.constraintWidth=n,this.constraintHeight=a,this.constraintAspectRatio=i,this.horizontalPaddingRatio=s,this.verticalPaddingRatio=c,this.rows=r.clone(l),this.numCols=u,this.renderableItemCount=h}}}),a)},fGVU:function(t,e,o){var n,a=e,i=o("oAGj"),r=o("NkBu"),s=o("RkYL"),c=o("sW6f"),l=o("zjod");a.VideoController=(n=function(t,e,o){r.ImageController.call(this,t,e,o)},i.defineClass({name:"VideoController",ctor:n,superName:"ImageController",statics:{KIND:{get:function(){return"video"}}},props:{replaceable:{get:function(){return!0}},duplicatable:{get:function(){return!1}},canMultiSelect:{get:function(){return!1}},contentNode:{get:function(){var t=i.opt(i.as(this.forma,l.VideoForma),(function(t){return t.videoContentID}));return null==t?null:i.as(i.opt(i.opt(this.forma,(function(t){return t.page.document})),(function(e){return e.content.nodeByID(t)})),c.VideoContentNode)}},videoDuration:{get:function(){return i.opt(this.contentNode,(function(t){return t.duration}))||s.TheoTime.Zero}}}}),n)}}]);
//# sourceMappingURL=vendors_npm_spark_eed0fd33-2fdec14f.js.map