(window.webpackJsonptheoWebApp=window.webpackJsonptheoWebApp||[]).push([[37],{"35Q0":function(e,t,n){var i,o,a,r,s=t,l=n("oAGj"),u=n("cZuM"),c=n("gXiO"),h=n("iCxV"),g=n("IUM5"),d=n("c+uM"),p=n("oKI3");s.TAG_SHAPE_ID="shape-id",s.ShapeCategory=l.defineEnum("ShapeCategory",{None:0,Circle:1,Square:2,Social:3,Cutout:4,Banner:5,Decorative:6,Other:7,Avoid:8}),s.TagGroup=l.defineEnum("TagGroup",{none:0,banner:1,circle:2,square:3,other:4,decorative:5,unused:6}),s.TheoShape=(i=function(){},l.defineClass({name:"TheoShape",ctor:i,props:{init_f4eb:function(e,t,n,i,o,a,r,s,u,c,h,g,d,p,S){void 0===p&&(p=!1),void 0===S&&(S=!1),this.id=e,this.name=t,this.deprecated=n,this.filled=i,this.centered=o,this.alignmentEdges=a,this.formality=u,this.drama=c,this.maxScale=h,this.minAspect=g,this.maxAspect=d,this.category=r,this.tags=l.clone(s),this.clockwise=p,this.premium=S},init_implicit:function(e,t,n,i,o,a,r,s,u,c,h,g,d,p,S){this.id=e,this.name=t,this.deprecated=n,this.filled=i,this.centered=o,this.formality=a,this.drama=r,this.alignmentEdges=s,this.category=u,this.tags=l.clone(c),this.clockwise=h,this.premium=g,this.maxScale=d,this.maxAspect=p,this.minAspect=S}}}),i),s.ShapeLibraryDataStructures=(o=function(){this.nonSvgBackingShapes=[s.TheoShape.init_f4eb("none","None",!1,!1,!0,u.AlignmentEdges.All,s.ShapeCategory.None,[s.TagGroup.none],5,1,1,0,100),s.TheoShape.init_f4eb("row","Row",!1,!0,!1,u.AlignmentEdges.All,s.ShapeCategory.None,[s.TagGroup.none],5,2,1,0,100),s.TheoShape.init_f4eb("bannerHorizontal","Horizontal Banner",!1,!0,!1,u.AlignmentEdges.All,s.ShapeCategory.Banner,[s.TagGroup.unused],5,2,1,1,100),s.TheoShape.init_f4eb("bannerVertical","Vertical Banner",!1,!0,!1,u.AlignmentEdges.All,s.ShapeCategory.Banner,[s.TagGroup.unused],5,2,1,0,1),s.TheoShape.init_f4eb("knockout","Text Knockout",!1,!0,!1,u.AlignmentEdges.All,s.ShapeCategory.Cutout,[s.TagGroup.unused],5,2,1,0,100)],this.svgBackingShapes=[s.TheoShape.init_f4eb("circle","Circle",!0,!0,!0,u.AlignmentEdges.All,s.ShapeCategory.Circle,[s.TagGroup.unused],5,1,.5,.5,2),s.TheoShape.init_f4eb("circle1","Circle1",!0,!1,!0,u.AlignmentEdges.All,s.ShapeCategory.Circle,[s.TagGroup.unused],5,6,.5,.5,2),s.TheoShape.init_f4eb("circle2","Circle2",!0,!1,!0,u.AlignmentEdges.All,s.ShapeCategory.Circle,[s.TagGroup.unused],7,6,.5,.5,2),s.TheoShape.init_f4eb("circle3","Circle3",!0,!1,!0,u.AlignmentEdges.All,s.ShapeCategory.Circle,[s.TagGroup.unused],8,6,.5,.5,2),s.TheoShape.init_f4eb("circle4","Circle4",!0,!1,!0,u.AlignmentEdges.All,s.ShapeCategory.Circle,[s.TagGroup.unused],1,6,.5,.5,2),s.TheoShape.init_f4eb("circle5","Circle5",!0,!1,!0,u.AlignmentEdges.All,s.ShapeCategory.Circle,[s.TagGroup.unused],2,8,.5,.5,2),s.TheoShape.init_f4eb("circle6","Circle6",!0,!1,!0,u.AlignmentEdges.All,s.ShapeCategory.Circle,[s.TagGroup.unused],7,8,.5,.5,2),s.TheoShape.init_f4eb("circle8","Circle8",!0,!1,!0,u.AlignmentEdges.All,s.ShapeCategory.Circle,[s.TagGroup.unused],1,10,.5,.5,2),s.TheoShape.init_f4eb("rect1","Rect1",!0,!1,!1,u.AlignmentEdges.All,s.ShapeCategory.None,[s.TagGroup.unused],5,5,.5,0,100),s.TheoShape.init_f4eb("rect2","Rect2",!0,!1,!1,u.AlignmentEdges.All,s.ShapeCategory.None,[s.TagGroup.unused],5,5,.5,0,100),s.TheoShape.init_f4eb("rect3-9sliced","Rect3-9",!0,!1,!1,u.AlignmentEdges.All,s.ShapeCategory.None,[s.TagGroup.unused],5,5,.5,0,100),s.TheoShape.init_f4eb("rect3","Rect3",!0,!1,!1,u.AlignmentEdges.All,s.ShapeCategory.None,[s.TagGroup.unused],5,5,.5,0,100),s.TheoShape.init_f4eb("rect4","Rect4",!0,!1,!1,u.AlignmentEdges.All,s.ShapeCategory.None,[s.TagGroup.unused],5,5,.5,0,100),s.TheoShape.init_f4eb("rect5","Rect5",!0,!1,!1,u.AlignmentEdges.All,s.ShapeCategory.None,[s.TagGroup.unused],5,5,.5,0,100),s.TheoShape.init_f4eb("rect6","Rect6",!0,!1,!1,u.AlignmentEdges.All,s.ShapeCategory.None,[s.TagGroup.unused],5,5,.5,0,100),s.TheoShape.init_f4eb("ornamental_003","Circle",!0,!1,!0,u.AlignmentEdges.All,s.ShapeCategory.None,[s.TagGroup.unused],6,7,.5,0,100),s.TheoShape.init_f4eb("shape_001","Circle",!0,!0,!0,u.AlignmentEdges.All,s.ShapeCategory.None,[s.TagGroup.unused],5,3,.5,0,100),s.TheoShape.init_f4eb("shape_004","Tag",!0,!0,!0,u.AlignmentEdges.All,s.ShapeCategory.None,[s.TagGroup.unused],5,2,.5,0,100),s.TheoShape.init_f4eb("shape_005","Gift",!0,!0,!0,u.AlignmentEdges.All,s.ShapeCategory.None,[s.TagGroup.unused],5,2,.5,0,100),s.TheoShape.init_f4eb("shape_006","Calendar",!0,!0,!0,u.AlignmentEdges.All,s.ShapeCategory.None,[s.TagGroup.unused],5,2,.5,0,100),s.TheoShape.init_f4eb("shape_007","Circle",!0,!0,!0,u.AlignmentEdges.All,s.ShapeCategory.None,[s.TagGroup.unused],3,3,.5,0,100),s.TheoShape.init_f4eb("shape_008","Circle",!0,!0,!0,u.AlignmentEdges.All,s.ShapeCategory.None,[s.TagGroup.unused],3,3,.5,0,100),s.TheoShape.init_f4eb("shape_009","Circle",!0,!0,!0,u.AlignmentEdges.All,s.ShapeCategory.None,[s.TagGroup.unused],3,3,.5,0,100),s.TheoShape.init_f4eb("shape_011","Shield",!0,!0,!0,u.AlignmentEdges.All,s.ShapeCategory.None,[s.TagGroup.unused],5,3,.5,0,100),s.TheoShape.init_f4eb("circle_001","Circle",!1,!0,!0,u.AlignmentEdges.All,s.ShapeCategory.Circle,[s.TagGroup.circle],5,1,.6,.5,2),s.TheoShape.init_f4eb("circle_002","Circle",!1,!0,!0,u.AlignmentEdges.All,s.ShapeCategory.Circle,[s.TagGroup.circle],5,6,.6,.5,2,!0),s.TheoShape.init_f4eb("circle_003","Circle",!1,!0,!0,u.AlignmentEdges.All,s.ShapeCategory.Circle,[s.TagGroup.circle],7,6,.6,.5,2,!0),s.TheoShape.init_f4eb("circle_004","Circle",!1,!0,!0,u.AlignmentEdges.All,s.ShapeCategory.Circle,[s.TagGroup.decorative],8,6,.6,.5,2,!0),s.TheoShape.init_f4eb("circle_005","Circle",!1,!1,!0,u.AlignmentEdges.All,s.ShapeCategory.Decorative,[s.TagGroup.decorative],1,6,.6,.5,2),s.TheoShape.init_f4eb("circle_006","Circle",!1,!1,!0,u.AlignmentEdges.All,s.ShapeCategory.Decorative,[s.TagGroup.decorative],2,8,.6,.5,2),s.TheoShape.init_f4eb("circle_007","Circle",!1,!1,!0,u.AlignmentEdges.All,s.ShapeCategory.Decorative,[s.TagGroup.decorative],7,8,.6,.5,2),s.TheoShape.init_f4eb("circle_008","Circle",!1,!1,!0,u.AlignmentEdges.All,s.ShapeCategory.Decorative,[s.TagGroup.decorative],1,10,.6,.5,2),s.TheoShape.init_f4eb("square_001","Circle",!1,!0,!0,u.AlignmentEdges.All,s.ShapeCategory.Square,[s.TagGroup.square],5,1,.7,0,100),s.TheoShape.init_f4eb("square_002","Circle",!1,!1,!0,u.AlignmentEdges.All,s.ShapeCategory.Cutout,[s.TagGroup.square],5,1,.7,0,100),s.TheoShape.init_f4eb("square_003","Circle",!1,!0,!0,u.AlignmentEdges.All,s.ShapeCategory.Square,[s.TagGroup.decorative],7,5,.7,0,100,!0),s.TheoShape.init_f4eb("square_004","Circle",!1,!0,!0,u.AlignmentEdges.All,s.ShapeCategory.Square,[s.TagGroup.square,s.TagGroup.other],4,4,.7,0,100),s.TheoShape.init_f4eb("square_005","Circle",!1,!0,!0,u.AlignmentEdges.All,s.ShapeCategory.Square,[s.TagGroup.other,s.TagGroup.banner],4,8,.7,0,100),s.TheoShape.init_f4eb("buttonoutline","Circle",!1,!1,!0,u.AlignmentEdges.All,s.ShapeCategory.Cutout,[s.TagGroup.other],5,5,.7,0,100),s.TheoShape.init_f4eb("button","Circle",!1,!0,!0,u.AlignmentEdges.All,s.ShapeCategory.Other,[s.TagGroup.other],5,5,.7,0,100),s.TheoShape.init_f4eb("diamond_001","Circle",!1,!0,!0,u.AlignmentEdges.All,s.ShapeCategory.Avoid,[s.TagGroup.other],5,8,.6,.25,4),s.TheoShape.init_f4eb("diamond_002","Circle",!1,!1,!0,u.AlignmentEdges.All,s.ShapeCategory.Cutout,[s.TagGroup.other],5,9,.6,.25,4),s.TheoShape.init_f4eb("ribbon_h_001","Circle",!1,!0,!0,u.AlignmentEdges.All,s.ShapeCategory.Banner,[s.TagGroup.banner],5,5,.8,3,100),s.TheoShape.init_f4eb("ribbon_h_002","Circle",!1,!1,!0,u.AlignmentEdges.All,s.ShapeCategory.Cutout,[s.TagGroup.banner],5,6,.8,3,100),s.TheoShape.init_f4eb("ribbon_h_003","Circle",!1,!0,!0,u.AlignmentEdges.All,s.ShapeCategory.Banner,[s.TagGroup.banner],5,4,.8,3,100),s.TheoShape.init_f4eb("ribbon_h_004","Circle",!1,!0,!0,u.AlignmentEdges.All,s.ShapeCategory.Banner,[s.TagGroup.banner],5,4,.8,3,100,!0),s.TheoShape.init_f4eb("ribbon_h_005","Circle",!1,!0,!0,u.AlignmentEdges.All,s.ShapeCategory.Banner,[s.TagGroup.banner],5,6,.8,3,100),s.TheoShape.init_f4eb("ornamental_001","Circle",!1,!1,!0,u.AlignmentEdges.TopAndBottom,s.ShapeCategory.Decorative,[s.TagGroup.decorative],3,4,.7,0,100),s.TheoShape.init_f4eb("ornamental_002","Circle",!1,!1,!0,u.AlignmentEdges.All,s.ShapeCategory.Decorative,[s.TagGroup.decorative],8,8,.7,0,100,!0),s.TheoShape.init_f4eb("shape_002","Circle",!1,!0,!0,u.AlignmentEdges.All,s.ShapeCategory.Avoid,[s.TagGroup.decorative],5,3,.7,0,100,!0),s.TheoShape.init_f4eb("shape_003","VerticalBanner",!1,!0,!0,u.AlignmentEdges.All,s.ShapeCategory.Avoid,[s.TagGroup.decorative],5,3,.5,0,1),s.TheoShape.init_f4eb("shape_010","Hexagon",!1,!0,!0,u.AlignmentEdges.All,s.ShapeCategory.Avoid,[s.TagGroup.square],9,6,.7,0,100),s.TheoShape.init_f4eb("shape_013","Speech Bubble",!1,!0,!0,u.AlignmentEdges.All,s.ShapeCategory.Avoid,[s.TagGroup.decorative],5,3,.4,.5,2,!0),s.TheoShape.init_f4eb("divider_001","Circle",!1,!1,!0,u.AlignmentEdges.All,s.ShapeCategory.Cutout,[s.TagGroup.other],5,5,.8,0,100),s.TheoShape.init_f4eb("divider_002","Circle",!1,!1,!0,u.AlignmentEdges.All,s.ShapeCategory.Cutout,[s.TagGroup.other],1,2,.5,0,100),s.TheoShape.init_f4eb("divider_003","Circle",!1,!1,!0,u.AlignmentEdges.All,s.ShapeCategory.Cutout,[s.TagGroup.other],5,1,.8,0,100),s.TheoShape.init_f4eb("Social_Facebook","Circle",!1,!1,!1,u.AlignmentEdges.LeftAndTopAndBottom,s.ShapeCategory.Social,[s.TagGroup.unused],5,5,.5,99,100),s.TheoShape.init_f4eb("Social_Instagram","Circle",!1,!1,!1,u.AlignmentEdges.LeftAndTopAndBottom,s.ShapeCategory.Social,[s.TagGroup.unused],5,5,.5,99,100),s.TheoShape.init_f4eb("Social_Pinterest","Circle",!1,!1,!1,u.AlignmentEdges.LeftAndTopAndBottom,s.ShapeCategory.Social,[s.TagGroup.unused],5,5,.5,99,100),s.TheoShape.init_f4eb("Social_Twitter","Circle",!1,!1,!1,u.AlignmentEdges.LeftAndTopAndBottom,s.ShapeCategory.Social,[s.TagGroup.unused],5,5,.5,99,100),s.TheoShape.init_f4eb("Social_GPlus","Circle",!1,!1,!1,u.AlignmentEdges.LeftAndTopAndBottom,s.ShapeCategory.Social,[s.TagGroup.unused],5,5,.5,99,100),s.TheoShape.init_f4eb("Social_Linkedin","Circle",!1,!1,!1,u.AlignmentEdges.LeftAndTopAndBottom,s.ShapeCategory.Social,[s.TagGroup.unused],5,5,.5,99,100),s.TheoShape.init_f4eb("Social_Periscope","Circle",!1,!1,!1,u.AlignmentEdges.LeftAndTopAndBottom,s.ShapeCategory.Social,[s.TagGroup.unused],5,5,.5,99,100),s.TheoShape.init_f4eb("Social_Snapchat","Circle",!1,!1,!1,u.AlignmentEdges.LeftAndTopAndBottom,s.ShapeCategory.Social,[s.TagGroup.unused],5,5,.5,99,100),s.TheoShape.init_f4eb("Social_Tumblr","Circle",!1,!1,!1,u.AlignmentEdges.LeftAndTopAndBottom,s.ShapeCategory.Social,[s.TagGroup.unused],5,5,.5,99,100),s.TheoShape.init_f4eb("Social_Youtube","Circle",!1,!1,!1,u.AlignmentEdges.LeftAndTopAndBottom,s.ShapeCategory.Social,[s.TagGroup.unused],5,5,.5,99,100),s.TheoShape.init_f4eb("inline_001","Inline",!1,!1,!0,u.AlignmentEdges.All,s.ShapeCategory.None,[s.TagGroup.unused],1,5,.5,0,100,void 0,!0),s.TheoShape.init_f4eb("inline_002","Inline",!1,!1,!0,u.AlignmentEdges.TopAndBottom,s.ShapeCategory.None,[s.TagGroup.unused],1,5,.5,0,100,void 0,!0),s.TheoShape.init_f4eb("inline_003","Inline",!1,!1,!0,u.AlignmentEdges.All,s.ShapeCategory.None,[s.TagGroup.unused],1,5,.5,0,100,void 0,!0),s.TheoShape.init_f4eb("inline_004","Inline",!1,!1,!0,u.AlignmentEdges.All,s.ShapeCategory.None,[s.TagGroup.unused],1,5,.5,0,100,void 0,!0),s.TheoShape.init_f4eb("inline_005","Inline",!1,!0,!0,u.AlignmentEdges.All,s.ShapeCategory.None,[s.TagGroup.unused],1,5,.5,0,100,!0,!0),s.TheoShape.init_f4eb("inline_006","Inline",!1,!0,!0,u.AlignmentEdges.All,s.ShapeCategory.None,[s.TagGroup.unused],1,5,.5,0,100,!0,!0),s.TheoShape.init_f4eb("pacific_001","Inline",!1,!1,!0,u.AlignmentEdges.All,s.ShapeCategory.None,[s.TagGroup.unused],1,5,.5,0,100,void 0,!0),s.TheoShape.init_f4eb("pacific_002","Inline",!1,!1,!0,u.AlignmentEdges.All,s.ShapeCategory.None,[s.TagGroup.unused],1,5,.5,0,100,void 0,!0),s.TheoShape.init_f4eb("pacific_003","Inline",!1,!1,!0,u.AlignmentEdges.All,s.ShapeCategory.None,[s.TagGroup.unused],1,5,.5,0,100,void 0,!0),s.TheoShape.init_f4eb("pacific_004","Inline",!1,!1,!0,u.AlignmentEdges.All,s.ShapeCategory.None,[s.TagGroup.unused],1,5,.5,0,100,void 0,!0),s.TheoShape.init_f4eb("pacific_005","Inline",!1,!0,!0,u.AlignmentEdges.All,s.ShapeCategory.None,[s.TagGroup.unused],1,5,.5,0,100,!0,!0),s.TheoShape.init_f4eb("pacific_006","Inline",!1,!0,!0,u.AlignmentEdges.All,s.ShapeCategory.None,[s.TagGroup.unused],1,5,.5,0,100,!0,!0)],this.seperatorShapes=[s.TheoShape.init_f4eb("square_001","Circle",!1,!0,!0,u.AlignmentEdges.All,s.ShapeCategory.Square,[s.TagGroup.square],5,1,.7,0,100),s.TheoShape.init_f4eb("circle_001","Circle",!1,!0,!0,u.AlignmentEdges.All,s.ShapeCategory.Circle,[s.TagGroup.circle],5,1,.6,.5,2),s.TheoShape.init_f4eb("pacific_006","Inline",!1,!0,!0,u.AlignmentEdges.All,s.ShapeCategory.None,[s.TagGroup.unused],1,5,.5,0,100,!0,!0)],this.DisplayOrderForCategories=[s.ShapeLibrary.CategoryBasic,s.ShapeLibrary.CategoryBanner,s.ShapeLibrary.CategoryDecorative,s.ShapeLibrary.CategorySocial],this.DisplayOrderForShapesByCategory={BASIC:["circle_001","circle_002","circle_003","shape_010","diamond_001","diamond_002","square_001","square_002","square_004","buttonoutline","button","square_005","divider_001","divider_002"],BANNER:["ribbon_h_001","ribbon_h_002","ribbon_h_003","ribbon_h_004","ribbon_h_005","shape_003"],DECORATIVE:["circle_004","circle_005","circle_006","circle_007","circle_008","ornamental_001","ornamental_002","square_003","shape_002","shape_013","inline_001","inline_002","inline_003","inline_004","inline_005","inline_006","pacific_001","pacific_002","pacific_003","pacific_004","pacific_005","pacific_006"],SOCIAL:["Social_Facebook","Social_Instagram","Social_Pinterest","Social_Twitter","Social_Youtube","Social_Snapchat","Social_Linkedin","Social_Tumblr","Social_GPlus","Social_Periscope"]},this.DisplayOrderForCharStyleShapesByCategory={BASIC:["square_002","square_004","buttonoutline","button","square_005","divider_001","divider_002","pacific_006"],BANNER:["ribbon_h_001","ribbon_h_002","ribbon_h_003","ribbon_h_004","ribbon_h_005"],DECORATIVE:["circle_001","circle_002","circle_003","shape_010","diamond_001","diamond_002","square_001","circle_004","circle_005","circle_006","circle_007","circle_008","ornamental_002","square_003","inline_001","inline_002","inline_003","inline_004","inline_005","inline_006","pacific_001","pacific_002","pacific_003","pacific_004","pacific_005"],SOCIAL:[]},this.DisplayOrderForSmallSetCharStyleShapesByCategory={BASIC:["square_002","square_004","buttonoutline","button","square_005","divider_001","divider_002","pacific_006"],BANNER:["ribbon_h_001","ribbon_h_002","ribbon_h_003","ribbon_h_004","ribbon_h_005"],DECORATIVE:["square_003","inline_001","inline_003","inline_005","inline_006","pacific_001","pacific_002","ornamental_002","diamond_001","diamond_002","square_001","circle_008"],SOCIAL:[]},this.DisplayOrderForLetterGridShapesByCategory={BASIC:["circle_001","circle_002","circle_003","shape_010","diamond_001","diamond_002","square_001","square_002","square_004","square_005","divider_001","divider_002"],BANNER:[],DECORATIVE:["circle_004","circle_005","pacific_006"],SOCIAL:[]},this.DisplayOrderForSymmetricPathsShapesByCategory={BASIC:["circle_001","circle_002","circle_003","shape_010","diamond_001","diamond_002","square_001","square_002","square_004","square_005","divider_001","divider_002"],BANNER:["ribbon_h_001","ribbon_h_002","ribbon_h_003","ribbon_h_004","ribbon_h_005","shape_003"],DECORATIVE:["circle_004","circle_005","circle_006","circle_007","circle_008","ornamental_001","ornamental_002","square_003","shape_002","shape_013","inline_001","inline_002","inline_003","inline_004","inline_005","inline_006","pacific_001","pacific_002","pacific_003","pacific_004","pacific_005","pacific_006"],SOCIAL:["Social_Facebook","Social_Instagram","Social_Pinterest","Social_Twitter","Social_Youtube","Social_Snapchat","Social_Linkedin","Social_Tumblr","Social_GPlus","Social_Periscope"]},this.DisplayOrderForAsymmetricPathsShapesByCategory={BASIC:["shape_010","diamond_001","diamond_002","square_001","square_002","square_004","square_005","divider_001","divider_002"],BANNER:["ribbon_h_001","ribbon_h_002","ribbon_h_003","ribbon_h_004","ribbon_h_005","shape_003"],DECORATIVE:["ornamental_001","ornamental_002","square_003","shape_002","shape_013","inline_001","inline_002","inline_003","inline_004","inline_005","inline_006","pacific_001","pacific_002","pacific_003","pacific_004","pacific_005","pacific_006"],SOCIAL:["Social_Facebook","Social_Instagram","Social_Pinterest","Social_Twitter","Social_Youtube","Social_Snapchat","Social_Linkedin","Social_Tumblr","Social_GPlus","Social_Periscope"]},this.DisplayOrderForAutoLayoutShapesByCategory={BASIC:["square_001","square_002","square_004","square_005","divider_001","divider_002"],BANNER:["ribbon_h_001","ribbon_h_002","ribbon_h_003","ribbon_h_004","ribbon_h_005","shape_003"],DECORATIVE:["ornamental_001","ornamental_002","square_003","shape_002","shape_013","inline_001","inline_002","inline_003","inline_004","inline_005","inline_006","pacific_001","pacific_002","pacific_003","pacific_004","pacific_005","pacific_006"],SOCIAL:[]},this.NonSuggestableBackingShapes=["Social_Facebook","Social_Instagram","Social_Pinterest","Social_Twitter","Social_Youtube","Social_Snapchat","Social_Linkedin","Social_Tumblr","Social_GPlus","Social_Periscope","shape_002","shape_003","shape_013","ornamental_001","knockout"],this.LockupBackingShapeIDs=[],this.BrowsableBackingShapes=[],this.FilledBackingShapes=[],this.shapeDictionary={},this.nonSvgBackingShapeIDs=[]},l.defineClass({name:"ShapeLibraryDataStructures",ctor:o,props:{init_d41d:function(){this.FilledBackingShapes.push(s.ShapeLibrary.Square),this.FilledBackingShapes.push(s.ShapeLibrary.Circle);for(var e=l.iter(this.svgBackingShapes);!e.done;e.next()){var t=e.value;this.LockupBackingShapeIDs.push(t.id),this.shapeDictionary[t.id]=t,t.deprecated||(this.BrowsableBackingShapes.push(t.id),t.filled&&this.FilledBackingShapes.push(t.id))}for(var n=l.iter(this.nonSvgBackingShapes);!n.done;n.next())t=n.value,this.shapeDictionary[t.id]=t,this.nonSvgBackingShapeIDs.push(t.id);this.ShapeIDToCategory={};for(var i=l.iter(this.DisplayOrderForCategories);!i.done;i.next())for(var o=i.value,a=l.iter(this.DisplayOrderForShapesByCategory[o]);!a.done;a.next()){var r=a.value;this.ShapeIDToCategory[r]=o}},init_implicit:function(e,t,n,i,o,a,r,c,h,g,d,p,S,_,m,f,C,y){void 0===e&&(e=[s.TheoShape.init_f4eb("none","None",!1,!1,!0,u.AlignmentEdges.All,s.ShapeCategory.None,[s.TagGroup.none],5,1,1,0,100),s.TheoShape.init_f4eb("row","Row",!1,!0,!1,u.AlignmentEdges.All,s.ShapeCategory.None,[s.TagGroup.none],5,2,1,0,100),s.TheoShape.init_f4eb("bannerHorizontal","Horizontal Banner",!1,!0,!1,u.AlignmentEdges.All,s.ShapeCategory.Banner,[s.TagGroup.unused],5,2,1,1,100),s.TheoShape.init_f4eb("bannerVertical","Vertical Banner",!1,!0,!1,u.AlignmentEdges.All,s.ShapeCategory.Banner,[s.TagGroup.unused],5,2,1,0,1),s.TheoShape.init_f4eb("knockout","Text Knockout",!1,!0,!1,u.AlignmentEdges.All,s.ShapeCategory.Cutout,[s.TagGroup.unused],5,2,1,0,100)]),void 0===t&&(t=[s.TheoShape.init_f4eb("circle","Circle",!0,!0,!0,u.AlignmentEdges.All,s.ShapeCategory.Circle,[s.TagGroup.unused],5,1,.5,.5,2),s.TheoShape.init_f4eb("circle1","Circle1",!0,!1,!0,u.AlignmentEdges.All,s.ShapeCategory.Circle,[s.TagGroup.unused],5,6,.5,.5,2),s.TheoShape.init_f4eb("circle2","Circle2",!0,!1,!0,u.AlignmentEdges.All,s.ShapeCategory.Circle,[s.TagGroup.unused],7,6,.5,.5,2),s.TheoShape.init_f4eb("circle3","Circle3",!0,!1,!0,u.AlignmentEdges.All,s.ShapeCategory.Circle,[s.TagGroup.unused],8,6,.5,.5,2),s.TheoShape.init_f4eb("circle4","Circle4",!0,!1,!0,u.AlignmentEdges.All,s.ShapeCategory.Circle,[s.TagGroup.unused],1,6,.5,.5,2),s.TheoShape.init_f4eb("circle5","Circle5",!0,!1,!0,u.AlignmentEdges.All,s.ShapeCategory.Circle,[s.TagGroup.unused],2,8,.5,.5,2),s.TheoShape.init_f4eb("circle6","Circle6",!0,!1,!0,u.AlignmentEdges.All,s.ShapeCategory.Circle,[s.TagGroup.unused],7,8,.5,.5,2),s.TheoShape.init_f4eb("circle8","Circle8",!0,!1,!0,u.AlignmentEdges.All,s.ShapeCategory.Circle,[s.TagGroup.unused],1,10,.5,.5,2),s.TheoShape.init_f4eb("rect1","Rect1",!0,!1,!1,u.AlignmentEdges.All,s.ShapeCategory.None,[s.TagGroup.unused],5,5,.5,0,100),s.TheoShape.init_f4eb("rect2","Rect2",!0,!1,!1,u.AlignmentEdges.All,s.ShapeCategory.None,[s.TagGroup.unused],5,5,.5,0,100),s.TheoShape.init_f4eb("rect3-9sliced","Rect3-9",!0,!1,!1,u.AlignmentEdges.All,s.ShapeCategory.None,[s.TagGroup.unused],5,5,.5,0,100),s.TheoShape.init_f4eb("rect3","Rect3",!0,!1,!1,u.AlignmentEdges.All,s.ShapeCategory.None,[s.TagGroup.unused],5,5,.5,0,100),s.TheoShape.init_f4eb("rect4","Rect4",!0,!1,!1,u.AlignmentEdges.All,s.ShapeCategory.None,[s.TagGroup.unused],5,5,.5,0,100),s.TheoShape.init_f4eb("rect5","Rect5",!0,!1,!1,u.AlignmentEdges.All,s.ShapeCategory.None,[s.TagGroup.unused],5,5,.5,0,100),s.TheoShape.init_f4eb("rect6","Rect6",!0,!1,!1,u.AlignmentEdges.All,s.ShapeCategory.None,[s.TagGroup.unused],5,5,.5,0,100),s.TheoShape.init_f4eb("ornamental_003","Circle",!0,!1,!0,u.AlignmentEdges.All,s.ShapeCategory.None,[s.TagGroup.unused],6,7,.5,0,100),s.TheoShape.init_f4eb("shape_001","Circle",!0,!0,!0,u.AlignmentEdges.All,s.ShapeCategory.None,[s.TagGroup.unused],5,3,.5,0,100),s.TheoShape.init_f4eb("shape_004","Tag",!0,!0,!0,u.AlignmentEdges.All,s.ShapeCategory.None,[s.TagGroup.unused],5,2,.5,0,100),s.TheoShape.init_f4eb("shape_005","Gift",!0,!0,!0,u.AlignmentEdges.All,s.ShapeCategory.None,[s.TagGroup.unused],5,2,.5,0,100),s.TheoShape.init_f4eb("shape_006","Calendar",!0,!0,!0,u.AlignmentEdges.All,s.ShapeCategory.None,[s.TagGroup.unused],5,2,.5,0,100),s.TheoShape.init_f4eb("shape_007","Circle",!0,!0,!0,u.AlignmentEdges.All,s.ShapeCategory.None,[s.TagGroup.unused],3,3,.5,0,100),s.TheoShape.init_f4eb("shape_008","Circle",!0,!0,!0,u.AlignmentEdges.All,s.ShapeCategory.None,[s.TagGroup.unused],3,3,.5,0,100),s.TheoShape.init_f4eb("shape_009","Circle",!0,!0,!0,u.AlignmentEdges.All,s.ShapeCategory.None,[s.TagGroup.unused],3,3,.5,0,100),s.TheoShape.init_f4eb("shape_011","Shield",!0,!0,!0,u.AlignmentEdges.All,s.ShapeCategory.None,[s.TagGroup.unused],5,3,.5,0,100),s.TheoShape.init_f4eb("circle_001","Circle",!1,!0,!0,u.AlignmentEdges.All,s.ShapeCategory.Circle,[s.TagGroup.circle],5,1,.6,.5,2),s.TheoShape.init_f4eb("circle_002","Circle",!1,!0,!0,u.AlignmentEdges.All,s.ShapeCategory.Circle,[s.TagGroup.circle],5,6,.6,.5,2,!0),s.TheoShape.init_f4eb("circle_003","Circle",!1,!0,!0,u.AlignmentEdges.All,s.ShapeCategory.Circle,[s.TagGroup.circle],7,6,.6,.5,2,!0),s.TheoShape.init_f4eb("circle_004","Circle",!1,!0,!0,u.AlignmentEdges.All,s.ShapeCategory.Circle,[s.TagGroup.decorative],8,6,.6,.5,2,!0),s.TheoShape.init_f4eb("circle_005","Circle",!1,!1,!0,u.AlignmentEdges.All,s.ShapeCategory.Decorative,[s.TagGroup.decorative],1,6,.6,.5,2),s.TheoShape.init_f4eb("circle_006","Circle",!1,!1,!0,u.AlignmentEdges.All,s.ShapeCategory.Decorative,[s.TagGroup.decorative],2,8,.6,.5,2),s.TheoShape.init_f4eb("circle_007","Circle",!1,!1,!0,u.AlignmentEdges.All,s.ShapeCategory.Decorative,[s.TagGroup.decorative],7,8,.6,.5,2),s.TheoShape.init_f4eb("circle_008","Circle",!1,!1,!0,u.AlignmentEdges.All,s.ShapeCategory.Decorative,[s.TagGroup.decorative],1,10,.6,.5,2),s.TheoShape.init_f4eb("square_001","Circle",!1,!0,!0,u.AlignmentEdges.All,s.ShapeCategory.Square,[s.TagGroup.square],5,1,.7,0,100),s.TheoShape.init_f4eb("square_002","Circle",!1,!1,!0,u.AlignmentEdges.All,s.ShapeCategory.Cutout,[s.TagGroup.square],5,1,.7,0,100),s.TheoShape.init_f4eb("square_003","Circle",!1,!0,!0,u.AlignmentEdges.All,s.ShapeCategory.Square,[s.TagGroup.decorative],7,5,.7,0,100,!0),s.TheoShape.init_f4eb("square_004","Circle",!1,!0,!0,u.AlignmentEdges.All,s.ShapeCategory.Square,[s.TagGroup.square,s.TagGroup.other],4,4,.7,0,100),s.TheoShape.init_f4eb("square_005","Circle",!1,!0,!0,u.AlignmentEdges.All,s.ShapeCategory.Square,[s.TagGroup.other,s.TagGroup.banner],4,8,.7,0,100),s.TheoShape.init_f4eb("buttonoutline","Circle",!1,!1,!0,u.AlignmentEdges.All,s.ShapeCategory.Cutout,[s.TagGroup.other],5,5,.7,0,100),s.TheoShape.init_f4eb("button","Circle",!1,!0,!0,u.AlignmentEdges.All,s.ShapeCategory.Other,[s.TagGroup.other],5,5,.7,0,100),s.TheoShape.init_f4eb("diamond_001","Circle",!1,!0,!0,u.AlignmentEdges.All,s.ShapeCategory.Avoid,[s.TagGroup.other],5,8,.6,.25,4),s.TheoShape.init_f4eb("diamond_002","Circle",!1,!1,!0,u.AlignmentEdges.All,s.ShapeCategory.Cutout,[s.TagGroup.other],5,9,.6,.25,4),s.TheoShape.init_f4eb("ribbon_h_001","Circle",!1,!0,!0,u.AlignmentEdges.All,s.ShapeCategory.Banner,[s.TagGroup.banner],5,5,.8,3,100),s.TheoShape.init_f4eb("ribbon_h_002","Circle",!1,!1,!0,u.AlignmentEdges.All,s.ShapeCategory.Cutout,[s.TagGroup.banner],5,6,.8,3,100),s.TheoShape.init_f4eb("ribbon_h_003","Circle",!1,!0,!0,u.AlignmentEdges.All,s.ShapeCategory.Banner,[s.TagGroup.banner],5,4,.8,3,100),s.TheoShape.init_f4eb("ribbon_h_004","Circle",!1,!0,!0,u.AlignmentEdges.All,s.ShapeCategory.Banner,[s.TagGroup.banner],5,4,.8,3,100,!0),s.TheoShape.init_f4eb("ribbon_h_005","Circle",!1,!0,!0,u.AlignmentEdges.All,s.ShapeCategory.Banner,[s.TagGroup.banner],5,6,.8,3,100),s.TheoShape.init_f4eb("ornamental_001","Circle",!1,!1,!0,u.AlignmentEdges.TopAndBottom,s.ShapeCategory.Decorative,[s.TagGroup.decorative],3,4,.7,0,100),s.TheoShape.init_f4eb("ornamental_002","Circle",!1,!1,!0,u.AlignmentEdges.All,s.ShapeCategory.Decorative,[s.TagGroup.decorative],8,8,.7,0,100,!0),s.TheoShape.init_f4eb("shape_002","Circle",!1,!0,!0,u.AlignmentEdges.All,s.ShapeCategory.Avoid,[s.TagGroup.decorative],5,3,.7,0,100,!0),s.TheoShape.init_f4eb("shape_003","VerticalBanner",!1,!0,!0,u.AlignmentEdges.All,s.ShapeCategory.Avoid,[s.TagGroup.decorative],5,3,.5,0,1),s.TheoShape.init_f4eb("shape_010","Hexagon",!1,!0,!0,u.AlignmentEdges.All,s.ShapeCategory.Avoid,[s.TagGroup.square],9,6,.7,0,100),s.TheoShape.init_f4eb("shape_013","Speech Bubble",!1,!0,!0,u.AlignmentEdges.All,s.ShapeCategory.Avoid,[s.TagGroup.decorative],5,3,.4,.5,2,!0),s.TheoShape.init_f4eb("divider_001","Circle",!1,!1,!0,u.AlignmentEdges.All,s.ShapeCategory.Cutout,[s.TagGroup.other],5,5,.8,0,100),s.TheoShape.init_f4eb("divider_002","Circle",!1,!1,!0,u.AlignmentEdges.All,s.ShapeCategory.Cutout,[s.TagGroup.other],1,2,.5,0,100),s.TheoShape.init_f4eb("divider_003","Circle",!1,!1,!0,u.AlignmentEdges.All,s.ShapeCategory.Cutout,[s.TagGroup.other],5,1,.8,0,100),s.TheoShape.init_f4eb("Social_Facebook","Circle",!1,!1,!1,u.AlignmentEdges.LeftAndTopAndBottom,s.ShapeCategory.Social,[s.TagGroup.unused],5,5,.5,99,100),s.TheoShape.init_f4eb("Social_Instagram","Circle",!1,!1,!1,u.AlignmentEdges.LeftAndTopAndBottom,s.ShapeCategory.Social,[s.TagGroup.unused],5,5,.5,99,100),s.TheoShape.init_f4eb("Social_Pinterest","Circle",!1,!1,!1,u.AlignmentEdges.LeftAndTopAndBottom,s.ShapeCategory.Social,[s.TagGroup.unused],5,5,.5,99,100),s.TheoShape.init_f4eb("Social_Twitter","Circle",!1,!1,!1,u.AlignmentEdges.LeftAndTopAndBottom,s.ShapeCategory.Social,[s.TagGroup.unused],5,5,.5,99,100),s.TheoShape.init_f4eb("Social_GPlus","Circle",!1,!1,!1,u.AlignmentEdges.LeftAndTopAndBottom,s.ShapeCategory.Social,[s.TagGroup.unused],5,5,.5,99,100),s.TheoShape.init_f4eb("Social_Linkedin","Circle",!1,!1,!1,u.AlignmentEdges.LeftAndTopAndBottom,s.ShapeCategory.Social,[s.TagGroup.unused],5,5,.5,99,100),s.TheoShape.init_f4eb("Social_Periscope","Circle",!1,!1,!1,u.AlignmentEdges.LeftAndTopAndBottom,s.ShapeCategory.Social,[s.TagGroup.unused],5,5,.5,99,100),s.TheoShape.init_f4eb("Social_Snapchat","Circle",!1,!1,!1,u.AlignmentEdges.LeftAndTopAndBottom,s.ShapeCategory.Social,[s.TagGroup.unused],5,5,.5,99,100),s.TheoShape.init_f4eb("Social_Tumblr","Circle",!1,!1,!1,u.AlignmentEdges.LeftAndTopAndBottom,s.ShapeCategory.Social,[s.TagGroup.unused],5,5,.5,99,100),s.TheoShape.init_f4eb("Social_Youtube","Circle",!1,!1,!1,u.AlignmentEdges.LeftAndTopAndBottom,s.ShapeCategory.Social,[s.TagGroup.unused],5,5,.5,99,100),s.TheoShape.init_f4eb("inline_001","Inline",!1,!1,!0,u.AlignmentEdges.All,s.ShapeCategory.None,[s.TagGroup.unused],1,5,.5,0,100,void 0,!0),s.TheoShape.init_f4eb("inline_002","Inline",!1,!1,!0,u.AlignmentEdges.TopAndBottom,s.ShapeCategory.None,[s.TagGroup.unused],1,5,.5,0,100,void 0,!0),s.TheoShape.init_f4eb("inline_003","Inline",!1,!1,!0,u.AlignmentEdges.All,s.ShapeCategory.None,[s.TagGroup.unused],1,5,.5,0,100,void 0,!0),s.TheoShape.init_f4eb("inline_004","Inline",!1,!1,!0,u.AlignmentEdges.All,s.ShapeCategory.None,[s.TagGroup.unused],1,5,.5,0,100,void 0,!0),s.TheoShape.init_f4eb("inline_005","Inline",!1,!0,!0,u.AlignmentEdges.All,s.ShapeCategory.None,[s.TagGroup.unused],1,5,.5,0,100,!0,!0),s.TheoShape.init_f4eb("inline_006","Inline",!1,!0,!0,u.AlignmentEdges.All,s.ShapeCategory.None,[s.TagGroup.unused],1,5,.5,0,100,!0,!0),s.TheoShape.init_f4eb("pacific_001","Inline",!1,!1,!0,u.AlignmentEdges.All,s.ShapeCategory.None,[s.TagGroup.unused],1,5,.5,0,100,void 0,!0),s.TheoShape.init_f4eb("pacific_002","Inline",!1,!1,!0,u.AlignmentEdges.All,s.ShapeCategory.None,[s.TagGroup.unused],1,5,.5,0,100,void 0,!0),s.TheoShape.init_f4eb("pacific_003","Inline",!1,!1,!0,u.AlignmentEdges.All,s.ShapeCategory.None,[s.TagGroup.unused],1,5,.5,0,100,void 0,!0),s.TheoShape.init_f4eb("pacific_004","Inline",!1,!1,!0,u.AlignmentEdges.All,s.ShapeCategory.None,[s.TagGroup.unused],1,5,.5,0,100,void 0,!0),s.TheoShape.init_f4eb("pacific_005","Inline",!1,!0,!0,u.AlignmentEdges.All,s.ShapeCategory.None,[s.TagGroup.unused],1,5,.5,0,100,!0,!0),s.TheoShape.init_f4eb("pacific_006","Inline",!1,!0,!0,u.AlignmentEdges.All,s.ShapeCategory.None,[s.TagGroup.unused],1,5,.5,0,100,!0,!0)]),void 0===n&&(n=[s.TheoShape.init_f4eb("square_001","Circle",!1,!0,!0,u.AlignmentEdges.All,s.ShapeCategory.Square,[s.TagGroup.square],5,1,.7,0,100),s.TheoShape.init_f4eb("circle_001","Circle",!1,!0,!0,u.AlignmentEdges.All,s.ShapeCategory.Circle,[s.TagGroup.circle],5,1,.6,.5,2),s.TheoShape.init_f4eb("pacific_006","Inline",!1,!0,!0,u.AlignmentEdges.All,s.ShapeCategory.None,[s.TagGroup.unused],1,5,.5,0,100,!0,!0)]),void 0===i&&(i=[s.ShapeLibrary.CategoryBasic,s.ShapeLibrary.CategoryBanner,s.ShapeLibrary.CategoryDecorative,s.ShapeLibrary.CategorySocial]),void 0===o&&(o={BASIC:["circle_001","circle_002","circle_003","shape_010","diamond_001","diamond_002","square_001","square_002","square_004","buttonoutline","button","square_005","divider_001","divider_002"],BANNER:["ribbon_h_001","ribbon_h_002","ribbon_h_003","ribbon_h_004","ribbon_h_005","shape_003"],DECORATIVE:["circle_004","circle_005","circle_006","circle_007","circle_008","ornamental_001","ornamental_002","square_003","shape_002","shape_013","inline_001","inline_002","inline_003","inline_004","inline_005","inline_006","pacific_001","pacific_002","pacific_003","pacific_004","pacific_005","pacific_006"],SOCIAL:["Social_Facebook","Social_Instagram","Social_Pinterest","Social_Twitter","Social_Youtube","Social_Snapchat","Social_Linkedin","Social_Tumblr","Social_GPlus","Social_Periscope"]}),void 0===a&&(a={BASIC:["square_002","square_004","buttonoutline","button","square_005","divider_001","divider_002","pacific_006"],BANNER:["ribbon_h_001","ribbon_h_002","ribbon_h_003","ribbon_h_004","ribbon_h_005"],DECORATIVE:["circle_001","circle_002","circle_003","shape_010","diamond_001","diamond_002","square_001","circle_004","circle_005","circle_006","circle_007","circle_008","ornamental_002","square_003","inline_001","inline_002","inline_003","inline_004","inline_005","inline_006","pacific_001","pacific_002","pacific_003","pacific_004","pacific_005"],SOCIAL:[]}),void 0===r&&(r={BASIC:["square_002","square_004","buttonoutline","button","square_005","divider_001","divider_002","pacific_006"],BANNER:["ribbon_h_001","ribbon_h_002","ribbon_h_003","ribbon_h_004","ribbon_h_005"],DECORATIVE:["square_003","inline_001","inline_003","inline_005","inline_006","pacific_001","pacific_002","ornamental_002","diamond_001","diamond_002","square_001","circle_008"],SOCIAL:[]}),void 0===c&&(c={BASIC:["circle_001","circle_002","circle_003","shape_010","diamond_001","diamond_002","square_001","square_002","square_004","square_005","divider_001","divider_002"],BANNER:[],DECORATIVE:["circle_004","circle_005","pacific_006"],SOCIAL:[]}),void 0===h&&(h={BASIC:["circle_001","circle_002","circle_003","shape_010","diamond_001","diamond_002","square_001","square_002","square_004","square_005","divider_001","divider_002"],BANNER:["ribbon_h_001","ribbon_h_002","ribbon_h_003","ribbon_h_004","ribbon_h_005","shape_003"],DECORATIVE:["circle_004","circle_005","circle_006","circle_007","circle_008","ornamental_001","ornamental_002","square_003","shape_002","shape_013","inline_001","inline_002","inline_003","inline_004","inline_005","inline_006","pacific_001","pacific_002","pacific_003","pacific_004","pacific_005","pacific_006"],SOCIAL:["Social_Facebook","Social_Instagram","Social_Pinterest","Social_Twitter","Social_Youtube","Social_Snapchat","Social_Linkedin","Social_Tumblr","Social_GPlus","Social_Periscope"]}),void 0===g&&(g={BASIC:["shape_010","diamond_001","diamond_002","square_001","square_002","square_004","square_005","divider_001","divider_002"],BANNER:["ribbon_h_001","ribbon_h_002","ribbon_h_003","ribbon_h_004","ribbon_h_005","shape_003"],DECORATIVE:["ornamental_001","ornamental_002","square_003","shape_002","shape_013","inline_001","inline_002","inline_003","inline_004","inline_005","inline_006","pacific_001","pacific_002","pacific_003","pacific_004","pacific_005","pacific_006"],SOCIAL:["Social_Facebook","Social_Instagram","Social_Pinterest","Social_Twitter","Social_Youtube","Social_Snapchat","Social_Linkedin","Social_Tumblr","Social_GPlus","Social_Periscope"]}),void 0===d&&(d={BASIC:["square_001","square_002","square_004","square_005","divider_001","divider_002"],BANNER:["ribbon_h_001","ribbon_h_002","ribbon_h_003","ribbon_h_004","ribbon_h_005","shape_003"],DECORATIVE:["ornamental_001","ornamental_002","square_003","shape_002","shape_013","inline_001","inline_002","inline_003","inline_004","inline_005","inline_006","pacific_001","pacific_002","pacific_003","pacific_004","pacific_005","pacific_006"],SOCIAL:[]}),void 0===p&&(p=["Social_Facebook","Social_Instagram","Social_Pinterest","Social_Twitter","Social_Youtube","Social_Snapchat","Social_Linkedin","Social_Tumblr","Social_GPlus","Social_Periscope","shape_002","shape_003","shape_013","ornamental_001","knockout"]),void 0===_&&(_=[]),void 0===m&&(m=[]),void 0===f&&(f=[]),void 0===C&&(C={}),void 0===y&&(y=[]),this.nonSvgBackingShapes=l.clone(e),this.svgBackingShapes=l.clone(t),this.seperatorShapes=l.clone(n),this.DisplayOrderForCategories=l.clone(i),this.DisplayOrderForShapesByCategory=l.clone(o),this.DisplayOrderForCharStyleShapesByCategory=l.clone(a),this.DisplayOrderForSmallSetCharStyleShapesByCategory=l.clone(r),this.DisplayOrderForLetterGridShapesByCategory=l.clone(c),this.DisplayOrderForSymmetricPathsShapesByCategory=l.clone(h),this.DisplayOrderForAsymmetricPathsShapesByCategory=l.clone(g),this.DisplayOrderForAutoLayoutShapesByCategory=l.clone(d),this.NonSuggestableBackingShapes=l.clone(p),this.ShapeIDToCategory=l.clone(S),this.LockupBackingShapeIDs=l.clone(_),this.BrowsableBackingShapes=l.clone(m),this.FilledBackingShapes=l.clone(f),this.shapeDictionary=l.clone(C),this.nonSvgBackingShapeIDs=l.clone(y)},clone:function(){return o.init_implicit(this.nonSvgBackingShapes,this.svgBackingShapes,this.seperatorShapes,this.DisplayOrderForCategories,this.DisplayOrderForShapesByCategory,this.DisplayOrderForCharStyleShapesByCategory,this.DisplayOrderForSmallSetCharStyleShapesByCategory,this.DisplayOrderForLetterGridShapesByCategory,this.DisplayOrderForSymmetricPathsShapesByCategory,this.DisplayOrderForAsymmetricPathsShapesByCategory,this.DisplayOrderForAutoLayoutShapesByCategory,this.NonSuggestableBackingShapes,this.ShapeIDToCategory,this.LockupBackingShapeIDs,this.BrowsableBackingShapes,this.FilledBackingShapes,this.shapeDictionary,this.nonSvgBackingShapeIDs)}}}),o),s.ShapeLibrary=(a=function(){c.CoreObject.call(this)},r={},l.defineClass({name:"ShapeLibrary",ctor:a,superName:"CoreObject",statics:{CategoryBasic:"BASIC",CategoryBanner:"BANNER",CategoryDecorative:"DECORATIVE",CategorySocial:"SOCIAL",CategoryExclusive:"EXCLUSIVE",Square:"square",Circle:"circle",shapeLibraryDataStructures:{get:function(){return void 0===r.shapeLibraryDataStructures&&(r.shapeLibraryDataStructures=s.ShapeLibraryDataStructures.init_d41d()),r.shapeLibraryDataStructures}},LockupBackingShapeIDs:{get:function(){return void 0===r.LockupBackingShapeIDs&&(r.LockupBackingShapeIDs=a.shapeLibraryDataStructures.LockupBackingShapeIDs),r.LockupBackingShapeIDs},set:function(e){r.LockupBackingShapeIDs=e}},NonSvgBackingShapeIDs:{get:function(){return void 0===r.NonSvgBackingShapeIDs&&(r.NonSvgBackingShapeIDs=a.shapeLibraryDataStructures.nonSvgBackingShapeIDs),r.NonSvgBackingShapeIDs},set:function(e){r.NonSvgBackingShapeIDs=e}},BrowsableBackingShapes:{get:function(){return void 0===r.BrowsableBackingShapes&&(r.BrowsableBackingShapes=a.shapeLibraryDataStructures.BrowsableBackingShapes),r.BrowsableBackingShapes},set:function(e){r.BrowsableBackingShapes=e}},FilledBackingShapes:{get:function(){return void 0===r.FilledBackingShapes&&(r.FilledBackingShapes=a.shapeLibraryDataStructures.FilledBackingShapes),r.FilledBackingShapes},set:function(e){r.FilledBackingShapes=e}},shapeDictionary:{get:function(){return void 0===r.shapeDictionary&&(r.shapeDictionary=a.shapeLibraryDataStructures.shapeDictionary),r.shapeDictionary},set:function(e){r.shapeDictionary=e}},NonSuggestableBackingShapes:{get:function(){return void 0===r.NonSuggestableBackingShapes&&(r.NonSuggestableBackingShapes=a.shapeLibraryDataStructures.NonSuggestableBackingShapes),r.NonSuggestableBackingShapes},set:function(e){r.NonSuggestableBackingShapes=e}},SeperatorShapes:{get:function(){return void 0===r.SeperatorShapes&&(r.SeperatorShapes=a.shapeLibraryDataStructures.seperatorShapes),r.SeperatorShapes},set:function(e){r.SeperatorShapes=e}},getShapeDataForArtworkId:function(e){var t="none";return null!=e&&(t=e),a.shapeDictionary[t]},applyToShapeForma:function(e,t){var n,i;null!=(n=l.opt(h.Host.resourceUtils,(function(e){return e.urlForResource(g.CATEGORY_ID_SHAPE,t)})))&&(i=h.Host.pathUtils.artworkFromURL(n,!1))&&(e.canonicalArtwork=i.artwork,e.sliceBox=i.sliceBox,e.contentRegion=i.contentRegion,e.shapeLibraryID=t)},categoryForShapeID:function(e){return a.shapeLibraryDataStructures.ShapeIDToCategory[e]},displayOrderForCategories:function(){return a.shapeLibraryDataStructures.DisplayOrderForCategories},displayOrderForCompatibleShapeIDs:function(e,t,n,i,o){return d.LockupStyle.isLetterGrid(t)?a.displayOrderForLetterGridShapeIDs(e,i,o):d.LockupStyle.isPath(t)?a.displayOrderForPathShapeIDs(e,n,i,o):d.LockupStyle.isAutoLayout(t)?a.displayOrderForAutoLayoutShapeIDs(e,i,o):i?a.displayOrderForCharStyleShapeIDs(e,o):a.displayOrderForShapeIDs(e)},getCategorySlice:function(e,t){return e[t]||[]},displayOrderForShapeIDs:function(e){return a.getCategorySlice(l.clone(a.shapeLibraryDataStructures.DisplayOrderForShapesByCategory),e)},displayOrderForCharStyleShapeIDs:function(e,t){var n=l.clone(t?a.shapeLibraryDataStructures.DisplayOrderForSmallSetCharStyleShapesByCategory:a.shapeLibraryDataStructures.DisplayOrderForCharStyleShapesByCategory);return a.getCategorySlice(l.clone(n),e)},displayOrderForLetterGridShapeIDs:function(e,t,n){return a.getCategorySlice(l.clone(a.shapeLibraryDataStructures.DisplayOrderForLetterGridShapesByCategory),e)},displayOrderForPathShapeIDs:function(e,t,n,i){if(n)return[];var o=l.clone(p.TextPathLibrary.isPathSymmetric(t)?a.shapeLibraryDataStructures.DisplayOrderForSymmetricPathsShapesByCategory:a.shapeLibraryDataStructures.DisplayOrderForAsymmetricPathsShapesByCategory);return a.getCategorySlice(l.clone(o),e)},displayOrderForAutoLayoutShapeIDs:function(e,t,n){return a.getCategorySlice(l.clone(a.shapeLibraryDataStructures.DisplayOrderForAutoLayoutShapesByCategory),e)},isBackingShapeStyleCompatible:function(e,t,n){return d.LockupStyle.isLetterGrid(e.layout)?a.isBackingShapeLetterGridCompatible(t,n):d.LockupStyle.isPath(e.layout)?a.isBackingShapePathCompatible(e.pathID,t,n):!d.LockupStyle.isAutoLayout(e.layout)||a.isBackingShapeAutoLayoutCompatible(t,n)},isSVGIncluded:function(e,t){var n;if(null!=(n=e))for(var i=l.iter(a.shapeLibraryDataStructures.DisplayOrderForCategories);!i.done;i.next())for(var o=i.value,r=l.clone(t[o]),s=l.iter(r);!s.done;s.next())if(s.value==n)return!0;return!1},isBackingShapeLetterGridCompatible:function(e,t){return e!=d.LockupBacking.SVGBackground?e==d.LockupBacking.None:a.isSVGIncluded(t,l.clone(a.shapeLibraryDataStructures.DisplayOrderForLetterGridShapesByCategory))},isBackingShapePathCompatible:function(e,t,n){if(t==d.LockupBacking.Rows)return!1;if(t!=d.LockupBacking.SVGBackground)return!0;var i=l.clone(p.TextPathLibrary.isPathSymmetric(e)?a.shapeLibraryDataStructures.DisplayOrderForSymmetricPathsShapesByCategory:a.shapeLibraryDataStructures.DisplayOrderForAsymmetricPathsShapesByCategory);return a.isSVGIncluded(n,l.clone(i))},isBackingShapeAutoLayoutCompatible:function(e,t){return e!=d.LockupBacking.Rows&&(e!=d.LockupBacking.SVGBackground?e==d.LockupBacking.None:a.isSVGIncluded(t,l.clone(a.shapeLibraryDataStructures.DisplayOrderForAutoLayoutShapesByCategory)))}}}),a)},J3ZR:function(e,t,n){n("oAGj")},U010:function(e,t,n){var i,o,a,r,s,l=t,u=n("oAGj"),c=n("SpAV"),h=n("gXiO"),g=n("yGNn"),d=n("iCxV"),p=n("kJ8p"),S=n("fNpk");l.MASK_ENDPOINT="/deepcut/mask",l.VERSION_ENDPOINT="/deepcut/version",l.CutoutMode=u.defineEnum("CutoutMode",{Off:0,BackgroundRemoval:1,ForegroundRemoval:2}),l.CutoutModel=u.defineEnum("CutoutModel",{DISCONTINUED_SAGEMAKER:0,DISCONTINUED_SENSEI:1,MALABI:2,REMOVE_BG:3,CLOUDINARY:4,SENSEI2_BINARY:5,SENSEI2_SOFT:6}),l.CutoutMaskSize=u.defineEnum("CutoutMaskSize",{ORIGINAL:0,SMALL:500,MEDIUM:1e3,LARGE:2e3}),l.CutoutStyle=(i=function(e){this.mode=e,h.CoreObject.call(this)},u.defineClass({name:"CutoutStyle",ctor:i,superName:"CoreObject",props:{equals:function(e){return this.mode==e.mode}}}),i),l.CutoutMaskMetadata=(o=function(e,t,n){this.model=e,this.maskSize=t,this.modelVersion=n,h.CoreObject.call(this)},u.defineClass({name:"CutoutMaskMetadata",ctor:o,superName:"CoreObject",statics:{decode:function(e){if(null!=(e=e)){var t=e.split(":");if(3==t.length){var n,i,a,r;if(null!=(n=u.toInt(t[0]))&&null!=(i=u.toInt(t[1]))&&null!=(a=l.CutoutModel.toCaseValue(n))&&null!=(r=l.CutoutMaskSize.toCaseValue(i))){var s=u.toString(t[2]);return new o(a,r,u.isEmpty(s)?null:s)}u.opt(d.Host.logging,(function(e){return e.warning("[ImageCutoutModelLibrary] Unexpected model or maskSize value found in document")}))}}return null}},props:{equals:function(e){return this.model==e.model&&this.maskSize==e.maskSize&&this.modelVersion==e.modelVersion},encode:function(){var e;return this.model+":"+this.maskSize+":"+((e=this.modelVersion)||null!=e?e:"")}}}),o),l.ImageCutoutLibrary=(a=function(){h.CoreObject.call(this)},r={},u.defineClass({name:"ImageCutoutLibrary",ctor:a,superName:"CoreObject",statics:{imageCutouts_:{get:function(){return void 0===r.imageCutouts_&&(r.imageCutouts_=[new l.CutoutStyle(l.CutoutMode.Off),new l.CutoutStyle(l.CutoutMode.BackgroundRemoval),new l.CutoutStyle(l.CutoutMode.ForegroundRemoval)]),r.imageCutouts_}},getImageCutouts:function(){return a.imageCutouts_},getImageCutout:function(e){return a.imageCutouts_.find((function(t){return t.mode==e}),this)},getCutoutModeString:function(e){switch(e){case 1:return"background";case 2:return"foreground";case 0:return"off";default:return S.LegacyCoreAssert.fail("Unknown cutout mode.",{mode:e},"ImageCutoutLibrary.getCutoutModeString","ImageCutoutLibrary.swift",169),"off"}}},props:{getNextImageCutoutOfSameType:function(e){var t;switch(e.mode){case 0:t=a.getImageCutout(l.CutoutMode.Off);break;case 1:t=a.getImageCutout(l.CutoutMode.BackgroundRemoval);break;case 2:t=a.getImageCutout(l.CutoutMode.ForegroundRemoval);break;default:t=a.getImageCutout(l.CutoutMode.Off)}return t},hasNextCutoutOfSameType:function(e){var t;return!!(t=this.getNextImageCutoutOfSameType(e))&&!e.equals(t)}}}),a),l.ImageCutoutModelLibrary=function(){var e=function(){this.modelVersion=null,h.CoreObject.call(this)},t={};return u.defineClass({name:"ImageCutoutModelLibrary",ctor:e,superName:"CoreObject",statics:{CURRENT_MODEL:{get:function(){return void 0===t.CURRENT_MODEL&&(t.CURRENT_MODEL=l.CutoutModel.SENSEI2_SOFT),t.CURRENT_MODEL}},DEFAULT_MASK_SIZE:{get:function(){return void 0===t.DEFAULT_MASK_SIZE&&(t.DEFAULT_MASK_SIZE=l.CutoutMaskSize.MEDIUM),t.DEFAULT_MASK_SIZE}},DEFAULT_TIMEOUT:15,instance:{get:function(){return void 0===t.instance&&(t.instance=new e),t.instance}},isMaskUptodateWithCurrentModel:function(t){return(t=t)&&t.model==e.CURRENT_MODEL?e.instance.getModelVersion(e.CURRENT_MODEL).then((function(e){var n;return null!=(n=u.as(e,"String"))&&t.modelVersion==n})).fail((function(e){return d.Host.logging.error("Failed to get mask version from API"),!1})):g.CorePromise.resolve(!1)},getModelString:function(e){switch(e){case 2:return"malabi";case 3:return"remove.bg";case 4:return"cloudinary";case 5:return"sensei2-binary";case 6:return"sensei2-soft";case 0:case 1:return c.CoreAssert.fail("Invalid use of discontinued model value.",{model:e},"ImageCutoutModelLibrary.getModelString","ImageCutoutLibrary.swift",275),"sensei2-soft";default:return S.LegacyCoreAssert.fail("Unknown model value.",{model:e},"ImageCutoutModelLibrary.getModelString","ImageCutoutLibrary.swift",280),"sensei2-soft"}},buildMaskNetworkRequestForConfig:function(t,n,i,o){var a,r;return(a=d.Host.network)&&(r=d.Host.imageAnalysis)?g.CorePromise.all([a.getAuthToken(),r.getSaliencyAPIEndpoint(),r.getSaliencyAPIKey()]).then((function(a){var r,s,l,c,h=u.clone(u.as(a,["Array","Any"]));if(S.LegacyCoreAssert.isTrue(u.opt(h,(function(e){return 3==e.length})),"Expected three CorePromise results.",void 0,"ImageCutoutModelLibrary.buildMaskNetworkRequestForConfig","ImageCutoutLibrary.swift",296),(r=h)&&null!=(s=u.as(r[0],"String"))&&null!=(l=u.as(r[1],"String"))&&null!=(c=u.as(r[2],"String"))){var d=new p.HostNetworkRequest(l+n);return d.timeout=o,d.method=i,d.headers["X-API-Key"]=c,d.headers.Authorization="Bearer "+s,d.headers["X-Model"]=e.getModelString(t.model),d}return g.CorePromise.reject("Invalid auth data")})):g.CorePromise.reject("Invalid Host instances")}},props:{setup:function(){this.getModelVersion(e.CURRENT_MODEL,!0)},getModelVersion:function(t,n,i){void 0===n&&(n=!1),void 0===i&&(i=10);var o,a=this;if(!n&&t==e.CURRENT_MODEL&&null!=this.modelVersion)return g.CorePromise.resolve(this.modelVersion);if(o=d.Host.network){var r=new l.CutoutMaskMetadata(t,l.CutoutMaskSize.ORIGINAL,null);return e.buildMaskNetworkRequestForConfig(r,l.VERSION_ENDPOINT,p.HostNetworkRequestMethod.get,i).then((function(e){var t;return(t=u.as(e,p.HostNetworkRequest))?o.request(t):g.CorePromise.reject("Invalid network request object")})).then((function(n){var i,o;return(i=u.as(n,p.HostNetworkResponse))&&(o=i.data)?o.asJSON().then((function(n){var i,o;return(i=u.as(n,["Dictionary","String","String"]))&&null!=(o=i.version)?(t==e.CURRENT_MODEL&&a.setModelVersion(o),g.CorePromise.resolve(o)):g.CorePromise.reject("[ImageCutoutModelLibrary] Failed to parse JSON response from `/version` call")})):g.CorePromise.reject("[ImageCutoutModelLibrary] Failed to get model version from API")}))}return g.CorePromise.reject("[ImageCutoutModelLibrary] Failed to get network impl")},setModelVersion:function(e){this.modelVersion=e}}}),e}(),l.ImageCutoutErrorLibrary=(s=function(){h.CoreObject.call(this)},u.defineClass({name:"ImageCutoutErrorLibrary",ctor:s,superName:"CoreObject",statics:{mapServerErrorToMaskError:function(e){if(e.type==p.HostNetworkErrorType.BadRequest)switch(u.as(e.message,"String")){case"unsupported-image":return new p.HostCutoutMaskError(p.HostCutoutMaskErrorType.UnsupportedImageFormat);case"image-too-small":return new p.HostCutoutMaskError(p.HostCutoutMaskErrorType.ImageTooSmall);case"image-too-large":return new p.HostCutoutMaskError(p.HostCutoutMaskErrorType.ImageTooLarge);case"invalid-file-upload":return new p.HostCutoutMaskError(p.HostCutoutMaskErrorType.InvalidImageUploaded);default:return new p.HostCutoutMaskError(p.HostCutoutMaskErrorType.Unknown)}return e}}}),s)},"b/QB":function(e,t,n){var i,o=t,a=n("oAGj"),r=n("yhkb"),s=n("gXiO"),l=n("ascj"),u=n("SDdr"),c=n("uWOl"),h=n("fNpk");o.ImageFilterLibrary=(i=function(){this.styleMixes={Darken:[.1,.3,.5,.7]},this.imageStyles=[c.ImageStyle.init_1265("None"),c.ImageStyle.init_1265("Greyscale",l.ColorTable.init_25f6([{key:l.ColorRole.FieldPrimary,value:"themeDerivedDark"},{key:l.ColorRole.FieldSecondary,value:"themeDerivedLight"}]),u.CompositeFilter.init_514f(void 0,"Duotone",1,"normal",void 0,void 0,"duotone")),c.ImageStyle.init_1265("Darken",l.ColorTable.init_25f6([{key:l.ColorRole.FieldPrimary,value:"themeDerivedDark"},{key:l.ColorRole.FieldSecondary,value:"themeDerivedDark"}]),u.CompositeFilter.init_514f(void 0,"Duotone",.5,"normal",void 0,void 0,"duotone")),c.ImageStyle.init_1265("Blur",null,u.CompositeFilter.init_514f(void 0,"Blur",1,"none",void 0,void 0,"none")),c.ImageStyle.init_1265("Overlay",l.ColorTable.init_25f6([{key:l.ColorRole.FieldPrimary,value:a.as(r.ColorLibraryController.FILTER_OVERLAY_KEYS[0],"String")}]),u.CompositeFilter.init_514f(void 0,"ReduceContrastOverlay",.25,"overlay",!1,.5,"offset",1,1)),c.ImageStyle.init_1265("Multiply",l.ColorTable.init_25f6([{key:l.ColorRole.FieldPrimary,value:r.ColorLibraryController.FILTER_MULTIPLY_KEYS[1]}]),u.CompositeFilter.init_514f(void 0,"DesaturateMultiply",.4,"multiply",!0,void 0,"offset",.5,1)),c.ImageStyle.init_1265("Blend",l.ColorTable.init_25f6([{key:l.ColorRole.FieldPrimary,value:r.ColorLibraryController.FILTER_BLEND_KEYS[2]}]),u.CompositeFilter.init_514f(void 0,"Blend",.3,"normal",!1,void 0,"none")),c.ImageStyle.init_1265("DuoTone",l.ColorTable.init_25f6([{key:l.ColorRole.FieldPrimary,value:a.as(r.ColorLibraryController.FILTER_DUOTONE_LOW_KEYS[2],"String")},{key:l.ColorRole.FieldSecondary,value:a.as(r.ColorLibraryController.FILTER_DUOTONE_HIGH_KEYS[0],"String")}]),u.CompositeFilter.init_514f(void 0,"Duotone",1,"normal",void 0,void 0,"duotone")),c.ImageStyle.init_1265("Screen",l.ColorTable.init_25f6([{key:l.ColorRole.FieldPrimary,value:r.ColorLibraryController.FILTER_SCREEN_KEYS[0]}]),u.CompositeFilter.init_514f(void 0,"Screen",.4,"screen",!1,void 0,"none"))],s.CoreObject.call(this)},a.defineClass({name:"ImageFilterLibrary",ctor:i,superName:"CoreObject",props:{getImageStyle:function(e){for(var t,n=a.iter(this.imageStyles);!n.done;n.next()){var i=n.value;if(e==i.name){t=i;break}}return t},getAllImageStyles:function(){return this.imageStyles},getNextImageStyleOfSameType:function(e,t){void 0===t&&(t=!0);var n,i,o,s,g=e.name,d=!0;switch(g){case"None":n=this.getImageStyle("None");break;case"Greyscale":n=this.getImageStyle("Greyscale");break;case"Blur":n=this.getImageStyle("Blur");break;case"Darken":(n=a.as(this.getImageStyle("Darken").clone(),c.ImageStyle)).colorLibrary=e.colorLibrary;break;case"Overlay":case"Multiply":case"Blend":case"Screen":if((n=a.as(this.getImageStyle(g).clone(),c.ImageStyle)).colorLibrary=e.colorLibrary,null==(_=e.colors.colorID(l.ColorRole.FieldPrimary)))return h.LegacyCoreAssert.fail("Style missing FieldPrimary key",{styleName:g},"ImageFilterLibrary.getNextImageStyleOfSameType","ImageFilterLibrary.swift",383),null;var p=r.ColorLibraryController.getNextKeyInSet(_),S=p[0];d=T=p[1],n.colors.setColorId(l.ColorRole.FieldPrimary,S);break;case"DuoTone":var _;if((n=a.as(this.getImageStyle("DuoTone").clone(),c.ImageStyle)).colorLibrary=e.colorLibrary,null==(_=e.colors.colorID(l.ColorRole.FieldPrimary)))return h.LegacyCoreAssert.fail("Missing color key",void 0,"ImageFilterLibrary.getNextImageStyleOfSameType","ImageFilterLibrary.swift",398),null;var m,f=r.ColorLibraryController.getNextKeyInSet(_),C=f[0];if(f[1],n.colors.setColorId(l.ColorRole.FieldPrimary,C),null==(m=e.colors.colorID(l.ColorRole.FieldSecondary)))return h.LegacyCoreAssert.fail("Missing color key",void 0,"ImageFilterLibrary.getNextImageStyleOfSameType","ImageFilterLibrary.swift",412),null;var y=r.ColorLibraryController.getNextKeyInSet(m),v=y[0],T=y[1];n.colors.setColorId(l.ColorRole.FieldSecondary,v),d=T;break;default:n=this.getImageStyle("None")}if((i=this.styleMixes[g])&&null!=(o=a.opt(a.as(e.filter,u.CompositeFilter),(function(e){return e.mix})))&&t&&d&&null!=(s=a.indexOf(i,o))){var b=i[(s+1)%i.length];n.filter.mix=b}return a.opt(n,(function(t){return t.adjustments=e.adjustments})),a.opt(n,(function(t){return t.opacity=e.opacity})),n},getImageStyles:function(){return[this.getImageStyle("None"),this.getImageStyle("Greyscale"),this.getImageStyle("Darken"),this.getImageStyle("Overlay"),this.getImageStyle("Blend"),this.getImageStyle("Screen"),this.getImageStyle("DuoTone"),this.getImageStyle("Multiply")]},hasNextStyleOfSameType:function(e){var t;return!!(t=this.getNextImageStyleOfSameType(e,!0))&&!e.equals(t)}}}),i)},g8Fi:function(e,t,n){var i,o,a,r,s,l=t,u=n("oAGj"),c=n("gXiO"),h=n("iCxV"),g=n("fNpk"),d=n("90dd"),p=n("oKlP"),S=n("ZoS2");l.PointerTypeEnum=u.defineEnum("PointerTypeEnum",{Mouse:0,Touch:1}),l.PointerStatus=u.defineEnum("PointerStatus",{DragFree:0,DragHeld:1,DragActive:2,DragInactive:3}),l.PointerMark=(i=function(e,t){this.when=e,this.point=t},u.defineClass({name:"PointerMark",ctor:i,props:{div:function(e){return new i(this.when/e,{x:this.point.x/e,y:this.point.y/e})}}}),i),l._minus_PointerMark_PointerMark=function(e,t){return new l.PointerMark(e.when-t.when,{x:e.point.x-t.point.x,y:e.point.y-t.point.y})},l._plus_PointerMark_PointerMark=function(e,t){return new l.PointerMark(e.when+t.when,{x:e.point.x+t.point.x,y:e.point.y+t.point.y})},l.PointerState=(o=function(e,t,n,i,o){this.down=!1,this.cancelled=!1,this.tapCount=1,this.modifierKeys={},this.pointerStatus=l.PointerStatus.DragFree,this.slippage=p.TheoPoint.ZERO,this.id=e,this.type=t,this.currentPage=n,this.startLocation=i,this.currentLocation=i,this.startTime=o,this.currentTime=o,this.history=[],c.CoreObject.call(this),this.updateHistory(o,i)},u.defineClass({name:"PointerState",ctor:o,superName:"CoreObject",props:{updateState:function(e){g.LegacyCoreAssert.isTrue(e.type==this.type&&e.onPage===this.currentPage&&e.id==this.id,"pointer update type/page/id does not match",void 0,"PointerState.updateState","PointersState.swift",142),this.currentLocation=e.loc,this.currentTime=e.when,this.updateHistory(e.when,e.loc),this.tapCount=e.tapCount,this.cancelled=e.cancelled,this.viewportTransform=e.viewportTransform,this.modifierKeys=u.clone(e.modifierKeys)},updateHistory:function(e,t){var n=this.history.length-28;n>0&&this.history.splice(0,n),this.history.push(new l.PointerMark(e,{x:t.x,y:t.y}))},pointerVelocity:function(){for(var e=h.Host.async.getSystemUptimeInSeconds()-.2,t=[],n=this.history.length-1;n>=0&&!(this.history[n].when<e);)t.splice(0,0,this.history[n]),n-=1;for(var i=u.clone(function(e,t){var n=u.clone(e),i=t;if(i>e.length&&(i=e.length),i<=1)return n;for(var o=u.iter(u.range(1,i,!1));!o.done;o.next())for(var a=o.value,r=u.iter(u.range(0,e.length-a,!1));!r.done;r.next())n[a+(h=r.value)]=l._plus_PointerMark_PointerMark(n[a+h],e[h]);for(var s=u.iter(u.range(1,i,!1));!s.done;s.next())n[a=s.value]=n[a].div(u.toDouble(a+1));for(var c=u.iter(u.range(i,e.length,!1));!c.done;c.next()){var h;n[h=c.value]=n[h].div(u.toDouble(i))}return n}(u.clone(t),3)),o=3,a=2,r=0,s=0;o<i.length;){var c=l._minus_PointerMark_PointerMark(i[o],i[a]);r+=c.when,s+=Math.sqrt(c.point.x*c.point.x+c.point.y*c.point.y),o+=1,a+=1}var g=s/r;return isNaN(g)?0:g}}}),o),l.PointerUpdate=(a=function(e,t,n,i,o){this.cancelled=!1,this.tapCount=1,this.id=e,this.type=t,this.onPage=n,this.loc=i,this.when=o,this.cancelled=!1,this.tapCount=1,this.modifierKeys={}},u.defineClass({name:"PointerUpdate",ctor:a,superName:"CoreObject"}),a),l.PointersState=(r=function(){this.LONG_PRESS_TIME_THRESHOLD=1.25,this.LONG_PRESS_DIST_THRESHOLD=50,this.pointers_=[],S.TheoPublishingObject.call(this)},u.defineClass({name:"PointersState",ctor:r,superName:"TheoPublishingObject",statics:{_implements:function(e){return"TheoMessagePublisher"==e}},props:{onPointersDown:function(e){for(var t=[],n=u.iter(e);!n.done;n.next()){var i,o=n.value;(i=this.pointerByID(o.id))&&(g.LegacyCoreAssert.isTrue(o.type==l.PointerTypeEnum.Mouse,"unexpected update type",{type:o.type},"PointersState.onPointersDown","PointersState.swift",326),u.remove(this.pointers_,i)),(i=new l.PointerState(o.id,o.type,o.onPage,o.loc,o.when)).viewportTransform=o.viewportTransform,i.down=!0,i.modifierKeys=u.clone(o.modifierKeys),this.pointers_.push(i),t.push(i)}this.publish(new l.PointersStateChangeMessage(this,l.PointersStateChangeTypeEnum.PointersDown,u.clone(t)))},onPointersMoved:function(e){for(var t=[],n=u.iter(e);!n.done;n.next()){var i=n.value,o=this.pointerByID(i.id);null==o&&((o=new l.PointerState(i.id,i.type,i.onPage,i.loc,i.when)).down=!1,g.LegacyCoreAssert.isTrue(i.type==l.PointerTypeEnum.Mouse,"unexpected update type",{type:i.type},"PointersState.onPointersMoved","PointersState.swift",355),this.pointers_.push(o)),o.updateState(i),t.push(o)}this.publish(new l.PointersStateChangeMessage(this,l.PointersStateChangeTypeEnum.PointersMoved,u.clone(t)))},onPointersUp:function(e){for(var t=[],n=u.iter(e);!n.done;n.next()){var i,o=n.value;(i=this.pointerByID(o.id))&&(i.type==l.PointerTypeEnum.Touch&&u.remove(this.pointers_,i),i.updateState(o),t.push(i))}var a=new l.PointersStateChangeMessage(this,l.PointersStateChangeTypeEnum.PointersUp,u.clone(t));this.publish(a)},forEachPointer:function(e){for(var t=u.iter(this.pointers_);!t.done;t.next())e(t.value)},forEachPointerDown:function(e){for(var t=u.iter(this.pointers_);!t.done;t.next()){var n=t.value;n.down&&e(n)}},pointerCount:function(){return this.pointers_.length},pointerDownCount:function(){for(var e=0,t=u.iter(this.pointers_);!t.done;t.next())t.value.down&&(e+=1);return e},pointerByID:function(e){for(var t=u.iter(this.pointers_);!t.done;t.next()){var n=t.value;if(n.id==e)return n}return null}}}),r),l.PointersStateChangeTypeEnum=u.defineEnum("PointersStateChangeTypeEnum",{PointersDown:0,PointersMoved:1,PointersUp:2}),l.PointersStateChangeMessage=(s=function e(t,n,i){this.changeType=n,this.pointers=u.clone(i),d.TheoMessage.call(this,e.TYPE,t)},u.defineClass({name:"PointersStateChangeMessage",ctor:s,superName:"TheoMessage",statics:{TYPE:{get:function(){return"PointersStateChangeMessage"}}}}),s)},i5Hy:function(e,t,n){var i,o,a,r,s,l,u,c,h,g,d=t,p=n("oAGj"),S=n("gXiO"),_=n("yGNn"),m=n("SmK9"),f=n("iCxV"),C=n("8vXU"),y=n("C4JV"),v=n("rxGp"),T=n("fNpk"),b=n("6azk"),A=n("90dd"),E=n("ZoS2"),D=n("rrhp");d.SaveResult=(i=function(){S.CoreObject.call(this)},o={},p.defineClass({name:"SaveResult",ctor:i,superName:"CoreObject",statics:{NONE:{get:function(){return void 0===o.NONE&&(o.NONE=new i),o.NONE}},COMPLETE:{get:function(){return void 0===o.COMPLETE&&(o.COMPLETE=new d.SaveComplete),o.COMPLETE}},CANCELED:{get:function(){return void 0===o.CANCELED&&(o.CANCELED=new d.SaveCanceled),o.CANCELED}},fromPromiseAny:function(e){var t;return null==e?(T.LegacyCoreAssert.fail("Save promise should resolve with a SaveResult, not nil",void 0,"SaveResult.fromPromiseAny","SaveManager.swift",23),i.NONE):(t=p.as(e,i))?t:(T.LegacyCoreAssert.fail("Save promise should resolve with a SaveResult",{actualResult:e},"SaveResult.fromPromiseAny","SaveManager.swift",28),i.NONE)}}}),i),d.SaveComplete=(a=function(){d.SaveResult.call(this)},p.defineClass({name:"SaveComplete",ctor:a,superName:"SaveResult",props:{toString:function(){return"SaveComplete"}}}),a),d.SaveCanceled=(r=function(){d.SaveResult.call(this)},p.defineClass({name:"SaveCanceled",ctor:r,superName:"SaveResult",props:{toString:function(){return"SaveCanceled"}}}),r),d.SaveErrorMissingState=(s=function(){d.SaveResult.call(this)},p.defineClass({name:"SaveErrorMissingState",ctor:s,superName:"SaveResult",props:{toString:function(){return"SaveErrorMissingState"}}}),s),d.SaveErrorSaveFailed=(l=function(e){this.errorObject=e},p.defineClass({name:"SaveErrorSaveFailed",ctor:l,superName:"SaveResult",props:{toString:function(){return"SaveErrorSaveFailed: "+this.errorObject}}}),l),d.SaveErrorValidationFailed=(u=function(e){this.error=e},p.defineClass({name:"SaveErrorValidationFailed",ctor:u,superName:"SaveResult",props:{toString:function(){return"SaveErrorValidationFailed: "+this.error.error}}}),u),d.SaveErrorExceptionDuringSave=(c=function(e){this.exception=e},p.defineClass({name:"SaveErrorExceptionDuringSave",ctor:c,superName:"SaveResult",props:{toString:function(){return"SaveErrorExceptionDuringSave: "+this.exception}}}),c),d.SaveMessage=(h=function e(t,n,i,o){void 0===o&&(o=null),this.message=n,this.stateID=i,this.reason=o,A.TheoMessage.call(this,e.TYPE,t)},p.defineClass({name:"SaveMessage",ctor:h,superName:"TheoMessage",statics:{TYPE:"SaveMessage",SAVE_SCHEDULED:"save-scheduled",SAVE_COMPLETED:"save-completed",SAVE_SUCCESSFUL:"save-successful",SAVE_CANCELED:"save-canceled",SAVE_FAILED:"save-failed"}}),h),d.SaveManager=(g=function(){this.saveQueue_="com.adobe.theo.core.save",this.saveTimer_=null,this.saveDelaySeconds_=4,this.saveImmediateDelay_=0,this.savePromise_=null,this.suspendCount_=0,this.undoSubscription=null,this.saveLock_=f.Host.async.newLock(),E.TheoPublishingObject.call(this)},p.defineClass({name:"SaveManager",ctor:g,superName:"TheoPublishingObject",statics:{_implements:function(e){return"TheoMessagePublisher"==e}},props:{subscribeWithCallback:function(e,t){var n=E.TheoPublishingObject.prototype.subscribeWithCallback.call(this,e,t);return null!=this.savePromise_&&e(new d.SaveMessage(this,d.SaveMessage.SAVE_SCHEDULED,this.pendingSaveState_)),n},subscribe:function(e,t){var n=E.TheoPublishingObject.prototype.subscribe.call(this,e,t);return null!=this.savePromise_&&e.onMessage(new d.SaveMessage(this,d.SaveMessage.SAVE_SCHEDULED,this.pendingSaveState_)),n},enable:function(e){var t,n=this;f.Host.logging.logForCategory(v.LogCategories.kSaveMgr,"enable SaveManager for "+p.toString(p.opt(p.opt(this.owner,(function(e){return e.document})),(function(e){return e.uuid})))+" at "+p.toString(e),C.LogLevelEnum.INFO_LEVEL),this.lastSaveState_=e,(t=p.opt(this.owner,(function(e){return e.undoRedoMgr})))&&null==this.undoSubscription&&(this.undoSubscription=t.subscribeWithCallback((function(e){var t;(t=p.as(e,D.UndoRedoMessage))&&t.changeType==D.UndoRedoMessage.UNDO_REDO_STATE_CLEAN&&n.requestSave().fail((function(e){return T.LegacyCoreAssert.fail("Save failed",{status:p.toString(e)},"SaveManager.enable","SaveManager.swift",197)}))}),D.UndoRedoMessage.TYPE))},disable:function(){f.Host.logging.logForCategory(v.LogCategories.kSaveMgr,"disable SaveManager for "+p.toString(p.opt(p.opt(this.owner,(function(e){return e.document})),(function(e){return e.uuid}))),C.LogLevelEnum.INFO_LEVEL),p.opt(this.undoSubscription,(function(e){return e.unsubscribe()})),this.undoSubscription=null,this.cancelPendingSave()},markInitialState:function(){var e,t;(e=p.opt(this.owner,(function(e){return e.document})))&&null!=(t=p.opt(e.database.immutableState,(function(e){return e.guid})))&&(this.lastSaveState_=t)},suspend:function(){var e=this,t=this.ensureDeferredPromise();return this.saveLock_.runInLock((function(){0==e.suspendCount_&&(p.opt(e.saveTimer_,(function(e){return e.cancel()})),e.saveTimer_=null),e.suspendCount_+=1})),t},resume:function(){var e=this,t=null;return this.saveLock_.runInLock((function(){T.LegacyCoreAssert.isTrue(null!=e.savePromise_,"Promise should not be nil. Should have been set up in Suspend",void 0,"SaveManager.resume","SaveManager.swift",241),t=e.savePromise_.promise})),this.saveLock_.runInLock((function(){var t;e.suspendCount_>0&&(e.suspendCount_-=1),0==e.suspendCount_&&((t=p.opt(e.owner,(function(e){return e.undoRedoMgr})))&&t.currentlyExecutingAction()||e.requestSave())})),t},cancelPendingSave:function(){var e;(e=this.saveTimer_)&&(e.cancel(),f.Host.logging.logForCategory(v.LogCategories.kSaveMgr,"cancelPendingSave for "+p.toString(p.opt(p.opt(this.owner,(function(e){return e.document})),(function(e){return e.uuid})))+" at "+p.toString(this.pendingSaveState_),C.LogLevelEnum.INFO_LEVEL)),this.saveTimer_=null,p.opt(this.savePromise_,(function(e){return e.resolve(d.SaveResult.CANCELED)})),this.savePromise_=null},flushPendingSave:function(){var e;0==this.suspendCount_&&(e=this.savePromise_)&&(this.savePromise_=null,this.validateAndSave(e))},branchForState:function(e){return e==this.lastSaveState_?this.lastSavedBranch_:null},requestSave:function(e,t){void 0===e&&(e=!1),void 0===t&&(t=!1);var n,i,o=this;if((n=p.opt(this.owner,(function(e){return e.document})))&&null!=(i=p.opt(n.database.immutableState,(function(e){return e.guid})))){f.Host.logging.logForCategory(v.LogCategories.kSaveMgr,"requestSave for "+n.uuid+" at "+i,C.LogLevelEnum.INFO_LEVEL);var a,r=!1,s=this.ensureDeferredPromise();if(n.documentInited&&((a=this.saveTimer_)&&(a.cancel(),this.saveTimer_=null),this.saveLock_.runInLock((function(){t?(o.pendingSaveState_=i,r=0==o.suspendCount_):o.runningSaveState_==i?o.pendingSaveState_=null:null==o.runningSaveState_&&o.lastSaveState_==i?(o.pendingSaveState_=null,0==o.suspendCount_&&o.savePromise_.resolve(d.SaveResult.COMPLETE)):(o.pendingSaveState_=i,r=0==o.suspendCount_)}))),r){f.Host.logging.logForCategory(v.LogCategories.kSaveMgr,"doScheduleSave for "+n.uuid+" at "+this.pendingSaveState_,C.LogLevelEnum.INFO_LEVEL);var l=e?this.saveImmediateDelay_:this.saveDelaySeconds_;this.saveTimer_=f.Host.async.startTimer(l,(function(){return o.flushPendingSave()}))}return s}return _.CorePromise.reject(new d.SaveErrorMissingState)},pendingSave:{get:function(){return p.opt(this.savePromise_,(function(e){return e.promise}))}},runningSaveStateID:{get:function(){return this.runningSaveState_}},ensureDeferredPromise:function(){var e=this,t=null;return this.saveLock_.runInLock((function(){(null==e.savePromise_||e.savePromise_.promise.finalized)&&(e.savePromise_=_.CorePromise.deferred(),e.publish(new d.SaveMessage(e,d.SaveMessage.SAVE_SCHEDULED,e.pendingSaveState_)),e.savePromise_.promise.finished((function(t,n){d.SaveResult.fromPromiseAny(t)==d.SaveResult.CANCELED?e.publish(new d.SaveMessage(e,d.SaveMessage.SAVE_COMPLETED,e.lastSaveState_,d.SaveMessage.SAVE_CANCELED)):e.publish(new d.SaveMessage(e,d.SaveMessage.SAVE_COMPLETED,e.lastSaveState_,n?d.SaveMessage.SAVE_SUCCESSFUL:d.SaveMessage.SAVE_FAILED))}))),t=e.savePromise_.promise})),t},validateAndSave:function(e){var t=this;this.saveTimer_=null,T.LegacyCoreAssert.isTrue(null!=this.owner,"Save manager has no owner. Document closed without calling willCloseDocument?",void 0,"SaveManager.validateAndSave","SaveManager.swift",380),null!=this.pendingSaveState_?(f.Host.logging.logForCategory(v.LogCategories.kSaveMgr,"validateAndSave for "+p.toString(p.opt(p.opt(this.owner,(function(e){return e.document})),(function(e){return e.uuid})))+" at "+this.pendingSaveState_,C.LogLevelEnum.INFO_LEVEL),f.Host.async.postOnWorkerThread(this.saveQueue_,(function(){var n=!1;if(t.saveLock_.runInLock((function(){n=null!=t.runningSaveState_})),n)t.savePromise_=e,t.requestSave(!0);else{t.saveLock_.runInLock((function(){T.LegacyCoreAssert.isTrue(null==t.runningSaveState_,"Save shouldn't be running. Worker queue shouldn't be concurrent.",void 0,"SaveManager.validateAndSave","SaveManager.swift",396),t.runningSaveState_=t.pendingSaveState_,t.pendingSaveState_=null}));var i,o=t.validate();(i=p.as(o,m.DBValidationError))?t.saveLock_.runInLock((function(){t.runningSaveState_=null,e.reject(new d.SaveErrorValidationFailed(i))})):f.Host.exception.executeWithExceptionHandler((function(){return t.save().finished((function(n,i){i?t.saveLock_.runInLock((function(){t.runningSaveState_=null,e.resolve(d.SaveResult.COMPLETE),null!=t.savePromise_&&t.savePromise_!==e&&null==t.pendingSaveState_&&(t.savePromise_.resolve(d.SaveResult.COMPLETE),t.savePromise_=null)})):t.saveLock_.runInLock((function(){return e.reject(new d.SaveErrorSaveFailed(n))}))}))}),(function(n){p.opt(t.saveLock_,(function(e){return e.runInLock((function(){t.runningSaveState_=null}))})),e.reject(new d.SaveErrorExceptionDuringSave(n))}))}}))):e.resolve(d.SaveResult.COMPLETE)},validate:function(){var e,t,n;return(e=p.opt(this.owner,(function(e){return e.document})))&&null!=(t=this.runningSaveState_)&&(n=e.database.getState(t))?n.validate():new m.DBValidationError},save:function(){var e,t,n=this;if((e=p.opt(this.owner,(function(e){return e.document})))&&null!=(t=this.runningSaveState_)){var i=new b.MiniDocumentBranch(e.uuid),o=new y.JSONDocumentEncoder(i);return e.encodeStateByID(t,o),o.finish(),this.saveLock_.runInLock((function(){n.lastSavedBranch_=i,n.lastSaveState_=n.runningSaveState_})),f.Host.logging.logForCategory(v.LogCategories.kSaveMgr,"requestSaveDocumentAt for "+e.uuid+" at "+t,C.LogLevelEnum.INFO_LEVEL),e.requestSaveDocumentAt(t)}return _.CorePromise.reject(d.SaveResult.CANCELED)}}}),g)},"n/CE":function(e,t,n){var i,o,a,r=t,s=n("oAGj"),l=n("quOg"),u=n("FNB+"),c=n("cmoc"),h=n("9Lk3"),g=n("6Rk9"),d=n("iCxV"),p=n("fNpk"),S=n("uxH+"),_=n("K0Rh"),m=n("90dd"),f=n("ZoS2");r.SelectionStateChangedMessage=(i=function e(t){m.TheoMessage.call(this,e.TYPE,t)},s.defineClass({name:"SelectionStateChangedMessage",ctor:i,superName:"TheoMessage",statics:{TYPE:{get:function(){return"SelectionStateChangedMessage"}}}}),i),r.SelectionMode=s.defineEnum("SelectionMode",{Normal:0,Spacing:1,Crop:2}),r.SelectionStateModeChangedMessage=(o=function e(t){m.TheoMessage.call(this,e.TYPE,t)},s.defineClass({name:"SelectionStateModeChangedMessage",ctor:o,superName:"TheoMessage",statics:{TYPE:{get:function(){return"SelectionStateModeChangedMessage"}}}}),o),r.SelectionState=(a=function(){this.selected_=[],this.selectionMode_=r.SelectionMode.Normal,this.inCharStyleMode=!1,f.TheoPublishingObject.call(this)},s.defineClass({name:"SelectionState",ctor:a,superName:"TheoPublishingObject",statics:{_implements:function(e){return"TheoMessagePublisher"==e}},props:{inSpacingMode:{get:function(){return this.selectionMode_==r.SelectionMode.Spacing},set:function(e){this.selectionMode_=e?r.SelectionMode.Spacing:r.SelectionMode.Normal,s.opt(this.owner,(function(e){return e.updateHandles()}))}},inCropMode:{get:function(){return this.selectionMode_==r.SelectionMode.Crop},set:function(e){var t=e?r.SelectionMode.Crop:r.SelectionMode.Normal;t!=this.selectionMode_&&(this.selectionMode_=t,this.publishSelectionModeChange(),s.opt(this.owner,(function(e){return e.updateHandles()})))}},publishSelectionChange:function(){this.publish(new r.SelectionStateChangedMessage(this))},publishSelectionModeChange:function(){this.publish(new r.SelectionStateModeChangedMessage(this))},selectedCount:{get:function(){return this.selected_.length}},selectedCountInDocument:{get:function(){return this.asFormaArray().length}},IDs:{get:function(){return this.selected_},set:function(e){var t=this;this.clearSelection(!1),e.forEach((function(e){var n;(n=s.opt(s.opt(t.owner,(function(e){return e.document})),(function(t){return t.firstPage.root.formaByID(e)})))&&t.selectForma(n,!1)})),this.publishSelectionChange()}},asFormaArray:function(){var e=[];return this.forEachSelected((function(t){s.containsEq(e,t,u._equality_Forma_Forma)||e.push(t)})),e},forEachSelected:function(e){var t=this;this.selected_.forEach((function(n){var i;(i=s.opt(s.opt(t.owner,(function(e){return e.document})),(function(e){return e.firstPage.root.formaByID(n)})))&&e(i)}))},formaAt:function(e){var t=this;if(e<0||e>=this.selected_.length)return p.LegacyCoreAssert.fail("Invalid index for SelectionState.formaAt",void 0,"SelectionState.formaAt","SelectionState.swift",159),null;var n=s.opt(s.opt(this.owner,(function(e){return e.document})),(function(n){return n.firstPage.root.formaByID(t.selected_[e])}));return null==n&&s.opt(d.Host.logging,(function(e){return e.warning("SelectionState.formaAt(index) is nil even though index is in range")})),n},isFormaSelectable:function(e){var t;if(((t=s.opt(e.controller,(function(e){return e.userGroupChild})))||null!=t)&&t)for(var n=s.iter(this.asFormaArray());!n.done;n.next()){var i,o,a=n.value;if((i=s.opt(a.controller,(function(e){return e.userGroupRoot})))&&(o=s.opt(e.controller,(function(e){return e.userGroupRoot})))&&i==o)return!1}return!this.isSelected(e)&&this.owner.allowSelectionChanges},selectForma:function(e,t){void 0===t&&(t=!0),this.selectFormae([e],t)},selectFormae:function(e,t){void 0===t&&(t=!0);for(var n=s.iter(e);!n.done;n.next()){var i=n.value;this.isFormaSelectable(i)&&(s.opt(i.parent,(function(e){return e.kind==c.FrameForma.KIND&&(i.isImage()||i.isVideo())}))?this.selected_.push(i.parent.formaID):this.selected_.push(i.formaID))}t&&this.publishSelectionChange()},replaceSelection:function(e){this.replaceSelectionWithFormae([e])},replaceSelectionWithFormae:function(e){this.clearSelectionArray(),this.selectFormae(s.clone(e))},deselectForma:function(e,t){void 0===t&&(t=!0),this.deselectFormae([e],t)},deselectFormae:function(e,t){if(void 0===t&&(t=!0),this.owner.allowSelectionChanges){for(var n=s.iter(e);!n.done;n.next()){var i=n.value;this.isSelected(i)&&(s.remove(this.selected_,i.formaID),s.opt(i.parent,(function(e){return e.kind==c.FrameForma.KIND}))&&this.isSelected(i.parent)&&s.remove(this.selected_,i.parent.formaID))}t&&this.publishSelectionChange()}},isSelected:function(e){return this.selected_.includes(e.formaID)},isGroupSelected:function(e){var t,n;return(n=s.opt(e.controller,(function(e){return e.userGroupRoot})))?this.selected_.includes(n.formaID):!(!(t=s.opt(e.controller,(function(e){return e.userGroup})))&&null==t||!t)&&this.selected_.includes(e.formaID)},clearSelectionArray:function(){var e=this;if(this.removeStaleSelections(),this.owner.allowSelectionChanges){var t=[];this.forEachSelected((function(n){e.owner.interactionMode==l.InteractionMode.AutomaticGrid&&null!=n.controller&&n.controller.kind==h.GridController.KIND||t.push(n.formaID)}));for(var n=s.iter(t);!n.done;n.next()){var i=n.value;s.remove(this.selected_,i)}}},clearSelection:function(e){void 0===e&&(e=!0),this.owner.allowSelectionChanges&&this.selectedCount>0&&(this.clearSelectionArray(),e&&this.publishSelectionChange())},clearSelectionNoUpdate:function(){this.owner.allowSelectionChanges&&this.clearSelectionArray()},removeStaleSelections:function(e){void 0===e&&(e=!0);var t=this,n=[];this.selected_.forEach((function(e){null==s.opt(s.opt(t.owner,(function(e){return e.document})),(function(t){return t.firstPage.root.formaByID(e)}))&&n.push(e)}));for(var i=s.iter(n);!i.done;i.next()){var o=i.value;s.remove(this.selected_,o)}e&&n.length>0&&this.owner.allowSelectionChanges&&this.publishSelectionChange()},getSelectionDescription:function(){var e,t,n=this.selectedCountInDocument>0?"k_Selection_Multiple":"",i=[];return this.forEachSelected((function(n){var o="";if(((e=s.opt(n.controller,(function(e){return e.userGroup})))||null!=e)&&e)o="k_Selection_Group";else if(n.isText()||n.isTypeLockup())o="k_Selection_Text";else if(n.isSticker())o="k_Selection_GIF";else if(n.isVideo())o="k_Selection_Video";else if(n.isLogo())o="k_Selection_Logo";else if(n.isShape()&&!n.isGridCell())o="k_Selection_Icon";else if(n.isShape()&&n.isGridCell())o="k_Selection_Background";else if(n.isBackgroundImage()||n.isImage())o="k_Selection_Image";else if(n.kind==_.RootForma.KIND){var a;(a=s.opt(s.as(n.controller,S.RootController),(function(e){return e.getGridController()})))&&((t=s.opt(a.gridStyle,(function(e){return e.gridCells.length})))||null!=t?t:0)>0&&(o="k_Selection_Border"),""==o&&(o="k_Selection_Background")}i.includes(o)||i.push(o)})),1==i.length&&(n=i[0]),n},getSelectionBounds:function(){var e=s.clone(this.asFormaArray());return g.GeometryFacade.getFormaeBounds(s.clone(e))}}}),a)},oKI3:function(e,t,n){var i,o,a=t,r=n("oAGj"),s=n("fNpk"),l=n("c+uM"),u=n("BgH2"),c=n("oKlP");a.TextPathID=r.defineEnum("TextPathID",{UNSET:-1,Custom:0,Circle:1,SemiCircleUp:2,SemiCircleDown:3,ArcUp:4,ArcDown:5,Wave:6,Rect:7,Line:8}),a.TextPathLibrary=(i=function(){},o={},r.defineClass({name:"TextPathLibrary",ctor:i,statics:{getPathForLockupStyle:function(e){var t=e.layout;s.LegacyCoreAssert.isTrue(l.LockupStyle.isPath(t),"Why are we asking for a path for a non path layout?",void 0,"TextPathLibrary.getPathForLockupStyle","TextPathLibrary.swift",42);var n=e.pathID;return s.LegacyCoreAssert.isFalse(n==a.TextPathID.UNSET,"Why are we asking for a path when pathID is not set?",void 0,"TextPathLibrary.getPathForLockupStyle","TextPathLibrary.swift",45),n==a.TextPathID.Custom?(s.LegacyCoreAssert.isTrue(null!=e.customPath,"No custom path",void 0,"TextPathLibrary.getPathForLockupStyle","TextPathLibrary.swift",47),e.customPath):i.getPathByID(n)},getPathByID:function(e){var t;return(t=i.paths[e])?t.clone():(s.LegacyCoreAssert.fail("Unsupported path id",{id:e},"TextPathLibrary.getPathByID","TextPathLibrary.swift",59),i.circlePath)},isPathSymmetric:function(e){switch(e){case 1:case 6:case 7:case 8:return!0;case 2:case 3:case 4:case 5:case 0:return!1;case-1:return s.LegacyCoreAssert.fail("Unsupported path id",{id:e},"TextPathLibrary.isPathSymmetric","TextPathLibrary.swift",83),!1;default:return s.LegacyCoreAssert.fail("Unsupported path id",{id:e},"TextPathLibrary.isPathSymmetric","TextPathLibrary.swift",86),!1}},c:.551915024494,quad0:{get:function(){return void 0===o.quad0&&(o.quad0=new u.TextPathSegment(new c.TheoPoint(0,0),new c.TheoPoint(0,-i.c),new c.TheoPoint(1-i.c,-1),new c.TheoPoint(1,-1))),o.quad0}},quad1:{get:function(){return void 0===o.quad1&&(o.quad1=new u.TextPathSegment(new c.TheoPoint(1,-1),new c.TheoPoint(1+i.c,-1),new c.TheoPoint(2,-i.c),new c.TheoPoint(2,0))),o.quad1}},quad2:{get:function(){return void 0===o.quad2&&(o.quad2=new u.TextPathSegment(new c.TheoPoint(2,0),new c.TheoPoint(2,i.c),new c.TheoPoint(1+i.c,1),new c.TheoPoint(1,1))),o.quad2}},quad3:{get:function(){return void 0===o.quad3&&(o.quad3=new u.TextPathSegment(new c.TheoPoint(1,1),new c.TheoPoint(1-i.c,1),new c.TheoPoint(0,i.c),new c.TheoPoint(0,0))),o.quad3}},quad2Prime:{get:function(){return void 0===o.quad2Prime&&(o.quad2Prime=new u.TextPathSegment(new c.TheoPoint(0,0),new c.TheoPoint(0,i.c),new c.TheoPoint(1-i.c,1),new c.TheoPoint(1,1))),o.quad2Prime}},quad3Prime:{get:function(){return void 0===o.quad3Prime&&(o.quad3Prime=new u.TextPathSegment(new c.TheoPoint(1,1),new c.TheoPoint(1+i.c,1),new c.TheoPoint(2,i.c),new c.TheoPoint(2,0))),o.quad3Prime}},upArc:{get:function(){return void 0===o.upArc&&(o.upArc=new u.TextPathSegment(new c.TheoPoint(0,0),new c.TheoPoint(2,-1),new c.TheoPoint(4,-1),new c.TheoPoint(6,0))),o.upArc}},downArc:{get:function(){return void 0===o.downArc&&(o.downArc=new u.TextPathSegment(new c.TheoPoint(0,0),new c.TheoPoint(2,1),new c.TheoPoint(4,1),new c.TheoPoint(6,0))),o.downArc}},wave:{get:function(){return void 0===o.wave&&(o.wave=new u.TextPathSegment(new c.TheoPoint(0,0),new c.TheoPoint(2,-2),new c.TheoPoint(4,2),new c.TheoPoint(6,0))),o.wave}},lineTop:{get:function(){return void 0===o.lineTop&&(o.lineTop=new u.TextPathSegment(new c.TheoPoint(0,0),new c.TheoPoint(.3,0),new c.TheoPoint(.7,0),new c.TheoPoint(1,0))),o.lineTop}},lineRight:{get:function(){return void 0===o.lineRight&&(o.lineRight=new u.TextPathSegment(new c.TheoPoint(1,0),new c.TheoPoint(1,.3),new c.TheoPoint(1,.7),new c.TheoPoint(1,1))),o.lineRight}},lineBottom:{get:function(){return void 0===o.lineBottom&&(o.lineBottom=new u.TextPathSegment(new c.TheoPoint(1,1),new c.TheoPoint(.7,1),new c.TheoPoint(.3,1),new c.TheoPoint(0,1))),o.lineBottom}},lineLeft:{get:function(){return void 0===o.lineLeft&&(o.lineLeft=new u.TextPathSegment(new c.TheoPoint(0,1),new c.TheoPoint(0,.7),new c.TheoPoint(0,.3),new c.TheoPoint(0,0))),o.lineLeft}},circlePath:{get:function(){return void 0===o.circlePath&&(o.circlePath=new u.TextPath([i.quad0,i.quad1,i.quad2,i.quad3])),o.circlePath}},semicirclePath:{get:function(){return void 0===o.semicirclePath&&(o.semicirclePath=new u.TextPath([i.quad0,i.quad1])),o.semicirclePath}},semicircleDownPath:{get:function(){return void 0===o.semicircleDownPath&&(o.semicircleDownPath=new u.TextPath([i.quad2Prime,i.quad3Prime])),o.semicircleDownPath}},upArcPath:{get:function(){return void 0===o.upArcPath&&(o.upArcPath=new u.TextPath([i.upArc],2.5)),o.upArcPath}},downArcPath:{get:function(){return void 0===o.downArcPath&&(o.downArcPath=new u.TextPath([i.downArc],2.5)),o.downArcPath}},wavePath:{get:function(){return void 0===o.wavePath&&(o.wavePath=new u.TextPath([i.wave])),o.wavePath}},rectPath:{get:function(){return void 0===o.rectPath&&(o.rectPath=new u.TextPath([i.lineTop,i.lineRight,i.lineBottom,i.lineLeft],1/0)),o.rectPath}},linePath:{get:function(){return void 0===o.linePath&&(o.linePath=new u.TextPath([i.lineTop])),o.linePath}},paths:{get:function(){return void 0===o.paths&&(o.paths={1:i.circlePath,2:i.semicirclePath,3:i.semicircleDownPath,4:i.upArcPath,5:i.downArcPath,6:i.wavePath,7:i.rectPath,8:i.linePath}),o.paths}}}}),i)},rrhp:function(e,t,n){var i,o,a,r,s,l=t,u=n("oAGj"),c=n("0wFF"),h=n("yGNn"),g=n("P83h"),d=n("ZhwN"),p=n("iCxV"),S=n("8vXU"),_=n("rxGp"),m=n("fNpk"),f=n("90dd"),C=n("ZoS2"),y=n("Kkml");l.IDocumentStateManager=u.defineProtocol("IDocumentStateManager",{resetStates:"() -> Void",getRootState:"() -> IDocumentState",beginNewState:"(String) -> Void",endNewState:"() -> IDocumentState",setCurrentState:"(IDocumentState) -> Void",getNewStateNestingDepth:"() -> Integer"}),l.IDocumentState=u.defineProtocol("IDocumentState",{}),l.PatchStatus=(i=function(e){this.depth=0,this.newStateBegun=e},u.defineClass({name:"PatchStatus",ctor:i}),i),l.TimelineState=(o=function(e,t){this.actionDepth=0,this.patch=null,this.beginSelectedFormaIDs=[],this.endSelectedFormaIDs=[],this.beganInCharStyleMode=!1,this.endedInCharStyleMode=!1,this.compoundingActionWrapperEvent=null,this.branchName=null,this.action=e,this.state=t},u.defineClass({name:"TimelineState",ctor:o,props:{description:{get:function(){var e;return(e=this.branchName)||null!=e?e:u.opt(this.action,(function(e){return e.description}))}}}}),o),l.Timeline=(a=function(e,t){this.states=[],this.current=-1,void 0===e&&(e=null),void 0===t&&(t=null),this.gesture=e,this.name=t},u.defineClass({name:"Timeline",ctor:a,statics:{gesture:function(e){return new a(e,null)},branch:function(e){return new a(null,e)}},props:{currentState:{get:function(){return this.current<0||this.current>this.states.length?null:this.states[this.current]}}}}),a),l.UndoRedoChangeDirection=u.defineEnum("UndoRedoChangeDirection",{Undo:"undo",Redo:"redo"}),l.UndoRedoMessage=(r=function e(t,n,i,o){void 0===i&&(i=null),void 0===o&&(o=null),this.changeType=n,this.changeAction=i,this.changeDirection=o,f.TheoMessage.call(this,e.TYPE,t)},u.defineClass({name:"UndoRedoMessage",ctor:r,superName:"TheoMessage",statics:{TYPE:"UndoRedoMessage",UNDO_REDO_CHANGE:"state-changed",UNDO_REDO_GESTURE_BEGIN:"gesture-begin",UNDO_REDO_GESTURE_END:"gesture-end",UNDO_REDO_STATE_CLEAN:"state-clean"}}),r),l.UndoRedoSelectionPolicyEnum=u.defineEnum("UndoRedoSelectionPolicyEnum",{RestoreSelection:"restore",PreserveSelection:"preserve"}),l.UndoRedoManager=(s=function(e){this.applyingUpdatedPatchesDepth=0,this.waitingCallbacks=[],this.timeline=new l.Timeline,this.timelineStack=[],this.patches=[],this.gestureUA=null,this._selectionPolicy=e,C.TheoPublishingObject.call(this)},u.defineClass({name:"UndoRedoManager",ctor:s,superName:"TheoPublishingObject",statics:{_implements:function(e){return"TheoMessagePublisher"==e}},props:{setup:function(){var e;(e=u.opt(this.owner,(function(e){return e.document})))&&(this.stateMgr=u.opt(p.Host.factories,(function(t){return t.constructDocumentStateManager(e)}))),this.reset()},shouldCollapseActions:function(e,t){return null!=e&&null!=t&&e.description==t.description&&e.scope==t.scope},updateSelection:function(e,t,n){var i;if(this._selectionPolicy==l.UndoRedoSelectionPolicyEnum.PreserveSelection)u.opt(this.owner,(function(e){return e.selection.removeStaleSelections(!1)}));else{var o=[],a=!1;if("cancel-branch"==e?(o=u.clone(u.opt(this.owner,(function(e){return e.selection.IDs}))||[]),a=!(!(i=u.opt(this.owner,(function(e){return e.selection.inCharStyleMode})))&&null==i)&&i):"set-index"==e&&t>n?(o=u.clone(this.timeline.states[t].beginSelectedFormaIDs),a=this.timeline.states[t].beganInCharStyleMode):(o=u.clone(this.timeline.currentState.endSelectedFormaIDs),a=this.timeline.currentState.endedInCharStyleMode),"set-index"==e){a=!1;for(var r=[],s=u.iter(o);!s.done;s.next()){var c,h=s.value;(c=u.opt(u.opt(this.owner,(function(e){return e.document})),(function(e){return e.firstPage.root.formaByID(h)})))&&(c.isText()||r.push(h))}o=u.clone(r)}"user-action"!=e&&(u.opt(this.owner,(function(e){return e.selection.inCharStyleMode=a})),u.opt(this.owner,(function(e){return e.selection.IDs=u.clone(o)})))}},reset:function(){u.opt(this.stateMgr,(function(e){return e.resetStates()})),this.timeline=new l.Timeline,this.timeline.states.push(new l.TimelineState(null,u.opt(this.stateMgr,(function(e){return e.getRootState()})))),this.timeline.current=0,u.opt(this.owner,(function(e){return e.saveMgr.markInitialState()})),this.publishEvent(l.UndoRedoMessage.UNDO_REDO_CHANGE),this.publishEvent(l.UndoRedoMessage.UNDO_REDO_STATE_CLEAN)},debugDescribeCurrentState:function(){var e,t,n=this.timelineStack.length>0?"[branch depth "+u.toString(this.timelineStack.length)+"] ":"";return n+="Index "+u.toString(this.timeline.current),(e=this.timeline.currentState)?(t=e.action)?n+=" ("+t.description+")":n+=" (Initial state)":n+=" (Invalid state)",n},beginBranch:function(){this.beginNamedBranch(null)},beginNamedBranch:function(e){p.Host.logging.logForCategory(_.LogCategories.kUndoMgr,"Starting new branch @ "+this.debugDescribeCurrentState(),S.LogLevelEnum.INFO_LEVEL),m.LegacyCoreAssert.isTrue(null==this.gestureScope,"Should not branch in the middle of a running gesture",void 0,"UndoRedoManager.beginNamedBranch","UndoRedoManager.swift",317),this.timelineStack.push(this.timeline);var t=l.Timeline.branch(e);t.states.push(this.timeline.currentState),t.current=0,this.timeline=t},endBranch:function(e){var t=this;if(this.timelineStack.length>0){p.Host.logging.logForCategory(_.LogCategories.kUndoMgr,(e?"Committing":"Canceling")+" branch @ "+this.debugDescribeCurrentState(),S.LogLevelEnum.INFO_LEVEL);var n=this.timelineStack.pop();if(e){var i=this.timeline.currentState,o=this.timeline.name;if(this.timeline=n,i===this.timeline.currentState);else{if(this.timeline.current<this.timeline.states.length-1){var a=this.timeline.current+1,r=this.timeline.states.length-a;this.timeline.states.splice(a,r)}u.opt(i,(function(e){return e.branchName=o})),this.timeline.states.push(i),this.timeline.current=this.timeline.states.length-1}this.publishEvent(l.UndoRedoMessage.UNDO_REDO_CHANGE)}else this.timeline=n,u.opt(this.stateMgr,(function(e){return e.setCurrentState(t.timeline.currentState.state)})),this.applyPatches((function(){t.updateSelection("cancel-branch",-1,-1),t.publishEvent(l.UndoRedoMessage.UNDO_REDO_CHANGE)}));0==this.timelineStack.length&&this.publishEvent(l.UndoRedoMessage.UNDO_REDO_STATE_CLEAN)}else m.LegacyCoreAssert.fail("endBranch: branch stack underflow",{currentState:this.debugDescribeCurrentState()},"UndoRedoManager.endBranch","UndoRedoManager.swift",377)},beginGesture:function(){if(m.LegacyCoreAssert.isTrue(null==this.gestureScope,"Beginning gesture scope when gesture already running",void 0,"UndoRedoManager.beginGesture","UndoRedoManager.swift",399),null==this.gestureScope){p.Host.logging.logForCategory(_.LogCategories.kUndoMgr,"Starting new gesture branch @ "+this.debugDescribeCurrentState(),S.LogLevelEnum.INFO_LEVEL),this.publishEvent(l.UndoRedoMessage.UNDO_REDO_GESTURE_BEGIN),this.timelineStack.push(this.timeline);var e=l.Timeline.gesture(d.GUIDUtils.makeGUID());e.states.push(this.timeline.currentState),e.current=0,this.timeline=e,this.gestureUA=null}},endGesture:function(e){var t,n=this;m.LegacyCoreAssert.isTrue(null!=this.gestureScope,"Ending gesture scope when no gesture running",void 0,"UndoRedoManager.endGesture","UndoRedoManager.swift",413),null!=this.gestureScope&&(p.Host.logging.logForCategory(_.LogCategories.kUndoMgr,"Ending gesture branch @ "+this.debugDescribeCurrentState(),S.LogLevelEnum.INFO_LEVEL),null!=this.gestureUA?(t=this.timeline.currentState)&&this.endActionState(t,(function(){n.endBranch(e),n.publishEvent(l.UndoRedoMessage.UNDO_REDO_GESTURE_END),n.gestureUA=null})):(this.endBranch(e),this.publishEvent(l.UndoRedoMessage.UNDO_REDO_GESTURE_END)))},gestureScope:{get:function(){return this.timeline.gesture}},beginUserActionAsync:function(e){var t=this;return new h.CorePromise((function(n,i){return t.beginUserAction(e,(function(){return n(null)}))}))},endUserActionAsync:function(){var e=this;return new h.CorePromise((function(t,n){return e.endUserAction((function(){return t(null)}))}))},beginUserAction:function(e,t){var n,i=this;p.Host.logging.logForCategory(_.LogCategories.kUndoMgr,"beginUserAction @ ("+e.description+")",S.LogLevelEnum.INFO_LEVEL);var o=this.timeline.currentState;if(o.actionDepth>0)m.LegacyCoreAssert.fail("Nested user action detected",{new:e.description,current:o.action.description},"UndoRedoManager.beginUserAction","UndoRedoManager.swift",471),o.actionDepth+=1,t();else{this.timeline.states.length>this.timeline.current+1&&this.timeline.states.splice(this.timeline.current+1,this.timeline.states.length-this.timeline.current-1);var a=this.shouldCollapseActions(o.action,e),r=e.collapseSequential==y.CollapseBehavior.ALWAYS||e.collapseSequential==y.CollapseBehavior.GESTURE_DEPENDENT&&null!=this.gestureScope;if(null!=this.gestureScope&&null!=this.gestureUA&&a&&r)o.actionDepth=1,t();else{var s=new l.TimelineState(e,null);function c(n,o){null!=i.gestureScope&&null==i.gestureUA&&(i.gestureUA=e),i.timeline.states.push(n),i.timeline.current=i.timeline.states.length-1,o?i.applyPatches((function(){n.actionDepth=1,u.opt(i.stateMgr,(function(t){return t.beginNewState(e.description)})),t()})):(n.actionDepth=1,u.opt(i.stateMgr,(function(t){return t.beginNewState(e.description)})),t())}if(s.beginSelectedFormaIDs=u.clone(u.opt(this.owner,(function(e){return e.selection.IDs}))||[]),s.beganInCharStyleMode=!(!(n=u.opt(this.owner,(function(e){return e.selection.inCharStyleMode})))&&null==n)&&n,!(null!=this.gestureScope&&this.timeline.current>=1)||r&&a)if((!e.compounding||r)&&a&&this.timeline.current>=1){for(var h=!1,d=this.timeline.current-1;d>0&&this.shouldCollapseActions(this.timeline.states[d].action,e);)d-=1;e.compounding||(s.compoundingActionWrapperEvent=new g.FormaNullChangedEvent(this.owner.document.firstPage.root),u.opt(u.opt(this.owner,(function(e){return e.document})),(function(e){return e.firstPage.beginUpdate(s.compoundingActionWrapperEvent)})),u.opt(this.stateMgr,(function(e){return e.setCurrentState(i.timeline.states[d].state)})),h=!0),r&&this.timeline.states.splice(d+1,1),c(s,h)}else c(s,!1);else s.compoundingActionWrapperEvent=new g.FormaNullChangedEvent(this.owner.document.firstPage.root),u.opt(u.opt(this.owner,(function(e){return e.document})),(function(e){return e.firstPage.beginUpdate(s.compoundingActionWrapperEvent)})),this.endActionState(this.timeline.currentState,(function(){u.opt(i.stateMgr,(function(e){return e.setCurrentState(i.timeline.states[0].state)})),c(s,!0)}))}}},endActionState:function(e,t){var n,i=this;null!=e.compoundingActionWrapperEvent&&(u.opt(u.opt(this.owner,(function(e){return e.document})),(function(t){return t.firstPage.endUpdate(e.compoundingActionWrapperEvent)})),e.compoundingActionWrapperEvent=null),e.actionDepth=0,e.endSelectedFormaIDs=u.clone(u.opt(this.owner,(function(e){return e.selection.IDs}))||[]),e.endedInCharStyleMode=!(!(n=u.opt(this.owner,(function(e){return e.selection.inCharStyleMode})))&&null==n)&&n,this.applyPatches((function(){for(;i.waitingCallbacks.length>0&&0==i.timeline.currentState.actionDepth;)i.waitingCallbacks.shift()();i.updateSelection("user-action",-1,-1),i.publishEvent(l.UndoRedoMessage.UNDO_REDO_CHANGE),i.gestureUA=null,t(),0==i.timelineStack.length&&0==i.timeline.currentState.actionDepth&&i.publishEvent(l.UndoRedoMessage.UNDO_REDO_STATE_CLEAN)}))},endUserAction:function(e){var t;(t=this.timeline.currentState)?(p.Host.logging.logForCategory(_.LogCategories.kUndoMgr,"endUserAction @ "+this.debugDescribeCurrentState(),S.LogLevelEnum.INFO_LEVEL),m.LegacyCoreAssert.isTrue(this.timeline.current>0,"first timeline entry should always be initial state, not a user action",void 0,"UndoRedoManager.endUserAction","UndoRedoManager.swift",607),m.LegacyCoreAssert.isTrue(null!=t.action,"invalid current state for ending a user action",void 0,"UndoRedoManager.endUserAction","UndoRedoManager.swift",608),0==t.actionDepth?m.LegacyCoreAssert.fail("User action stack underflow",void 0,"UndoRedoManager.endUserAction","UndoRedoManager.swift",611):t.actionDepth>1||null!=this.gestureScope&&null!=this.gestureUA?(t.actionDepth-=1,e()):this.endActionState(t,e)):m.LegacyCoreAssert.fail("invalid current state for ending a user action",void 0,"UndoRedoManager.endUserAction","UndoRedoManager.swift",630)},cancelUserAction:function(e){var t,n=this;if(t=this.timeline.currentState)if(p.Host.logging.logForCategory(_.LogCategories.kUndoMgr,"cancelUserAction @ "+this.debugDescribeCurrentState(),S.LogLevelEnum.INFO_LEVEL),m.LegacyCoreAssert.isTrue(this.timeline.current>0,"first timeline entry should always be initial state, not a user action",void 0,"UndoRedoManager.cancelUserAction","UndoRedoManager.swift",642),0==t.actionDepth)m.LegacyCoreAssert.fail("User action stack underflow",void 0,"UndoRedoManager.cancelUserAction","UndoRedoManager.swift",645);else{if(t.actionDepth>1)return m.LegacyCoreAssert.fail("Can not cancel a user action with a depth greater than 1",void 0,"UndoRedoManager.cancelUserAction","UndoRedoManager.swift",647),this.endUserAction(e);t.actionDepth=0,t.endSelectedFormaIDs=u.clone(u.opt(this.owner,(function(e){return e.selection.IDs}))||[]);var i=this.getCurrentTimelineIndex(),o=i-1;t.state=u.opt(this.stateMgr,(function(e){return e.endNewState()})),this.setCurrentTimelineIndex(o,(function(){for(n.removeTimelineStateAtIndex(i),n.publishEvent(l.UndoRedoMessage.UNDO_REDO_CHANGE);n.waitingCallbacks.length>0&&0==n.timeline.currentState.actionDepth;)n.waitingCallbacks.shift()();n.gestureUA=null,e(),0==n.timelineStack.length&&0==n.timeline.currentState.actionDepth&&n.publishEvent(l.UndoRedoMessage.UNDO_REDO_STATE_CLEAN)}))}else m.LegacyCoreAssert.fail("invalid current state for ending a user action",void 0,"UndoRedoManager.cancelUserAction","UndoRedoManager.swift",677)},getActionDepth:function(){var e;return(e=u.opt(this.timeline.currentState,(function(e){return e.actionDepth})))||null!=e?e:0},registerPatch:function(e){this.patches.push(e)},getPatchDepth:function(){var e;return(e=u.opt(u.opt(this.timeline.currentState,(function(e){return e.patch})),(function(e){return e.depth})))||null!=e?e:-1},beginPatch:function(){var e,t;(e=this.timeline.currentState)&&((t=e.patch)?(t.newStateBegun||(u.opt(this.stateMgr,(function(e){return e.beginNewState("patch")})),t.newStateBegun=!0),t.depth+=1):m.LegacyCoreAssert.fail("Invalid beginPatch: not in a patching context.",void 0,"UndoRedoManager.beginPatch","UndoRedoManager.swift",727))},endPatch:function(){var e,t;(e=this.timeline.currentState)&&((t=e.patch)?t.depth>0?t.depth-=1:m.LegacyCoreAssert.fail("Patch stack underflow!",void 0,"UndoRedoManager.endPatch","UndoRedoManager.swift",741):m.LegacyCoreAssert.fail("Invalid beginPatch: not in a patching context.",void 0,"UndoRedoManager.endPatch","UndoRedoManager.swift",744))},invalidatePatches:function(e){var t=this;0==this.getActionDepth()&&null==this.gestureScope?(this.applyingUpdatedPatchesDepth+=1,this.applyPatches((function(){t.publishEvent("state-updated"),t.applyingUpdatedPatchesDepth-=1,0==t.timelineStack.length&&0==t.timeline.currentState.actionDepth&&t.publishEvent(l.UndoRedoMessage.UNDO_REDO_STATE_CLEAN),e()}))):e()},undo:function(e){var t,n=this;m.LegacyCoreAssert.isTrue(null==this.gestureScope,"Should not undo in the middle of a running gesture",void 0,"UndoRedoManager.undo","UndoRedoManager.swift",781),this.timeline.current<=0?e():(u.opt(p.Host.logging,(function(e){return e.logToAnalytics(c.AnalyticsConstants.kAnalyticsDataUndo,{contextualData2:"actionDescription:"+((t=n.getUndoDescription())||null!=t?t:"unknown")})})),this.setCurrentTimelineIndex(this.timeline.current-1,e,l.UndoRedoChangeDirection.Undo))},redo:function(e){var t,n=this;m.LegacyCoreAssert.isTrue(null==this.gestureScope,"Should not redo in the middle of a running gesture",void 0,"UndoRedoManager.redo","UndoRedoManager.swift",799),this.timeline.current==this.timeline.states.length-1?e():(u.opt(p.Host.logging,(function(e){return e.logToAnalytics(c.AnalyticsConstants.kAnalyticsDataRedo,{contextualData2:"actionDescription:"+((t=n.getRedoDescription())||null!=t?t:"unknown")})})),this.setCurrentTimelineIndex(this.timeline.current+1,e,l.UndoRedoChangeDirection.Redo))},getUndoDescription:function(){return this.timeline.current<=0?null:u.opt(this.timeline.currentState,(function(e){return e.description}))},getRedoDescription:function(){return this.timeline.current==this.timeline.states.length-1?null:this.timeline.states[this.timeline.current+1].description},applyPatches:function(e){var t,n=this,i=this.timeline.states[this.timeline.current];m.LegacyCoreAssert.isTrue(null==i.patch,"applying patches before previous patch context is finished!",void 0,"UndoRedoManager.applyPatches","UndoRedoManager.swift",833),m.LegacyCoreAssert.isTrue(0==i.actionDepth,"should not apply patches while user action still mutating",void 0,"UndoRedoManager.applyPatches","UndoRedoManager.swift",834),i.patch=new l.PatchStatus(((t=u.opt(this.stateMgr,(function(e){return e.getNewStateNestingDepth()})))||null!=t?t:0)>0),function e(t,o){t>=n.patches.length?o():(i!==n.timeline.states[n.timeline.current]&&u.opt(p.Host.logging,(function(e){return e.warning("unexpected change of timeline during patching")})),m.LegacyCoreAssert.isTrue(null!=i.patch&&0==i.patch.depth,"unexpected state between patches",void 0,"UndoRedoManager.applyPatches","UndoRedoManager.swift",846),n.patches[t]((function(){return e(t+1,o)})))}(0,(function(){i!==n.timeline.currentState&&u.opt(p.Host.logging,(function(e){return e.warning("unexpected change of timeline during patching")})),i.patch.newStateBegun&&(i.state=u.opt(n.stateMgr,(function(e){return e.endNewState()}))),i.patch=null,e()}))},getTimelineLength:function(){return this.timeline.states.length},getCurrentTimelineState:function(){return this.timeline.currentState},getCurrentTimelineIndex:function(){return this.timeline.current},getTimelineStateAtIndex:function(e){return m.LegacyCoreAssert.isTrue(e>=0&&e<this.timeline.states.length,"getTimelineStateAtIndex: index out of range",void 0,"UndoRedoManager.getTimelineStateAtIndex","UndoRedoManager.swift",893),this.timeline.states[e]},publishUndoEvent:function(e){var t;((t=u.opt(u.opt(this.owner,(function(e){return e.document})),(function(e){return e.documentInited})))||null!=t)&&t&&(this.publish(new l.UndoRedoMessage(this,l.UndoRedoMessage.UNDO_REDO_CHANGE,e,l.UndoRedoChangeDirection.Undo)),this.publishEvent(l.UndoRedoMessage.UNDO_REDO_STATE_CLEAN))},publishRedoEvent:function(e){var t;((t=u.opt(u.opt(this.owner,(function(e){return e.document})),(function(e){return e.documentInited})))||null!=t)&&t&&(this.publish(new l.UndoRedoMessage(this,l.UndoRedoMessage.UNDO_REDO_CHANGE,e,l.UndoRedoChangeDirection.Redo)),this.publishEvent(l.UndoRedoMessage.UNDO_REDO_STATE_CLEAN))},publishEvent:function(e){var t;(e!=l.UndoRedoMessage.UNDO_REDO_CHANGE||((t=u.opt(u.opt(this.owner,(function(e){return e.document})),(function(e){return e.documentInited})))||null!=t)&&t)&&this.publish(new l.UndoRedoMessage(this,e))},removeTimelineStateAtIndex:function(e){m.LegacyCoreAssert.isTrue(e>0,"removeStateAtIndex: should not remove the initial state!",void 0,"UndoRedoManager.removeTimelineStateAtIndex","UndoRedoManager.swift",927),m.LegacyCoreAssert.isTrue(e!=this.timeline.current,"removeStateAtIndex: should not remove the current state!",void 0,"UndoRedoManager.removeTimelineStateAtIndex","UndoRedoManager.swift",928),m.LegacyCoreAssert.isTrue(e>=0&&e<this.timeline.states.length,"removeStateAtIndex: index out of range",void 0,"UndoRedoManager.removeTimelineStateAtIndex","UndoRedoManager.swift",929),e>0&&e<this.timeline.states.length&&(this.timeline.states.splice(e,1),e<this.timeline.current&&(this.timeline.current-=1),this.publishEvent("timeline-changed"))},setCurrentTimelineIndex:function(e,t,n){void 0===n&&(n=null);var i=this,o=n==l.UndoRedoChangeDirection.Undo,a=n==l.UndoRedoChangeDirection.Redo;if(p.Host.logging.logForCategory(_.LogCategories.kUndoMgr,"setting timeline index to "+u.toString(e)+" @ "+this.debugDescribeCurrentState(),S.LogLevelEnum.INFO_LEVEL),e!=this.timeline.current&&e>=0&&e<this.timeline.states.length){var r=u.opt(this.timeline.currentState,(function(e){return e.action})),s=this.timeline.current;this.timeline.current=e;var c=u.opt(this.timeline.currentState,(function(e){return e.action}));return u.opt(this.stateMgr,(function(e){return e.setCurrentState(i.timeline.currentState.state)})),this.applyPatches((function(){i.updateSelection("set-index",s,e),o?i.publishUndoEvent(r):a?i.publishRedoEvent(c):i.publishEvent(l.UndoRedoMessage.UNDO_REDO_CHANGE),t()}))}t()},whenNoCurrentAction:function(e){0==this.timeline.currentState.actionDepth?e():this.waitingCallbacks.push(e)},currentlyExecutingAction:function(){var e;return null!=this.gestureScope||!!(e=this.timeline.currentState)&&(this.getActionDepth()>0||null!=e.patch)},establishSelectionStates:function(){var e=this;u.opt(this.timeline.currentState,(function(t){return t.endSelectedFormaIDs=u.clone(u.opt(e.owner,(function(e){return e.selection.IDs}))||[])}))}}}),s)}}]);
//# sourceMappingURL=vendors_npm_spark_c4f60e44-346b9503.js.map